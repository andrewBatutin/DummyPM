issue key,projectCategory,created,priority,summary,description,creator,reporter
ZOOKEEPER-2769,ZooKeeper,2017-04-28T19:44:50.000+0000,Major,Compiled documentation should not be under source control,We have xml files that compile into our documentation in src/docs/ and precompiled documentation docs/We should remove them and only have uncompiled documentation under source control,abrahamfine,abrahamfine
ZOOKEEPER-2768,ZooKeeper,2017-04-28T09:57:55.000+0000,Critical,Some ideas about four word command,"Some ideas about four word command1) about cons,can we add command dimension data,such likenow/10.204.2.39:63943[1](queued=0,recved=7,sent=7,sid=0x154c32e8c2a5b8c,lop=PING,est=1483669807748,to=10000,l",wangzhen,wangzhen
ZOOKEEPER-2767,ZooKeeper,2017-04-27T12:14:48.000+0000,Trivial,Correct the exception messages in X509Util if truststore location or password is not configured,In org.apache.zookeeper.common.X509Util.org.apache.zookeeper.common.X509Util.createSSLContext exception messages contains keystore related messages instead of truststore messages for truststore locati,a72877,a72877
ZOOKEEPER-2766,ZooKeeper,2017-04-25T10:18:42.000+0000,Major,Quorum fails with java.io.EOFException,"When I start a ZooKeeper ensemble comprising 3 nodes, I'm currently facing the following behavior:Two nodes (let's say node 2 and 3) out of the three start their own quorum, and finally one of them is",pkleindienst,pkleindienst
ZOOKEEPER-2765,ZooKeeper,2017-04-19T15:43:08.000+0000,Major,modern C++ client,"We should add a modern C++ (i.e. C++14, C++17, etc.) client library that wraps the existing C client.  A future issue may replace the C client itself.",ecarter,ecarter
ZOOKEEPER-2764,ZooKeeper,2017-04-19T09:54:16.000+0000,Minor,"By default, only srvr four-letter word is on the whitelist, while documentation says all are","Using the same Vagrant provisioning script as for 3.5.2-alpha, suddenly all monitoring tools told me that the ZK instance was unavailable or had an error. Investigating further, the instance was fine ",ABchmn,ABchmn
ZOOKEEPER-2763,ZooKeeper,2017-04-19T06:34:02.000+0000,Minor,Utils.toCsvBuffer() omits leading 0 for bytes < 0x10,"org.apache.jute.Utils.toCsvBuffer(), which converts a byte array to a string containing the hex representation of that byte array, omits the leading zero for any byte less than 0x10, due to its use of",bberg,bberg
ZOOKEEPER-2762,ZooKeeper,2017-04-18T21:57:58.000+0000,Major,Multithreaded correctness Warnings,,abrahamfine,abrahamfine
ZOOKEEPER-2761,ZooKeeper,2017-04-18T11:31:19.000+0000,Major,Build is packaged as uncompressed tar archive but file name ends with .gz,"This breaks my build scripts. Did work fine with 3.5.2-alphaUsing 7-Zip on Windows I got a warning, but the archive was extracted fine.On Linux, tar -xzf exits with an error code, as it pipes through ",ABchmn,ABchmn
ZOOKEEPER-2760,ZooKeeper,2017-04-18T07:49:07.000+0000,Blocker,"AAch64 build error: Error: unknown mnemonic `lock' -- `lock xaddl x1,[x0]'",Zookeeper-3.4.10 is integrated into Apache Bigtop : https://github.com/apache/bigtop/commit/b00ac093634437e749561c8837179d13d95fda91But compiling error occurred when we build the bigtop zookeeper comp,yqGu,yqGu
ZOOKEEPER-2759,ZooKeeper,2017-04-17T22:45:41.000+0000,Major,Flaky test: org.apache.zookeeper.server.quorum.QuorumCnxManagerTest.testNoAuthLearnerConnectToAuthRequiredServerWithHigherSid,,abrahamfine,abrahamfine
ZOOKEEPER-2758,ZooKeeper,2017-04-15T06:30:58.000+0000,Trivial,Typo: transasction --> transaction,Typo in src/docs/src/documentation/content/xdocs/zookeeperAdmin.xml,jeffwidman,jeffwidman
ZOOKEEPER-2757,ZooKeeper,2017-04-14T21:58:40.000+0000,Minor,Incorrect path crashes zkCli,"If I try {{delete test}} without the leading /, then the CLI crashes with this exception:{noformat}Exception in thread ""main"" java.lang.IllegalArgumentException: Path must start with / character	at or",fpj,fpj
ZOOKEEPER-2756,ZooKeeper,2017-04-13T21:55:00.000+0000,Major,Add CMake build system for better cross-platform support,"The C bindings primary build system is Autotools. This obviously does not work for Windows, and so the original port to Windows simply added a Visual Studio solution to the project, splitting the buil",andschwa,andschwa
ZOOKEEPER-2755,ZooKeeper,2017-04-13T04:51:04.000+0000,Major,Allow to subclass ClientCnxnSocketNetty and NettyServerCnxn in order to use Netty Local transport,ClientCnxnSocketNetty and NettyServerCnxn use explicitly InetSocketAddress class to work with network addresses.We can do a little refactoring to use only SocketAddress and make it possible to create ,eolivelli,eolivelli
ZOOKEEPER-2754,ZooKeeper,2017-04-11T22:37:00.000+0000,Major,Set up Apache Jenkins job that runs the flaky test analyzer script.,,hanm,hanm
ZOOKEEPER-2753,ZooKeeper,2017-04-11T22:17:29.000+0000,Major,Introduce a python script for generating flaky test report,"This python script uses Jenkins REST API to query Jenkins build, analyze test results and generate reports of flaky tests over a range of builds across specific time periods. This is preview of what t",hanm,hanm
ZOOKEEPER-2752,ZooKeeper,2017-04-11T22:13:57.000+0000,Major,Introduce ZooKeeper flaky test dashboard,"ZooKeeper flaky test dashboard is a set of tools used to track, analyze, and report flaky tests. It's designed with the goal to automate most of the labor intensive part of work related to tracking, m",hanm,hanm
ZOOKEEPER-2751,ZooKeeper,2017-04-10T17:11:26.000+0000,Minor,Investigate why existing unit tests does not leak connection bean for NIO code path,"In ZOOKEEPER-2743 we observed a race condition in Netty code path that could lead to connection bean leaking; similar code pattern exists in NIO code path as well, however existing unit tests never fa",hanm,hanm
ZOOKEEPER-2750,ZooKeeper,2017-04-07T19:49:09.000+0000,Major,Document SSL Support for Atomic Broadcast protocol,,abrahamfine,abrahamfine
ZOOKEEPER-2749,ZooKeeper,2017-04-07T03:49:08.000+0000,Major,Cleanup findbug warnings in branch-3.4: Experimental Warnings,,abrahamfine,abrahamfine
ZOOKEEPER-2748,ZooKeeper,2017-04-06T22:03:43.000+0000,Minor,Admin command to voluntarily drop client connections,"In certain circumstances, it would be useful to be able to move clients from one server to another.One example: a quorum that consists of 3 servers (A,B,C) with 1000 active client session, where 900 c",mprime,mprime
ZOOKEEPER-2747,ZooKeeper,2017-04-06T22:01:58.000+0000,Major,Fix ZooKeeperAdmin Compilation Warning,Currently when compiling ZooKeeper we se a compilation warning:{code}    [javac] /zookeeper/src/java/main/org/apache/zookeeper/admin/ZooKeeperAdmin.java:43: warning: [try] auto-closeable resource ZooK,abrahamfine,abrahamfine
ZOOKEEPER-2746,ZooKeeper,2017-04-04T23:39:24.000+0000,Major,"Leader hand-off during dynamic reconfig is best effort, while test always expects it","When non-trivial config change happens on the leader (e.g. port change, role change) to minimize disruption of quorum we do leader hand off by having the current leader nominate the next leader instea",hanm,hanm
ZOOKEEPER-2745,ZooKeeper,2017-04-04T21:55:38.000+0000,Critical,"Node loses data after disk-full event, but successfully joins Quorum","If disk is full on 1 zookeeper node in a 3 node ensemble, it is able to join the quorum with partial data.Setup:--------- Running a 3 node zookeeper ensemble on Ubuntu 12.04 as upstart services. Let's",bothra90,bothra90
ZOOKEEPER-2744,ZooKeeper,2017-04-03T02:56:15.000+0000,Trivial,Typos in the comments of ZooKeeper class,"In the comments of ZooKeeper class definition, ""This special event has type EventNone and state sKeeperStateDisconnected."" should be ""This special event has EventType None and KeeperState Disconnected",ethanli,ethanli
ZOOKEEPER-2743,ZooKeeper,2017-04-01T20:30:47.000+0000,Major,Netty connection leaks JMX connection bean upon connection close in certain race conditions.,"This is a tricky issue found while debugging failure of ""flaky"" watcher test (ZOOKEEPER-2686). When closing a Netty connection, depend on timing the connection bean registered when the connection was ",hanm,hanm
ZOOKEEPER-2742,ZooKeeper,2017-03-30T15:08:49.000+0000,Trivial,Few test cases of org.apache.zookeeper.ZooKeeperTest fails in Windows,Following test cases fail in Windows environment:1. org.apache.zookeeper.ZooKeeperTest.testLsrRootCommand()2. org.apache.zookeeper.ZooKeeperTest.testLsrCommand()It seems that failure is related to use,a72877,a72877
ZOOKEEPER-2741,ZooKeeper,2017-03-28T18:52:15.000+0000,Minor,A Swift Connector of ZooKeeper is available now: Perfect-ZooKeeper,Perfect-ZooKeeper is a Swift class wrapper of zookeeper C connector:Source Code:https://github.com/PerfectlySoft/Perfect-ZooKeeperDocument:http://www.perfect.org/docs/ZooKeeper.htmlPerfect is an open ,rockford,rockford
ZOOKEEPER-2740,ZooKeeper,2017-03-27T17:35:36.000+0000,Critical,Port ZOOKEEPER-2737 to branch-3.4,ZOOKEEPER-2737 fix is pending to branch-3.4 because we are in middle of release. This fix should get in after 3.4.10 gets out.cc [~rakeshr].,hanm,hanm
ZOOKEEPER-2739,ZooKeeper,2017-03-25T01:22:16.000+0000,Major,maxClientCnxns not working in NettyServerCnxnFactory,"The maxClientCnxns field isn't being used in NettyServerCnxnFactory, and therefore the connection limit isn't observed.See attached test",vincentpoon,vincentpoon
ZOOKEEPER-2738,ZooKeeper,2017-03-25T01:12:18.000+0000,Major,maxClientCnxns not limiting concurrent connections properly,"The test MaxCnxnsTest is incorrect as it only creates up the maxCnxns number of threads, whereas it should create more.  See attached patchWhen the test is fixed, it fails on master and 3.5, where ZOO",vincentpoon,vincentpoon
ZOOKEEPER-2737,ZooKeeper,2017-03-24T17:16:17.000+0000,Critical,NettyServerCnxFactory leaks connection if exception happens while writing to a channel.,Found this while debugging occasionally failed unit tests. Currently we do this if exception occurs during writing to a channel with Netty:{code}@Override        public void exceptionCaught(ChannelHan,hanm,hanm
ZOOKEEPER-2736,ZooKeeper,2017-03-23T18:30:50.000+0000,Major,Add a connection rate limiter,"Currently the maxClientCnxns property only limits the aggregate number of connections from a client, but not the rate at which connections can be created.This patch adds a configurable connection rate",vincentpoon,vincentpoon
ZOOKEEPER-2735,ZooKeeper,2017-03-23T01:27:20.000+0000,Trivial,Typo fixes in some scripts,There are same typos in shell files follows:* https://github.com/apache/zookeeper/blob/master/bin/zkCleanup.sh#L28* https://github.com/apache/zookeeper/blob/master/bin/zkCli.sh#L28* https://github.com,jwj0831,jwj0831
ZOOKEEPER-2734,ZooKeeper,2017-03-21T17:52:08.000+0000,Blocker,3.5.3 should be a beta release instead of alpha release.,Currently 3.5.3 is tagged as alpha both in build and JIRA. We should reach a consensus on the tag before release. See the email thread on dev list for more details.Deliverable:* A consensus on using b,hanm,hanm
ZOOKEEPER-2733,ZooKeeper,2017-03-20T05:29:02.000+0000,Major,Cleanup findbug warnings in branch-3.4: Dodgy code Warnings,"Please refer the attached sheet in parent jira. Below is the details of findbug warnings.{code}DB	org.apache.zookeeper.server.quorum.auth.SaslQuorumAuthLearner.send(DataOutputStream, byte[]) uses the ",rakeshr,rakeshr
ZOOKEEPER-2732,ZooKeeper,2017-03-20T05:25:59.000+0000,Major,Cleanup findbug warnings in branch-3.4: Performance Warnings,"Please refer the attached sheet in parent jira. Below is the details of findbug warnings.{code}Bx	Boxing/unboxing to parse a primitive new org.apache.zookeeper.server.quorum.QuorumCnxManager(long, Map",rakeshr,rakeshr
ZOOKEEPER-2731,ZooKeeper,2017-03-20T05:22:20.000+0000,Major,Cleanup findbug warnings in branch-3.4: Malicious code vulnerability Warnings,"Please refer the attached sheet in parent jira. Below is the details of findbug warnings.{code}MS	org.apache.zookeeper.Environment.JAAS_CONF_KEY isn't final but should beBug type MS_SHOULD_BE_FINAL (c",rakeshr,rakeshr
ZOOKEEPER-2730,ZooKeeper,2017-03-20T05:19:16.000+0000,Major,Cleanup findbug warnings in branch-3.4: Internationalization Warnings,"Please refer the attached sheet in parent jira. Below is the details of findbug warnings.{code}Dm	Found reliance on default encoding in org.apache.jute.compiler.CGenerator.genCode(): new java.io.FileW",rakeshr,rakeshr
ZOOKEEPER-2729,ZooKeeper,2017-03-20T05:16:09.000+0000,Major,Cleanup findbug warnings in branch-3.4: Correctness Warnings,"{code}(1) INT Bad comparison of nonnegative value with 0 in org.apache.zookeeper.server.quorum.auth.SaslQuorumAuthLearner.send(DataOutputStream, byte[])Bug type INT_BAD_COMPARISON_WITH_NONNEGATIVE_VAL",rakeshr,rakeshr
ZOOKEEPER-2728,ZooKeeper,2017-03-20T05:13:06.000+0000,Major,Clean up findbug warnings in branch-3.4,This jira to cleanup findbug warnings reported in branch-3.4[Branch3.4 FindbugsWarnings.html|https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/444/artifact/build/test/findbugs/newPatch,rakeshr,rakeshr
ZOOKEEPER-2727,ZooKeeper,2017-03-17T15:48:40.000+0000,Major,WARN and stacktrace for normally closed socket,Steps to reproduce:* setup zookeeper* setup TCP load balancer. This balancer should check zookeeper clientPort liveness(healthcheck) by opening and closing TCP connection to clientPort. See https://ku,dernasherbrezon,dernasherbrezon
ZOOKEEPER-2726,ZooKeeper,2017-03-16T19:15:05.000+0000,Major,Patch for ZOOKEEPER-2693 introduces potential race condition,"We noticed when porting the patch, that isEnabled is not thread-safe. Synchronizing it and resetWhitelist should solve the issue.",knusbaum,knusbaum
ZOOKEEPER-2725,ZooKeeper,2017-03-15T22:34:55.000+0000,Major,Upgrading to a global session fails with a multiop,"On an ensemble with local sessions enabled, when a client with a local session requests the creation of an ephemeral node within a multi-op, the client gets a session expired message.  The same multi-",nixon,nixon
ZOOKEEPER-2724,ZooKeeper,2017-03-15T21:21:23.000+0000,Blocker,Skip cert files for releaseaudit target.,In branch-3.5 release auditing generating warnings against cert files as these files don't contain Apache License (AL) header. I don't think these files should be checked because they are not source f,hanm,hanm
ZOOKEEPER-2723,ZooKeeper,2017-03-15T11:11:43.000+0000,Major,ConnectStringParser does not parse correctly if quorum string has znode path,"f2017-03-14 07:10:26,247 INFO [main] zookeeper.ZooKeeper - Initiating client connection, connectString=x1-1-was.ops.sfdc.net:2181,x2-1-was.ops.sfdc.net:2181,x3-1-was.ops.sfdc.net:2181,x4-1-was.ops.sfd",vishk,vishk
ZOOKEEPER-2722,ZooKeeper,2017-03-14T23:16:11.000+0000,Major,Flaky Test: org.apache.zookeeper.test.ReadOnlyModeTest.testSessionEstablishment,"{noformat}Error MessageKeeperErrorCode = ConnectionLoss for /testStacktraceorg.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /test	at org.apache.zookee",hanm,hanm
ZOOKEEPER-2721,ZooKeeper,2017-03-14T09:31:26.000+0000,Major,org.apache.zookeeper.server.quorum.ReconfigRecoveryTest fails intermittently,The test-suite org.apache.zookeeper.server.quorum.ReconfigRecoveryTest fails intermittently on ppc64le and x86 architechture. I have attached standard output log. The error message is as follows:{code,skanekar,skanekar
ZOOKEEPER-2720,ZooKeeper,2017-03-14T06:05:26.000+0000,Major,org.apache.zookeeper.test.WatchEventWhenAutoResetTest fails intermittently,The test-suite org.apache.zookeeper.test.WatchEventWhenAutoResetTest fails intermittently. It is failing on ppc64le and x86 architechture. I have attached standard output log. The error message is as ,skanekar,skanekar
ZOOKEEPER-2719,ZooKeeper,2017-03-12T17:38:58.000+0000,Major,Port ZOOKEEPER-2169 (TTL Nodes) to 3.5 branch,ZOOKEEPER-2169 is a useful feature that should be deployed sooner than later. Take the work done in the master branch and port it to the 3.5 branch,randgalt,randgalt
ZOOKEEPER-2718,ZooKeeper,2017-03-10T08:45:45.000+0000,Major,org.apache.zookeeper.server.quorum.StandaloneDisabledTest fails intermittently,The test-suite org.apache.zookeeper.server.quorum.StandaloneDisabledTest fails intermittently with a timeout error. It fails on x86 and ppc64le architechture. The standard output is as follows:{code:b,skanekar,skanekar
ZOOKEEPER-2717,ZooKeeper,2017-03-10T07:17:49.000+0000,Major,org.apache.zookeeper.server.quorum.RaceConditionTest fails intermittently,The test-suite org.apache.zookeeper.server.quorum.RaceConditionTest fails intermittently on ppc64le and x86 architechture with following error message:{code:borderStyle=solid}org.apache.zookeeper.serv,skanekar,skanekar
ZOOKEEPER-2716,ZooKeeper,2017-03-09T21:46:07.000+0000,Major,Flaky Test: org.apache.zookeeper.server.SessionTrackerTest.testAddSessionAfterSessionExpiry,This test fail once in a while because the test logic has time assumptions that should be fixed. PR in a minute. Sample log when it fails:{noformat}Error MessageDuplicate session expiry request has be,hanm,hanm
ZOOKEEPER-2715,ZooKeeper,2017-03-09T07:12:55.000+0000,Major,Sessions Expire due to Network partitioning in Zookeeper ,"Recently, carried out a test to to find the behavior of clients when a  zookeeper server is isolated from the zookeeper leader.Here used a ensemble of 3 zookeeper servers called A, B and C. And quorum",tharinduku,tharinduku
ZOOKEEPER-2714,ZooKeeper,2017-03-08T23:17:54.000+0000,Blocker,Zookeeper (standalone) failed to start up,"We've a standalone ZK setup. Upon restart, it failed to serve requests. Here are the logs:------------------2017-03-05 17:33:58,888 [myid:] - INFO  [main:QuorumPeerConfig@103] - Reading configuration ",danielchan,danielchan
ZOOKEEPER-2713,ZooKeeper,2017-03-08T16:21:07.000+0000,Blocker,"Create CVE text for ZOOKEEPER-2693 ""DOS attack on wchp/wchc four letter words (4lw)""",We need to agree to the CVE text for ZOOKEEPER-2693. Let's use the comments here to do so.The assigned CVE number is CVE-2017-5637,phunt,phunt
ZOOKEEPER-2712,ZooKeeper,2017-03-08T15:04:48.000+0000,Critical,MiniKdc test case intermittently failing due to principal not found in Kerberos database,"MiniKdc test cases are intermittently failing due to not finding the principal. Below is the failure stacktrace.{code}2017-03-08 13:21:10,843 [myid:] - ERROR [NioProcessor-1:AuthenticationService@187]",rakeshr,rakeshr
ZOOKEEPER-2711,ZooKeeper,2017-03-07T18:19:04.000+0000,Critical,Deadlock between concurrent 4LW commands that iterate over connections with Netty server,"Observed the following issue in some $dayjob testing environments. Line numbers are a little off compared to master/branch-3.5, but I did confirm the same issue exists there.With the NettyServerCnxnFa",elserj,elserj
ZOOKEEPER-2710,ZooKeeper,2017-03-07T17:06:26.000+0000,Major,Regenerate documentation for branch-3.4 release,This jira can be used to regenerate the documentation as some of the recent commits didn't regenerated the doc section.,rakeshr,rakeshr
ZOOKEEPER-2709,ZooKeeper,2017-03-03T21:28:28.000+0000,Minor,"Clarify documentation around ""auth"" ACL scheme","We recently found up in HBASE-17717 that we were incorrectly setting an ACL on our ""sensitive"" znodes after the output of {{getACL}} on these nodes didn't match what was expected.In referencing the do",elserj,elserj
ZOOKEEPER-2708,ZooKeeper,2017-03-03T19:59:30.000+0000,Minor,TracelogFile not being created.,"We are configuring Zookeeper with log4j to create a tracelog file separated from the zookeeper.log.We have test using the following java properties:call %JAVA% ""-DrequestTraceFile"" ""-Dzookeeper.log.di",aesquivel,aesquivel
ZOOKEEPER-2707,ZooKeeper,2017-02-23T21:26:55.000+0000,Major,"Fix ""Unexpected bean exists!"" issue in WatcherTests",All the WatcherTests occasionally fail with: {code}Error Message:Unexpected bean exists! expected:<0> but was:<1>Stack Trace:junit.framework.AssertionFailedError: Unexpected bean exists! expected:<0> ,abrahamfine,abrahamfine
ZOOKEEPER-2706,ZooKeeper,2017-02-23T19:54:26.000+0000,Major,checkstyle broken on branch-3.4,"While working on ZOOKEEPER-2696, [~rakeshr] and I noticed that checkstyle is failing to execute on branch-3.4 with the following error:{code}BUILD FAILED/Users/abefine/cloudera_code/zookeeper/build.xm",abrahamfine,abrahamfine
ZOOKEEPER-2705,ZooKeeper,2017-02-23T12:24:39.000+0000,Major,Container node remains indefinitely after session has long expired!,"Zookeeper version: 3.5.1-alphaCurator Framework version: 3.2.0We have a 5 node cluster. When we register a service instance everything is created within zookeeper successfully, e.g. for a service name",stondofitz,stondofitz
ZOOKEEPER-2704,ZooKeeper,2017-02-23T01:16:33.000+0000,Major,Run Jepsen against branch-3.5 / master of ZooKeeper,The [Jepsen report|https://aphyr.com/posts/291-jepsen-zookeeper] on ZooKeeper was using an old version of ZooKeeper (3.4.5). It would be good to run Jepsen on trunk / branch-3.5 and see what happens. ,hanm,hanm
ZOOKEEPER-2703,ZooKeeper,2017-02-22T19:47:25.000+0000,Major,[MASTER ISSUE] Create benchmark/stability tests,"It would be useful to have objective tests/benchmarks. These tests/benchmarks can be used to validate future changes to ZooKeeper, compare against other similar products (etcd/consul, etc.) or to help",randgalt,randgalt
ZOOKEEPER-2702,ZooKeeper,2017-02-22T12:42:00.000+0000,Major,zookeeper ensemble took 20 minutes to come back up after leader failed,"Zookeeper version : 3.4.9OS version is ubuntu 14.04(trusty)Default configuration of zoo.cfg tickTime=2000initLimit=10syncLimit=5I have setup the zookeeper ensemble with three servers zk1.com, zk2.com,",gopalakrishna,gopalakrishna
ZOOKEEPER-2701,ZooKeeper,2017-02-20T06:22:56.000+0000,Minor,Timeout for RecvWorker is too long,"Environment:I deploy ZooKeeper in a cluster of three nodes. Each node has three network interfaces(eth0, eth1, eth2).Hostname is used instead of IP address in zoo.cfg, and quorumListenOnAllIPs=truePro",jiangjiafu,jiangjiafu
ZOOKEEPER-2700,ZooKeeper,2017-02-17T13:55:16.000+0000,Minor,Force ZooKeeper to generate snapshot,"When cold backup or remote offline sync Zookeeper instances, we need the latest snapshot.Add a four letter `snap` command to force Zookeeper to generate snapshot.",flier.lu,flier.lu
ZOOKEEPER-2699,ZooKeeper,2017-02-17T07:54:17.000+0000,Major,Restrict 4lw commands based on client IP,Currently 4lw commands are executed without authentication and can be accessed from any IP which has access to ZooKeeper server. ZOOKEEPER-2693 attempts to limit the 4lw commands which are enabled by ,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2698,ZooKeeper,2017-02-16T20:28:43.000+0000,Major,SSL support for server to server communication,,abrahamfine,abrahamfine
ZOOKEEPER-2697,ZooKeeper,2017-02-16T13:18:04.000+0000,Critical,Handle graceful stop of ZookKeeper client,"As seen in ZOOKEEPER-1394 I would like to have the ""close""  which waits for all background activities to  finish.In tests the method ""testableWaitForShutdown"" is used.We can add a new ZooKeeper.close(",eolivelli,eolivelli
ZOOKEEPER-2696,ZooKeeper,2017-02-15T00:01:26.000+0000,Major,Eclipse ant task no longer determines correct classpath for tests after ZOOKEEPER-2689,Following the changes made in ZOOKEEPER-2689 IDE's using the .classpath file generated by the eclipse ant task (I tested both idea and eclipse) cannot compile the tests.,abrahamfine,abrahamfine
ZOOKEEPER-2695,ZooKeeper,2017-02-14T13:38:49.000+0000,Major,Handle unknown error for rolling upgrade old client new server scenario,"In Zookeeper rolling upgrade scenario where server is new but client is old, when sever sends error code which is not understood by the client, client throws NullPointerException. KeeperException.Syst",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2694,ZooKeeper,2017-02-14T13:12:20.000+0000,Major,sync CLI command does not wait for result from server,sync CLI command does not wait for result from server. It returns immediately after invoking the sync's asynchronous API.Executing bellow command does not give the expected result {{<zkServer>/bin/zkC,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2693,ZooKeeper,2017-02-14T03:33:13.000+0000,Blocker,DOS attack on wchp/wchc four letter words (4lw),The wchp/wchc four letter words can be exploited in a DOS attack on the ZK client port - typically 2181. The following POC attack was recently published on the web:https://vulners.com/exploitdb/EDB-ID,phunt,phunt
ZOOKEEPER-2692,ZooKeeper,2017-02-10T17:53:55.000+0000,Major,Fix race condition in testWatchAutoResetWithPending,,abrahamfine,abrahamfine
ZOOKEEPER-2691,ZooKeeper,2017-02-10T11:08:41.000+0000,Minor,recreateSocketAddresses may recreate the unreachable IP address,The QuorumPeer$QuorumServer.recreateSocketAddress()  is used to resolved the hostname to a new IP address(InetAddress) when any exception happens to the socket. It will be very useful when a hostname ,jiangjiafu,jiangjiafu
ZOOKEEPER-2690,ZooKeeper,2017-02-09T19:34:02.000+0000,Minor,Update documentation source for ZOOKEEPER-2574,"In ZOOKEEPER-2574, the documentation change (https://github.com/apache/zookeeper/pull/111/) was done directly on the generated document files instead of on the document source. This JIRA is created to",hanm,hanm
ZOOKEEPER-2689,ZooKeeper,2017-02-09T15:47:33.000+0000,Critical,Fix Kerberos Authentication related test cases,Following test classes failed when branch-3.4 is run on java 6.{noformat}org.apache.zookeeper.server.quorum.auth.MiniKdcTestorg.apache.zookeeper.server.quorum.auth.QuorumKerberosAuthTestorg.apache.zoo,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2688,ZooKeeper,2017-02-08T14:23:59.000+0000,Major,"rmr leads to ""Node does not exist""","Issuing rmr /vault leads to Node does not exist: /vault/core/_lock/_c_e393e8a4d2c984178373be528a25404a-lock-0000000028I know that rmr is getting deprecated in next version, but I think this might be c",ror6ax,ror6ax
ZOOKEEPER-2687,ZooKeeper,2017-02-08T07:19:58.000+0000,Major,Deadlock while shutting down the Leader server.,Leader server enters into deadlock while shutting down. This happens some time only.The reason and deadlock flow is same as ZOOKEEPER-2380.shutdown was removed from synchronized block in ZOOKEEPER-238,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2686,ZooKeeper,2017-02-07T22:01:31.000+0000,Major,Flaky Test: org.apache.zookeeper.test.WatcherTest.,"Once in a while, these tests failed. {noformat}org.apache.zookeeper.test.WatcherTest.testWatchAutoResetWithPendingorg.apache.zookeeper.test.WatcherTest.testWatcherCorrectnessorg.apache.zookeeper.test.",hanm,hanm
ZOOKEEPER-2685,ZooKeeper,2017-02-07T09:08:01.000+0000,Major,How to implement SSL in zookeeper-3.4.5-3,want to implement SSL in zookeeeper. But not able to implement as version issue. So how can we implement in zookeeper-3.4.5-3. ,shamim_er,shamim_er
ZOOKEEPER-2684,ZooKeeper,2017-02-07T05:23:02.000+0000,Blocker,Fix a crashing bug in the mixed workloads commit processor,"We deployed our build with ZOOKEEPER-2024 and it quickly started to crash with the following erroratla-buh-05-sr1.prod.twttr.net: 2017-01-18 22:24:42,305 - ERROR [CommitProcessor:2] -org.apache.zookee",nerdyyatrice,nerdyyatrice
ZOOKEEPER-2683,ZooKeeper,2017-02-06T18:01:41.000+0000,Major,RaceConditionTest is flaky,*Error Message*{noformat}Leader failed to transition to LOOKING or FOLLOWING state{noformat}*Stacktrace*{noformat}junit.framework.AssertionFailedError: Leader failed to transition to LOOKING or FOLLOW,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2682,ZooKeeper,2017-02-05T11:27:48.000+0000,Minor,Make it optional to fail build on test failure,"Currently if there is a test failure, build is marked as failed and exits.I want to rerun the failed test cases instead of exiting.",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2681,ZooKeeper,2017-01-27T22:02:43.000+0000,Major,ConnectionState does not sync startup of ExhibitorEnsembleProvider and Zookeeper connection,Use CuratorFrameworkFactory.Builder and specify ExhibitorEnsembleProvider.Call build() and start().Internal ConnectionState.start() calls ensembleProvider.start() which should poll for hostnames to pr,egrs,egrs
ZOOKEEPER-2680,ZooKeeper,2017-01-27T06:03:14.000+0000,Major,Correct DataNode.getChildren() inconsistent behaviour.,DataNode.getChildren() API returns null and empty set if there are no children in it depending on when the API is called. DataNode.getChildren() API behavior should be changed and it should always ret,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2679,ZooKeeper,2017-01-26T21:57:06.000+0000,Major,Flaky Test: org.apache.zookeeper.server.quorum.auth.QuorumAuthUpgradeTest.testRollingUpgrade,"This flaky test was introduced as part of ZOOKEEPER-1045, which fails regularly both in our internal test bot and upstream apache build bot. {noformat}Error Messagewaiting for server1being upStacktrac",hanm,hanm
ZOOKEEPER-2678,ZooKeeper,2017-01-26T15:16:55.000+0000,Major,Large databases take a long time to regain a quorum,I know this is long but please here me out.I recently inherited a massive zookeeper ensemble.  The snapshot is 3.4 GB on disk.  Because of its massive size we have been running into a number of issues,revans2,revans2
ZOOKEEPER-2677,ZooKeeper,2017-01-26T06:20:10.000+0000,Major,Verify the occurrence of CancelledKeyException in zookeeper branch-3.5 and above,As per the [discussion|https://issues.apache.org/jira/browse/ZOOKEEPER-2044?focusedCommentId=15836893&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15836893] in ZOOKEEP,rakeshr,rakeshr
ZOOKEEPER-2676,ZooKeeper,2017-01-25T12:20:35.000+0000,Minor,Enable remote debugging unit tests on CLI,Sometimes it's useful to be able to run a unit test from the CLI and then attach an IDE to enable debugging as below:{code}$ ant -Dtestcase=FourLetterWordsTest -DremoteDebug=true test-core-java{code}T,eribeiro,eribeiro
ZOOKEEPER-2675,ZooKeeper,2017-01-25T11:06:50.000+0000,Trivial,Bump Mockito to version 2,"Current mockito version is 1.8.2, but version 2 brings new improvements while keeping backwards compatibility to jdk6 (branch-3.4) and support partially jdk8. So, this issue is to bring mockito versio",eribeiro,eribeiro
ZOOKEEPER-2674,ZooKeeper,2017-01-24T14:33:25.000+0000,Trivial,Projet-Final,,salem-faraxen,salem-faraxen
ZOOKEEPER-2673,ZooKeeper,2017-01-24T13:27:32.000+0000,Trivial,projet,,salem-faraxen,salem-faraxen
ZOOKEEPER-2672,ZooKeeper,2017-01-23T18:26:33.000+0000,Major,Remove CHANGE.txt,The CHANGE.txt is already not the source of truth of what's changed after we migrating to git - most of the git commits in recent couple of months don't update CHANGE.txt. The option of updating CHANG,hanm,hanm
ZOOKEEPER-2671,ZooKeeper,2017-01-23T03:59:45.000+0000,Major,Fix compilation error in branch-3.4,branch-3.4 code compilation is failing. Following are the compilation erros:{code}compile-test:    [mkdir] Created dir: D:\gitHome\zookeeperTrunk\build\test\classes    [javac] Compiling 146 source fil,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2670,ZooKeeper,2017-01-19T19:32:46.000+0000,Major,CLONE - Connections fo ZooKeeper server becomes slow over time with native GSSAPI,ZooKeeper server becomes slow over time when native GSSAPI is used. The connection to the server starts taking upto 10 seconds.This is happening with ZooKeeper-3.4.6 and is fairly reproducible.Debug l,fittey,fittey
ZOOKEEPER-2669,ZooKeeper,2017-01-19T11:30:37.000+0000,Major,follower failed to  reconnect to leader after a network error,"We have a zookeeper cluster with 3 nodes named s1, s2, s3By mistake, we shut down the ethernet interface of s2, and zk follower  shut down(zk process remains there)Later, after ethernet up again, s2 f",fjcyue,fjcyue
ZOOKEEPER-2668,ZooKeeper,2017-01-18T22:55:48.000+0000,Major,Remove reference to requireClientAuthScheme from https://cwiki.apache.org/confluence/display/ZOOKEEPER/Client-Server+mutual+authentication,I was trying to see if ZK can be configured to always do client authentication (globally and not per znode). I came across this https://cwiki.apache.org/confluence/display/ZOOKEEPER/Client-Server+mutu,devaraj,devaraj
ZOOKEEPER-2667,ZooKeeper,2017-01-17T11:35:17.000+0000,Major,NPE in the patch for ZOOKEEPER-2139 when multiple connections are made,"ZOOKEEPER-2139 added support for connecting to multiple ZK services, but this also introduced a bug that causes a cryptic NPE. The client sees the below sort of error messages:{noformat}Exception whil",haridsv,haridsv
ZOOKEEPER-2666,ZooKeeper,2017-01-16T05:51:25.000+0000,Major,the watch function called many times when it should be called once,"We have a service A, which has 2 instances A1 and A2. We also have another 2 services, B and C. B has 2 instances B1 and B2. C has 2 instances C1 and C2.A1 and A2 both register child watch for B and C",tekpig,tekpig
ZOOKEEPER-2665,ZooKeeper,2017-01-14T17:34:03.000+0000,Major,Port QA github pull request build to branch 3.4 and 3.5,"We have QA build for pull requests against master but not against branches 3.4 and 3.5. We need to port the necessary wiring to do it, it shouldn't be difficult.",fpj,fpj
ZOOKEEPER-2664,ZooKeeper,2017-01-13T10:04:38.000+0000,Major,"ClientPortBindTest#testBindByAddress may fail due to ""No such device"" exception","Saw the following in a recent run:{code}Stacktracejava.net.SocketException: No such device	at java.net.NetworkInterface.isLoopback0(Native Method)	at java.net.NetworkInterface.isLoopback(NetworkInterf",yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2663,ZooKeeper,2017-01-11T13:41:07.000+0000,Major,"Enable remote jmx, zkCli.sh start failed with jmx communication error","My laptop is Macbook Pro with macOS Sierra (IP: 192.168.2.102). An VM (IP: 192.168.2.107) is running on VirtualBox.Deploy zookeeper-3.4.9 on VM, enable the remote JMX with option:-Dcom.sun.management.",linbo,linbo
ZOOKEEPER-2662,ZooKeeper,2017-01-11T02:08:26.000+0000,Major,Export a metric for txn log sync times,In FileTxnLog there is code that records the amount of time required to fsync the txn log in order to warn if that time exceeds a configurable threshold. This information should also be exported as a ,apurtell,apurtell
ZOOKEEPER-2661,ZooKeeper,2017-01-10T11:20:55.000+0000,Major,It costs about 5055 ms to create Zookeeper object for the first time.,I create and close ZooKeeper for 10 times.  It costs about 5055 ms for the first time.See attached files for some test code and output.,Yaohui,Yaohui
ZOOKEEPER-2660,ZooKeeper,2017-01-07T13:14:34.000+0000,Major,"acceptedEpoch and currentEpoch data inconsistency, ZK process can not start!","1. currentEpoch is bigger than acceptedEpoch, ZK will throw IOException when start loadDataBase.2. function bug. In function setAcceptedEpoch and setCurrentEpoch, it is modify memory variable first, t",Yongcheng,Yongcheng
ZOOKEEPER-2659,ZooKeeper,2017-01-06T19:37:01.000+0000,Minor,Use log4j2 as a logging framework as log4j 1.X is now deprecated,Zookeeper currently uses {{log4j 1.X}} as the default logging framework. {{log4j 1.X}} is now deprecated http://logging.apache.org/log4j/1.2/This ticket is to track efforts to move zookeeper to {{log4,praste,praste
ZOOKEEPER-2658,ZooKeeper,2017-01-03T17:35:35.000+0000,Critical,Trunk / branch-3.5 build broken.,https://builds.apache.org/job/ZooKeeper-trunk-openjdk7/https://builds.apache.org/job/ZooKeeper_branch35_openjdk7/The trunk build is broken for over two weeks. It is likely caused by Infrastructure iss,hanm,hanm
ZOOKEEPER-2657,ZooKeeper,2016-12-29T10:07:30.000+0000,Major,Using zookeeper without SASL causes error logging,We are using Kafka which uses zookeeper. But we are not using SASL. So we keep on getting {noformat}CRITICAL: Found 32 lines (limit=1/1): (1) 2016-12-16 07:02:14.780 [INFO ] [r] org.apache.zookeeper.C,anshbansal,anshbansal
ZOOKEEPER-2656,ZooKeeper,2016-12-23T04:21:21.000+0000,Major,Fix ServerConfigTest#testValidArguments test case failures,This jira to fix ServerConfigTest#testValidArguments test case failure. Reference: https://builds.apache.org/job/ZooKeeper-trunk/3207/testReport/org.apache.zookeeper/ServerConfigTest/testValidArgument,rakeshr,rakeshr
ZOOKEEPER-2655,ZooKeeper,2016-12-22T18:34:32.000+0000,Minor,Improve NIOServerCnxn#isZKServerRunning to reflect the semantics correctly,"This jira to improve the semantics of the following internal functions to make it more readable:# {{NIOServerCnxn#isZKServerRunning()}} => return true if the server is running, false otherwise.# {{Abs",rakeshr,rakeshr
ZOOKEEPER-2654,ZooKeeper,2016-12-22T17:40:31.000+0000,Major,Support Fedora 25: use pkg-config instead of obsolete M4 macros,While compiling Bigtop on Fedora 25 we found that there is an issue with the autoconf detection of cppunit: See BIGTOP-2642 for error.Some background regarding the issue can be found here: https://bug,oflebbe,oflebbe
ZOOKEEPER-2653,ZooKeeper,2016-12-22T17:03:20.000+0000,Major,epoch files do not match snapshots and logs,"Hi all.After shutting zk down and upgrading to centos 7, ZK would not start with exceptionRemoving file: Dec 19, 2016 10:55:08 PM /hedvig/hpod/log/version-2/log.300ee0308Removing file: Dec 19, 2016 7:",lasaro,lasaro
ZOOKEEPER-2652,ZooKeeper,2016-12-22T06:15:38.000+0000,Major,Fix HierarchicalQuorumTest.java,"The commit of ZOOKEEPER-2479 has introduced a compilation error(due to diamond operator usage) in {{branch-3.4}}, which uses {{JDK 1.6}}",rakeshr,rakeshr
ZOOKEEPER-2651,ZooKeeper,2016-12-22T01:47:27.000+0000,Major,Missing src/pom.template in release,"Trying to build downstream in Fedora, and discovered that the 3.4.9 release tarball is missing the {{src/pom.template}} file. It is present in the {{release-3.4.9}} tag, so I grabbed it from there to ",ctubbsii,ctubbsii
ZOOKEEPER-2650,ZooKeeper,2016-12-21T15:11:30.000+0000,Major,Test Improvement by adding more QuorumPeer Auth related test cases,This jira to add more test cases to the ZOOKEEPER-1045 feature.Cases:-1) Ensemble with auth enabled Observer.2) Connecting non-auth Observer to auth enabled quorum.3) Quorum re-election with auth enab,rakeshr,rakeshr
ZOOKEEPER-2649,ZooKeeper,2016-12-19T15:30:32.000+0000,Trivial,The ZooKeeper do not write in log session ID in which the client has been authenticated.,"The ZooKeeper do not write in log session ID in which the client has been authenticated. This occurs for digest and for SASL authentications:bq. 2016-12-09 15:46:34,808 [myid:] - INFO  [SyncThread:0:Z",alzhou,alzhou
ZOOKEEPER-2648,ZooKeeper,2016-12-18T18:05:05.000+0000,Major,Container node never gets deleted if it never had children,"If a client creates a Container node, but does not also create a child within that Container, the Container will never be deleted. This may seem like a bug in the client for not subsequently creating ",Hadriel,Hadriel
ZOOKEEPER-2647,ZooKeeper,2016-12-16T11:33:43.000+0000,Blocker,Fix TestReconfigServer.cc,The commit of ZOOKEEPER-761 has introduced a compilation error in one of the test cases. It is a pretty straightforward fix.,fpj,fpj
ZOOKEEPER-2646,ZooKeeper,2016-12-15T22:22:48.000+0000,Major,Java target in branch 3.4 doesn't match documentation ,Need to update build.xml 1.5->1.6.,fpj,fpj
ZOOKEEPER-2645,ZooKeeper,2016-12-15T07:36:40.000+0000,Major,If embedded QuorumPeerMain is started with Properties no backupOldConfig should be done,When starting an embedded _QuorumPeerMain_ by executing the _runFromConfig()_ and providing _QuorumPeerConfig_ properties:{code}standaloneEnabled=falseinitLimit=5syncLimit=2clientPort=4101server.1=nlb,tpijl,tpijl
ZOOKEEPER-2644,ZooKeeper,2016-12-12T14:21:41.000+0000,Minor,contrib/rest does not include rest.sh when packaged,contrib/rest does not include rest.sh when packaged. I propose to add rest.sh into tar.gz that it make ZooKeeper REST easier to use.,minoru,minoru
ZOOKEEPER-2643,ZooKeeper,2016-12-09T18:47:42.000+0000,Major,Configurable SSLContext,"Being able to configure the SSLContext in X509Util.java, ZKConfig.java and NettyServerCnxnFactory.java would add flexibility to use cipher suites other than TLSv1.",ggoddard,ggoddard
ZOOKEEPER-2642,ZooKeeper,2016-12-07T11:23:24.000+0000,Blocker,ZooKeeper reconfig API backward compatibility fix,"ZOOKEEPER-2014 moved the reconfig() methods into a new class, ZooKeeperAdmin. It appears this was done to document that these are methods have access restrictions. However, this change breaks Apache C",randgalt,randgalt
ZOOKEEPER-2641,ZooKeeper,2016-12-05T04:57:55.000+0000,Minor,AvgRequestLatency improvements,I posted a thread on the mailing list about finding AvgRequestLatency metric to be 0 all the time. I believe this is a valuable metric because it is useful to baseline performance of ZK and know when ,allenmchan,allenmchan
ZOOKEEPER-2640,ZooKeeper,2016-12-05T00:25:15.000+0000,Major,fix test coverage for single threaded C-API,the tests for the C-API are mostly for the multithreaded API. we need to get better coverage for the single threaded API.,breed,breed
ZOOKEEPER-2639,ZooKeeper,2016-11-30T06:04:21.000+0000,Critical,Port Quorum Peer mutual authentication feature to branch-3.5 and trunk,ZooKeeper server-server mutual authentication is implemented in {{branch-3.4}} using ZOOKEEPER-1045 jira. The feature code is not directly portable to other branches due to code difference. This jira ,rakeshr,rakeshr
ZOOKEEPER-2638,ZooKeeper,2016-11-29T23:34:46.000+0000,Major,ZooKeeper should log which serverCnxnFactory is used during startup,,abrahamfine,abrahamfine
ZOOKEEPER-2637,ZooKeeper,2016-11-28T13:26:11.000+0000,Major,NettyNettySuiteHammerTest  and NettyNettySuiteTest failures,"I am getting test failures related to Netty:[junit] Running org.apache.zookeeper.test.NettyNettySuiteHammerTest[junit] Running org.apache.zookeeper.test.NettyNettySuiteHammerTest[junit] Tests run: 1, ",amita-persistent,amita-persistent
ZOOKEEPER-2636,ZooKeeper,2016-11-24T21:28:56.000+0000,Blocker,Fix C build break.,"C client build is broken after ZOOKEEPER-2628 is merged in. After a little debug, I find out that the build is broken because the zookeeper.jute.h and zookeeper.jute.c are not completely generated. * ",hanm,hanm
ZOOKEEPER-2635,ZooKeeper,2016-11-24T16:38:59.000+0000,Blocker,Regenerate documentation,"Some recent commits did not regenerate the documentation even though they had documentation changes, we need to do it before releasing.",fpj,fpj
ZOOKEEPER-2634,ZooKeeper,2016-11-20T13:01:01.000+0000,Major,null data in zknode data,"We can create zk node with null data as given bellow.ZkConnect connector = new ZkConnect();ZooKeeper zk = connector.connect(""host:port"");String newNode = ""/nayeemDate3"";String strdata = String.valueOf",nayeemsmd,nayeemsmd
ZOOKEEPER-2633,ZooKeeper,2016-11-17T11:11:50.000+0000,Minor,Build failure in contrib/zkfuse with gcc 6.x,"The build in contrib/zkfuse fails with{noformat}make(CDPATH=""${ZSH_VERSION+.}:"" && cd . && /bin/sh /home/raghu/zookeeper/src/contrib/zkfuse/missing autoheader)rm -f stamp-h1touch config.h.incd . && /b",rprabhu,rprabhu
ZOOKEEPER-2632,ZooKeeper,2016-11-14T21:28:49.000+0000,Trivial,Add option to inform JIRA_PASSWORD at CLI prompt ,"Adds the option to prompt for the JIRA password if JIRA_USERNAME is set, but JIRA_PASSWORD is not. Also, asks if the user wants to continue the merge process if the python jira lib is not installed.",eribeiro,eribeiro
ZOOKEEPER-2631,ZooKeeper,2016-11-11T14:11:50.000+0000,Major,Make issue extraction in the git pull request script more robust,"The QA build is failing for some pull requests because the issue title isn't following the expected format. The issue extraction right now is a bit fragile, so this is to fix the issue.",fpj,fpj
ZOOKEEPER-2630,ZooKeeper,2016-11-10T17:19:52.000+0000,Trivial,Use interface type instead of implementation type when appropriate.,"There are a couple of places in code base where we declare a field / variable as implementation type (i.e. HashMap, HashSet) instead of interface type (i.e. Map, Set), while in other places we do the ",hanm,hanm
ZOOKEEPER-2629,ZooKeeper,2016-11-06T19:16:31.000+0000,Minor,Clean up git pull request QA script,"We have introduced a script for QA of pull requests on github in ZOOKEEPER-2624. There is some cleanup left to do on the script, e.g., indentation, consistency of brackets, etc. This jira to do this c",fpj,fpj
ZOOKEEPER-2628,ZooKeeper,2016-11-05T00:49:49.000+0000,Major,Investigate and fix findbug warnings,"Findbug tool used by Jenkins bot is upgraded to 3.0.1 from 2.0.3 according to Infra team, and this leads to 20 new warnings produced by findbug. The warning reports can be found on [pre commit builds|",hanm,hanm
ZOOKEEPER-2627,ZooKeeper,2016-11-03T20:52:30.000+0000,Major,Remove ZRWSERVERFOUND from C client and replace handle_error with something more semantically explicit for r/w server reconnect.,"While working on ZOOKEEPER-2014, I noticed a discrepancy between Java and C client regarding the error codes definition. There is a {noformat}ZRWSERVERFOUND = -122{noformat} definition in C client whi",hanm,hanm
ZOOKEEPER-2626,ZooKeeper,2016-11-02T13:04:04.000+0000,Major,log4j.properties don't get respected,"I put the log4j.properties into the conf folder, plus a symlink to the base zookeeper folder, as described in the documentation.Neither of them seem to be picked up, as my rolling logger is not recogn",ABchmn,ABchmn
ZOOKEEPER-2625,ZooKeeper,2016-11-02T12:59:02.000+0000,Minor,zkServer.sh creates PID file in the folder data?/ instead of data/,"I provision a vagrant vm that installs zookeeper into /home/vagrant/zk and adjusts all owner and read/write rights.With the vagrant user, I start zookeeper as bin/zkServer.sh start /vagrant/data/zoo.c",ABchmn,ABchmn
ZOOKEEPER-2624,ZooKeeper,2016-10-31T12:12:33.000+0000,Major,Add test script for pull requests,We need a script similar to {{test-patch.sh}} to handle QA builds for pull requests.,fpj,fpj
ZOOKEEPER-2623,ZooKeeper,2016-10-28T02:29:48.000+0000,Minor,CheckVersion outside of Multi causes NullPointerException,"I wasn't sure if check version (opcode 13) was permitted outside of a multi op, so I tried it. My server crashed with a NullPointerException and became unusable until restarted. I guess it's not allow",ongardie,ongardie
ZOOKEEPER-2622,ZooKeeper,2016-10-26T14:17:49.000+0000,Trivial,ZooTrace.logQuorumPacket does nothing,"The method simply returns and there is some code commented out:{code}        // if (isTraceEnabled(log, mask)) {        // logTraceMessage(LOG, mask, direction + "" ""        // + FollowerHandler.packet",fpj,fpj
ZOOKEEPER-2621,ZooKeeper,2016-10-26T09:45:17.000+0000,Major,ZooKeeper doesn't start on MINGW32 (Windows),"The ZooKeeper scripts fail due to missing cygpath path conversion in a MINGW32 environment, such as when running from git bash (installed by default when installing Git for Windows).The fix is to add ",amichai,amichai
ZOOKEEPER-2620,ZooKeeper,2016-10-24T21:03:02.000+0000,Major,Add comments to testReadOnlySnapshotDir and testReadOnlyTxnLogDir indicating that the tests will fail when run as root,"testReadOnlySnapshotDir and testReadOnlyTxnLogDir test the impact of changes to file system permissions on ZooKeeper server startup. After debugging test failures [~hanm] was experiencing, we noticed ",abrahamfine,abrahamfine
ZOOKEEPER-2619,ZooKeeper,2016-10-22T00:01:28.000+0000,Major,Client library reconnecting breaks FIFO client order,"According to the USENIX ATC 2010 [paper|https://www.usenix.org/conference/usenix-atc-10/zookeeper-wait-free-coordination-internet-scale-systems], ZooKeeper provides ""FIFO client order: all requests fr",ongardie,ongardie
ZOOKEEPER-2618,ZooKeeper,2016-10-21T15:11:03.000+0000,Minor,fix ClassNotFoundException on shutdown of client,"see ZOOKEEPER-1394,We also have this issue.2016-10-21 13:17:21.618 ERROR localhost-startStop-1-SendThread(172.21.134.7:2005) ClientCnxn:414 - from localhost-startStop-1-SendThread(172.21.134.7:2005)ja",wuwen,wuwen
ZOOKEEPER-2617,ZooKeeper,2016-10-18T05:14:09.000+0000,Trivial,correct a few spelling typos,"While working on the Debian packaging of ZooKeeper, some misspellings were detected in the source that affect the documentation, logging, and program output.There is a PR against github containing the",tmancill,tmancill
ZOOKEEPER-2616,ZooKeeper,2016-10-17T22:08:49.000+0000,Critical,ZK client fails to connect to ReadOnly server,"Only 1 of the 3 nodes of the ensemble is started. The server successfully started in readonly (""Read-only server started"").{code:title=client}System.setProperty(""readonlymode.enabled"", ""true"");String ",benjamin.jaton,benjamin.jaton
ZOOKEEPER-2615,ZooKeeper,2016-10-14T04:59:03.000+0000,Major,Zookeeper server holds onto dead/expired session ids in the watch data structures,"The same issue (https://issues.apache.org/jira/browse/ZOOKEEPER-1382) still can be found even with zookeeper 3.4.6.this issue cause our production zookeeper cluster leak about 1 million watchs, after ",guoping.gp,guoping.gp
ZOOKEEPER-2614,ZooKeeper,2016-10-12T07:02:31.000+0000,Major,Port ZOOKEEPER-1576 to branch3.4,ZOOKEEPER-1576 handles UnknownHostException and it good to have this change for 3.4 branch as well. Porting the changes to 3.4 after resolving the conflicts,vishk,vishk
ZOOKEEPER-2613,ZooKeeper,2016-10-11T17:31:22.000+0000,Major,user-level KeeperException,"We are facing very big problem in production in Zookeeper. Its been working perfectly from many months, but suddenly without done any change in config. We had below problem. Because of the below probl",pvseshu,pvseshu
ZOOKEEPER-2612,ZooKeeper,2016-10-11T17:31:21.000+0000,Major,user-level KeeperException,"We are facing very big problem in production in Zookeeper. Its been working perfectly from many months, but suddenly without done any change in config. We had below problem. Because of the below probl",pvseshu,pvseshu
ZOOKEEPER-2611,ZooKeeper,2016-10-09T08:24:31.000+0000,Critical,zoo_remove_watchers - can remove the wrong watch ,"The actual problem is in the function ""removeWatcherFromList"" - That when we check if we need to delete the watch -  we compare the WatcherCtx to one node before the one we want to delete.. ",Eyal.leshem,Eyal.leshem
ZOOKEEPER-2610,ZooKeeper,2016-10-08T18:13:32.000+0000,Major,Flaky Test: org.apache.zookeeper.test.ReconfigTest.testQuorumSystemChange,{noformat}Regressionorg.apache.zookeeper.test.ReconfigTest.testQuorumSystemChange (from org.apache.zookeeper.test.NioNettySuiteTest)Failing for the past 1 build (Since Failed#3462 )Took 2 min 10 sec.E,hanm,hanm
ZOOKEEPER-2609,ZooKeeper,2016-10-08T16:59:54.000+0000,Major,Add TTL Node APIs to C client,Need to update the C lib to have the TTL node option,randgalt,randgalt
ZOOKEEPER-2608,ZooKeeper,2016-10-07T19:40:58.000+0000,Major,Create CLI option for TTL ephemerals,Need to update CreateCommand to have the TTL node option,fournc,fournc
ZOOKEEPER-2607,ZooKeeper,2016-10-07T07:17:53.000+0000,Major,"doxygen-related, ./configure fails",hithu@linux:~/opt/gridlabd-src-2_0_2363$ autoreconf -isfconfigure.ac:95: error: AC_SUBST: `DX_FLAG_[]DX_CURRENT_FEATURE' is not a valid shell variable namem4/dx_doxygen.m4:77: DX_REQUIRE_PROG is expan,hithuanand,hithuanand
ZOOKEEPER-2606,ZooKeeper,2016-10-04T13:00:12.000+0000,Minor,SaslServerCallbackHandler#handleAuthorizeCallback() should log the exception,"{code}            LOG.info(""Setting authorizedID: "" + userNameBuilder);            ac.setAuthorizedID(userNameBuilder.toString());        } catch (IOException e) {            LOG.error(""Failed to set ",yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2605,ZooKeeper,2016-09-29T18:55:32.000+0000,Minor,Snapshot generation fills up disk space due to high volume of requests.,"Not sure if it's a bug, or just a consequence of a design decision.Recently we had an issue where faulty clients were issuing create requests at an abnormally high rate, which caused zookeeper to gene",joewang,joewang
ZOOKEEPER-2604,ZooKeeper,2016-09-27T11:23:51.000+0000,Major,Temporary node has not been deleted,"i use zkclient to connect zookeeper-server , but sometime when i close my zkclient ,the Temporary node can't be deletedi have search this bug,and i fixed it by delete the data dir",sunqb,sunqb
ZOOKEEPER-2603,ZooKeeper,2016-09-26T10:48:43.000+0000,Minor,Init script restart command broken on Debian Jessie,"Hello,When you try to restart zookeeper via {{service zookeepr restart}} it ends in state:{noformat}root@m1:/etc/systemd# service zookeeper status zookeeper.service - LSB: Apache ZooKeeper server   L",nihn90,nihn90
ZOOKEEPER-2600,ZooKeeper,2016-09-22T21:38:34.000+0000,Major,dangling ephemerals on overloaded server with local sessions,we had the following strange production bug:there was an ephemeral znode for a session that was no longer active.  it happened even in the absence of failures.we are running with local sessions enable,breed,breed
ZOOKEEPER-2599,ZooKeeper,2016-09-22T14:36:49.000+0000,Critical,"Quorum with 3 nodes, stop 2 nodes and let one running, install and configure new quorum where one node details is common but now has configuration of new quorum. common node getting synced the configuration with previous quorum","Start an quorum with 3 (let say A, B, C) zookeepers, stop 2 zookeepers and let one running, install and configure new quorum (A, A2, A3, A4, A5) where A is common but now has configuration of new quor",rakeshsingh,rakeshsingh
ZOOKEEPER-2598,ZooKeeper,2016-09-21T18:01:09.000+0000,Major,Data Inconsistency after power off/on of some nodes,"Steps to reproduce:1. Create a three node cluster: Node1, Node2 and Node3.    Each node is a VM that runs:    1. ZK in a docker container    2. Two clients, A and B that use ZK for group membership an",ssneginhal,ssneginhal
ZOOKEEPER-2597,ZooKeeper,2016-09-21T13:01:13.000+0000,Minor,Add script to merge PR from Apache git repo to Github,A port of kafka-merge-pr.py to workon on ZooKeeper repo.,eribeiro,eribeiro
ZOOKEEPER-2596,ZooKeeper,2016-09-20T14:10:59.000+0000,Minor,Zookeeper.c - gethostname drops subdomain returning only partial FQDN,Nodes fail to connect when a sub-domain is present in the FQDN.The sub-domain is dropped from the hostname string when calling gethostname in zookeeper.c.machine.sub.domain.combecomesmachine.domain.co,blkdragn,blkdragn
ZOOKEEPER-2595,ZooKeeper,2016-09-20T13:13:17.000+0000,Major,"znode created with acl enabled on it can be deleted by any unauthorised user, when it has no child znodes","user1 sets ACL on one znode for user 2example :create /xyz data sasl:user2/xyz@XYZ.COM:cdrnow user3 can login to zkCli and delete /xyz if it has no children nodes, even when it does not have access",neha.bathra,neha.bathra
ZOOKEEPER-2594,ZooKeeper,2016-09-19T19:06:04.000+0000,Blocker,Use TLS for downloading artifacts during build,"Zookeeper builds are downloading dependencies using the insecure http:// protocol. An outdated java.net repository can be removed now, since its content is now on maven.org.The https://repo2.maven.org",oflebbe,oflebbe
ZOOKEEPER-2593,ZooKeeper,2016-09-19T15:40:53.000+0000,Major,Enforce the quota limit,"Currently in ZooKeeper when quota limit exceeds, a warning is logged. There are many user scenarios where it is desired to throw exception in case quota limits exceed.We should make it configurable wh",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2592,ZooKeeper,2016-09-19T15:01:15.000+0000,Critical,Zookeeper is not recoverable once running system( machine on which zookeeper is running) is out of space,Zookeeper is not recoverable once running system( machine on which zookeeper is running) is out of space Steps to reproduce:-1. Install zookeeper on standalone mode and start zookeeper2. Make the mach,rakeshsingh,rakeshsingh
ZOOKEEPER-2591,ZooKeeper,2016-09-18T02:16:31.000+0000,Major,The deletion of Container znode doesn't check ACL delete permission,"Container nodes check the ACL before creation, but the deletion doesn't check  the ACL rights. The code below succeeds even tough we removed ACL access permissions for ""/a"".{code}        zk.create(""/a",eribeiro,eribeiro
ZOOKEEPER-2590,ZooKeeper,2016-09-18T01:51:30.000+0000,Major,setACL doesn't affect exists() operation,"As hinted  [here|https://github.com/apache/zookeeper/blob/master/src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java#L298], even if a parent znode path has restricted READ access it's",eribeiro,eribeiro
ZOOKEEPER-2589,ZooKeeper,2016-09-17T06:18:26.000+0000,Major,Not able to access znode if  IP ACL is set on a znode when zookeeper started in ssl mode,Not able to access znode if  IP ACL is set on a znode when zookeeper started in ssl mode.Steps to reproduce:-1. Start zookeeper in SSL (standalone) mode2. Create a znode3. set ip ACL and connect the z,rakeshsingh,rakeshsingh
ZOOKEEPER-2587,ZooKeeper,2016-09-16T05:44:37.000+0000,Minor,Not handled negative scenario for redo command,"[zk: localhost:2181(CONNECTED) 2] redo -1Exception in thread ""main"" java.lang.NullPointerException	at java.util.StringTokenizer.<init>(StringTokenizer.java:199)	at java.util.StringTokenizer.<init>(Str",rakeshsingh,rakeshsingh
ZOOKEEPER-2586,ZooKeeper,2016-09-16T04:35:18.000+0000,Major,zoo_aremove_watchers() does not remove a watch of path has more than one watch,three issues 1)zoo_aremove_watchers() does not remove a watch if path has more than one watch.but it works in below cases.it removes watch if path has only one watch.and it removes all watches if watc,prashantkumardhotre,prashantkumardhotre
ZOOKEEPER-2585,ZooKeeper,2016-09-15T07:16:03.000+0000,Critical,ACL with SSL is not working,Set ACL with SSL is not workingSteps to reproduce:-1. Start zookeeper in ssl mode in standalone2. Connect zookeeper from zookeeper client (using zkCli.sh)3. add auth and set ACL as below and then quit,rakeshsingh,rakeshsingh
ZOOKEEPER-2584,ZooKeeper,2016-09-15T04:48:17.000+0000,Major,"when setquota for a znode and set ip/user ACL on /zookeeper/quota, still able to delete the quota from client with another ip though it says ""Authentication is not valid""","when setquota for a znode and set ip/user ACL on /zookeeper/quota, still able to delete the quota from client with another ip though it says ""Authentication is not valid"">> Set quota and ip ACL from o",rakeshsingh,rakeshsingh
ZOOKEEPER-2583,ZooKeeper,2016-09-14T14:30:51.000+0000,Minor,Using one client able to access the znode with localhost but fails from another client when IP ACL is set for znode using 127.0.0.1,Using one client able to access the znode with localhost but fails from another client when IP ACL is set for znode using 127.0.0.1Start zookeeper in cluster mode.Client 1 :-[zk: localhost:2181(CONNEC,rakeshsingh,rakeshsingh
ZOOKEEPER-2582,ZooKeeper,2016-09-14T13:38:58.000+0000,Major,"When addauth twice for same user but different password, it is adding 2 digest corresponding to both username, password and so we can able to access znode with user and any of these password which does not seem to be correct","When addauth twice for same user but different password, it is adding 2 digest corresponding to both username, password and so we can able to access znode with user and any of these password which doe",rakeshsingh,rakeshsingh
ZOOKEEPER-2581,ZooKeeper,2016-09-14T07:12:58.000+0000,Major,Not handled NullPointerException while creating key manager and trustManager,"Not handled NullPointerException while creating key manager and trustManager:-2016-09-14 13:35:23,488 [myid:1] - ERROR [CommitProcWorkThread-1:X509AuthenticationProvider@78] - Failed to create key man",rakeshsingh,rakeshsingh
ZOOKEEPER-2580,ZooKeeper,2016-09-14T04:48:00.000+0000,Minor,ErrorMessage is not correct when set IP acl and try to set again from another machine,set IP acl and try to set again from another machine:-[zk: localhost:2181(CONNECTED) 11] setAcl /ip_test ip:10.18.101.80:crdwaKeeperErrorCode = NoAuth for /ip_test,rakeshsingh,rakeshsingh
ZOOKEEPER-2579,ZooKeeper,2016-09-13T20:49:38.000+0000,Major,ZooKeeper server should verify that dataDir and snapDir are writeable before starting,"If the directories specified for the dataDir or the snapDir are not writeable, the server does not fail until it actually tries to write there. It should fail when it starts.",abrahamfine,abrahamfine
ZOOKEEPER-2578,ZooKeeper,2016-09-13T20:30:32.000+0000,Minor,zkEnv.sh does not set $ZOOCFG properly if already set ,"In bin/zkEnv.sh The ZOOCFG variable is duplicated over itself if already set. For example, in my use case it was being set in zookeeper-env.sh. The problem seems to arise from this line (line 61 on th",bjorn248@gmail.com,bjorn248@gmail.com
ZOOKEEPER-2577,ZooKeeper,2016-09-13T18:33:17.000+0000,Major,Flaky Test: org.apache.zookeeper.server.quorum.ReconfigDuringLeaderSyncTest.testDuringLeaderSync,This failure is new and consistent on jdk7/8 with trunk branch - happened after build 3070 recently. Not sure if this is caused by svn - git migration or not.{noformat}Error Messagezoo.cfg.dynamic.nex,hanm,hanm
ZOOKEEPER-2576,ZooKeeper,2016-09-12T16:46:48.000+0000,Blocker,After svn to git migration ZooKeeper Precommit jenkins job is failing.,After moving from svn to git the precommit job is failing. I've disabled it temporarily.https://builds.apache.org/view/S-Z/view/ZooKeeper/job/PreCommit-ZOOKEEPER-Build/,phunt,phunt
ZOOKEEPER-2575,ZooKeeper,2016-09-12T05:34:54.000+0000,Minor,/./// does not have the form scheme:id:perm and client is quit.,"while creating node using command (random arguments like this).create /  /./// or some wrong format it shows the message /./// does not have the form scheme:id:permwith Exception in thread ""main"" org.",Prabhunath,Prabhunath
ZOOKEEPER-2574,ZooKeeper,2016-09-09T20:20:40.000+0000,Major,PurgeTxnLog can inadvertently delete required txn log files,"As part of the fix for ZOOKEEPER-1797, the call to FileTxnSnapLog.getSnapshotLogs() was removed from PurgeTxnLog.java.  As a result, some old-looking but required txn log files can be deleted, resulti",abhishekrai,abhishekrai
ZOOKEEPER-2573,ZooKeeper,2016-09-09T13:35:48.000+0000,Major,Modify Info.REVISION to adapt git repo,Modify {{org.apache.zookeeper.version.Info.REVISION}} to store git repo revisionCurrently {{org.apache.zookeeper.version.Info.REVISION}} stores the svn repo revision which is of type intBut after migr,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2572,ZooKeeper,2016-09-09T05:50:32.000+0000,Major,Potential resource leak in FileTxnLog.truncate,"In FileTxnLog.truncate, we have:{code}public boolean truncate(long zxid) throws IOException {        FileTxnIterator itr = null;        try {            itr = new FileTxnIterator(this.logDir, zxid);  ",hanm,hanm
ZOOKEEPER-2571,ZooKeeper,2016-09-09T05:33:41.000+0000,Major,Potential resource leak in QuorumPeer.writeLongToFile,In QuorumPeer.writeLongToFile we have:{code}try {            bw.write(Long.toString(value));            bw.flush();                        out.flush();        } catch (IOException e) {            LOG.,hanm,hanm
ZOOKEEPER-2570,ZooKeeper,2016-09-08T16:27:05.000+0000,Critical,ZooKeeper clients are timed out when ZooKeeper servers are very busy,ZooKeeper clients are timed out when ZooKeeper servers are very busy. Clients throw below exception and fail all the pending operations{code}org.apache.zookeeper.KeeperException$ConnectionLossExceptio,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2569,ZooKeeper,2016-09-08T13:58:52.000+0000,Major,plain password is stored when set individual ACL using digest scheme,Plain password is stored when set individual ACL using digest scheme instead of storing the username and encoded hash string of <username:password>[zk: localhost:2181(CONNECTED) 13] addauth digest use,rakeshsingh,rakeshsingh
ZOOKEEPER-2568,ZooKeeper,2016-09-08T11:18:28.000+0000,Minor,Node created having name with space is not deleted with delete command,"For Example : String myNode=""/MyNode""+new Date() ; connector.createNode(newNode, new Date().toString().getBytes());and createNode is defined as:public void createNode(String path, byte[] data) throws ",Prabhunath,Prabhunath
ZOOKEEPER-2567,ZooKeeper,2016-09-08T11:00:11.000+0000,Minor,"Error message is not correct when wrong argument is passed for ""reconfig"" cmd","Error message is not correct when wrong argument is passed for ""reconfig"" cmdSteps to reproduce:-1. Start zookeeper in cluster mode2. use reconfig cmd with wrong argument (pass : instead of ;)[zk: loc",rakeshsingh,rakeshsingh
ZOOKEEPER-2566,ZooKeeper,2016-09-08T09:51:36.000+0000,Minor,space should be truncated while reading password for keystore/truststore which is required to configure while SSL enabled,"space should be truncated while reading password for keystore/truststore which is required to configure while SSL enabled.As of now if we configure the password with any heading/trailing space, the zo",athy360,athy360
ZOOKEEPER-2565,ZooKeeper,2016-09-08T09:29:40.000+0000,Minor,listquota <path> should display the quota even it is set on parent/child node,listquota <path> should display the quota even it is set on parent/child node. As of now if we have a parent-child hierarchy for example n1->n2->n3 and quota is set for n2. If we try to get quota deta,rakeshsingh,rakeshsingh
ZOOKEEPER-2564,ZooKeeper,2016-09-08T06:57:41.000+0000,Minor,No message is prompted when trying to delete quota with different quota option,No message is prompted when trying to delete quota with different quota option.Steps to reproduce:-1. Start zookeeper in cluster mode 2. Create some node and set quota likesetquota -n 10 /test3. Now t,rakeshsingh,rakeshsingh
ZOOKEEPER-2563,ZooKeeper,2016-09-08T06:19:59.000+0000,Major,delquota -[n|b] is not deleting the set quota properly,delquota -[n|b] is not deleting the set quota properlySteps to reproduce:-1. Start zookeeper in cluster mode (ssl)2. create some node say /test3. Run command as listquota says (as expected)quota for /,rakeshsingh,rakeshsingh
ZOOKEEPER-2562,ZooKeeper,2016-09-07T18:54:31.000+0000,Major,Safely persist renames of *epoch.tmp to *epoch by issuing fsync on parent directory -- Possible cluster unavailability otherwise,I am running a three node ZooKeeper cluster. Renames of acceptedEpoch.tmp to acceptedEpoch and currentEpoch.tmp to currentEpoch have to persisted to disk by explicitly issuing fsync on the parent dire,ramanala,ramanala
ZOOKEEPER-2561,ZooKeeper,2016-09-07T17:40:38.000+0000,Major,CLONE - Possible Cluster Unavailability,Possible Cluster UnvailabilityI am running a three node ZooKeeper cluster. Each node runs Linux. I see the below sequence of system calls when ZooKeeper appends a user data item to the log file.1 writ,athy360,athy360
ZOOKEEPER-2560,ZooKeeper,2016-09-07T15:12:59.000+0000,Major,Possible Cluster Unavailability,Possible Cluster UnvailabilityI am running a three node ZooKeeper cluster. Each node runs Linux. I see the below sequence of system calls when ZooKeeper appends a user data item to the log file.1 writ,ramanala,ramanala
ZOOKEEPER-2559,ZooKeeper,2016-09-07T12:14:55.000+0000,Major,Failed to delete the set quota for ephemeral node when the node is deleted because of client session closed,Failed to delete the set quota for ephemeral node when the node is deleted because of client session closed[zk: localhost:2181(CONNECTED) 0] create -e /e_test helloCreated /e_test[zk: localhost:2181(C,rakeshsingh,rakeshsingh
ZOOKEEPER-2558,ZooKeeper,2016-09-06T22:57:16.000+0000,Minor,Potential memory leak in recordio.c,We have code like this in {{create_buffer_iarchive}} and {{create_buffer_oarchive}}:{code}    struct iarchive *ia = malloc(sizeof(*ia));    struct buff_struct *buff = malloc(sizeof(struct buff_struct),hanm,hanm
ZOOKEEPER-2557,ZooKeeper,2016-09-06T15:44:39.000+0000,Trivial,Update gitignore to account for other file extensions,"We are in the process of moving from subversion to git, but I have seen that the current ZK's {{gitignore}} doesn't account for many spurious types of files (e.g., *.swp, *.tmp) as well as other files",eribeiro,eribeiro
ZOOKEEPER-2556,ZooKeeper,2016-09-06T10:43:54.000+0000,Minor,"peerType remains as ""observer"" in zoo.cfg even though we change the node from observer to participant runtime","peerType remains as ""observer"" in zoo.cfg even though we change the node from observer to participant runtimeSteps to reproduce:-1. Start zookeeper in cluster with one node as observer by configuring ",rakeshsingh,rakeshsingh
ZOOKEEPER-2555,ZooKeeper,2016-09-06T09:59:59.000+0000,Major,zookeeper started in observer mode takes long time to come to observer state once leader restarted and so client connected to observer mode has to wait for longer time to get service,zookeeper started in observer mode takes long time (some times 25 seconds) to come to observer state once leader restarted and so client connected to observer mode has to wait for longer time to get s,rakeshsingh,rakeshsingh
ZOOKEEPER-2554,ZooKeeper,2016-09-05T19:14:26.000+0000,Critical,reconfig can not add new server as observer,"Try to add new observer server using reconfig API, server gets added as participant.STEPS:# create 3 node cluster.{code}server.0=127.0.0.1:11223:11224:participant;127.0.0.1:11222server.1=127.0.0.1:112",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2553,ZooKeeper,2016-09-05T17:20:17.000+0000,Major,ZooKeeper cluster unavailable due to corrupted log file during power failures -- java.io.IOException: Unreasonable length,"I am running a three node ZooKeeper cluster. When a new log file is created by ZooKeeper, I see the following sequence of system calls:1. creat(new_log)2. write(new_log, count=16) // This is a log hea",ramanala,ramanala
ZOOKEEPER-2552,ZooKeeper,2016-09-05T12:43:03.000+0000,Major,Revisit release note doc and remove the items which are not related to the released version,"Couple of issues listed on http://zookeeper.apache.org/doc/r3.4.9/releasenotes.html that are either 'Open' or 'Patch available'. For example, issues were wrongly marked as ""3.4.8"" fix version in jira ",rakeshr,rakeshr
ZOOKEEPER-2551,ZooKeeper,2016-09-05T07:01:37.000+0000,Major,Remove Hadoop Logo from ZooKeeper documentation,ZooKeeper documentation has hadoop logo on each page's header. There is no significance to put the hadoop logo on ZooKeeper project. So hadoop  logo should be removed from  Zookeeper  as  ZooKeeper is,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2550,ZooKeeper,2016-09-05T06:05:23.000+0000,Blocker,FollowerResyncConcurrencyTest failed in ZooKeeper 3.3.3," I'm studying on the Test of ZooKeeper 3.3.3 but got a test failure when I run  _testResyncBySnapThenDiffAfterFollowerCrashes_ in _FollowerResyncConcurrencyTest.java_.{quote}2016-09-05 13:57:35,072 - ",yinkang,yinkang
ZOOKEEPER-2549,ZooKeeper,2016-09-03T06:39:23.000+0000,Major,As NettyServerCnxn.sendResponse() allows all the exception to bubble up it can stop main ZK requests processing thread,"As NettyServerCnxn.sendResponse() allows all the exception to bubble up it can stop main ZK requests processing thread and make Zookeeper server look like it is hanging, while it just can not process ",yufeldman,yufeldman
ZOOKEEPER-2548,ZooKeeper,2016-09-02T20:23:01.000+0000,Major,zooInspector does not start on Windows,ZooInspector is very usefully tool but seems its windows scripts are not maintained. zooInspector.cmd commands fails with bellow error:{noformat}D:\workspace\ZooInspector>zooInspector.cmdD:\workspace\,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2547,ZooKeeper,2016-09-02T17:16:34.000+0000,Major,IP ACL is not working with NettyServerCnxnFactory,"IP based ACL is not working with NettyServerCnxnFactory.Scenario:1) Configure serverCnxnFactory= org.apache.zookeeper.server.NettyServerCnxnFactory and start ZooKeeper server2) Create a znode  ""/n"" wi",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2546,ZooKeeper,2016-09-02T11:56:03.000+0000,Major,"Started throwing ""Error Path:null Error:KeeperErrorCode = ReconfigInProgress"" error when trying to change the cluster using reconfig and the IO hangged at one node","Started throwing ""Error Path:null Error:KeeperErrorCode = ReconfigInProgress"" error when trying to change the cluster using reconfig and the IO hangged at one node.Steps:-1. Start Zookeeper in cluster",rakeshsingh,rakeshsingh
ZOOKEEPER-2545,ZooKeeper,2016-09-02T06:53:46.000+0000,Major,Keep maintaining the old zoo.cfg.dynamic* files which will keep eating system memory which is getting generated as part of reconfig execution,"Keep maintaining the old zoo.cfg.dynamic* files which will be getting created every time when ""reconfig"" is executedSteps to reproduce:-11. Setup the zookeeper in cluster mode and start2. trying runni",rakeshsingh,rakeshsingh
ZOOKEEPER-2544,ZooKeeper,2016-09-02T05:45:41.000+0000,Minor,""" unary operator expected"" message on the console while trying to get the zookeeper status",root@BLR1000010865:/home/Rakesh/Zookeeper/18_Aug/cluster/zookeeper-3.5.1-alpha/bin# ./zkServer.sh statusZooKeeper JMX enabled by defaultUsing config: /home/Rakesh/Zookeeper/18_Aug/cluster/zookeeper-3.,rakeshsingh,rakeshsingh
ZOOKEEPER-2543,ZooKeeper,2016-09-02T04:37:37.000+0000,Major,Add C API for creating nodes with TTL,"ZOOKEEPER-2169 introduces a new feature for creation nodes with TTL, which is supported by Java client with new Java API. Similar API should be added to C client as well.",hanm,hanm
ZOOKEEPER-2542,ZooKeeper,2016-08-31T17:40:11.000+0000,Blocker,Update NOTICE file with Netty notice in 3.4,"We need to update the NOTICE file in the 3.4 branch as we did for 3.5 and trunk, see ZOOKEEPER-2459.",fpj,fpj
ZOOKEEPER-2541,ZooKeeper,2016-08-30T05:58:24.000+0000,Major,"We can't configure the ""secureClientPort"" in dynamicConfiguration and connect through client","We can't configure the ""secureClientPort"" in dynamicConfiguration and connect through clientSteps to reproduce:-1. Configure the zookeeper in cluster mode with SSL mode2. comment the clientport and se",rakeshsingh,rakeshsingh
ZOOKEEPER-2540,ZooKeeper,2016-08-30T05:16:09.000+0000,Minor,"When start zookeeper server by configuring the server details in dynamic configuration with passing the client port, wrong log info is logged","When start zookeeper server by configuring the server details in dynamic configuration with passing the client port, wrong log info is logged:-Configure the server details as below which contains clie",rakeshsingh,rakeshsingh
ZOOKEEPER-2539,ZooKeeper,2016-08-29T14:09:23.000+0000,Minor,"Throwing nullpointerException when run the command ""config -c"" when client port is mentioned as separate and not like new style","Throwing nullpointerException when run the command ""config -c"" when client port is mentioned as separate and not like new style1. Configure the zookeeper to start in cluster mode like below-clientPort",rakeshsingh,rakeshsingh
ZOOKEEPER-2538,ZooKeeper,2016-08-26T21:15:06.000+0000,Major,Flaky Test: org.apache.zookeeper.server.quorum.Zab1_0Test.testNormalObserverRun,The failure of this test is fairly often. Might relate to ZOOKEEPER-1798.{noformat}org.apache.zookeeper.server.quorum.Zab1_0Test.testNormalObserverRunFailing for the past 1 build (Since Failed#1143 )T,hanm,hanm
ZOOKEEPER-2537,ZooKeeper,2016-08-26T09:08:22.000+0000,Major,"When provide path for ""dataDir"" with heading space, it is taking correct path (by trucating space) for snapshot but zookeeper_server.pid is getting created in root (/) folder","Scenario 1 :-When provide path for ""dataDir"" with heading space, it is taking correct path (by trucating space) for snapshot but zookeeper_server.pid is getting created in root (/) folderSteps to repr",rakeshsingh,rakeshsingh
ZOOKEEPER-2536,ZooKeeper,2016-08-26T08:57:14.000+0000,Major,"When provide path for ""dataDir"" with trailing space, it is taking correct path (by trucating space) for snapshot but creating temporary file with some junk folder name for zookeeper_server.pid","Scenario 1:-When provide path for ""dataDir"" with trailing space, it is taking correct path (by trucating space) for snapshot but creating temporary file with some junk folder name for zookeeper_server",rakeshsingh,rakeshsingh
ZOOKEEPER-2535,ZooKeeper,2016-08-26T06:58:32.000+0000,Major,"zookeeper_server's pid should be created once server is started completely and not before, problem with current approach","zookeeper_server's pid should be created once server is started completely and not before, problem with current approach :-Scenario:-1. Configure below in zoo.cfgdataDir=/home/Rakesh/Zookeeper/18_Aug/",rakeshsingh,rakeshsingh
ZOOKEEPER-2534,ZooKeeper,2016-08-26T05:46:58.000+0000,Major,Configuration for IP address (zookeeper.server.ip=) should be introduced and zookeeper server should bind to that particular IP only not to all IPs of the system,Configuration for IP address (zookeeper.server.ip=) should be introduced and zookeeper server should bind to that particular IP only not to all IPs of the system. As of now zookeeper is binding to 0.0,rakeshsingh,rakeshsingh
ZOOKEEPER-2533,ZooKeeper,2016-08-25T09:16:18.000+0000,Minor,"Close the zkCli using ""close"" command and then connect using ""connect"" then provide some invalid input, it closing the channel and connecting again","Close the zkCli using ""close"" command and then connect using ""connect"" then provide some invalid input, it closing the channel and connecting againSteps to reproduce:-1. Connect the Zookeeper server u",rakeshsingh,rakeshsingh
ZOOKEEPER-2532,ZooKeeper,2016-08-25T09:11:01.000+0000,Minor,zkCli throwing nullpointerException instead it should provide help when invalid input is entered,1. a) Connect to zookeeper using zkCli b) just input space and then hit enter2. a) Connect to zookeeper using zkCli and hit enter it will come as connected  b) just input space and then hit enterConso,rakeshsingh,rakeshsingh
ZOOKEEPER-2531,ZooKeeper,2016-08-25T06:58:44.000+0000,Major,"Configuration as ""zookeeper.secure=true/false"" can be introduced and reading and verifying all ssl related configuration (like secureport, keystore, truststore, corresponding password) should be done only when ""zookeeper.secure"" flag is true","Configuration as ""zookeeper.secure=true/false"" can be introduced and reading and verifying all ssl related configuration (like secureport, keystore, truststore, corresponding password) should be done ",rakeshsingh,rakeshsingh
ZOOKEEPER-2530,ZooKeeper,2016-08-25T06:40:12.000+0000,Major,"When zookeeper started in SSL mode, set a ""get"" watcher on a znode from zkCli client, restart the zkCli, the ""Data"" watcher still present. Trying removing that watcher fails saying no watcher available","When zookeeper started in SSL mode, set a ""get"" watcher on a znode from zkCli client, restart the zkCli, the ""Data"" watcher still present. Trying removing that watcher fails saying no watcher availabl",rakeshsingh,rakeshsingh
ZOOKEEPER-2529,ZooKeeper,2016-08-25T00:14:47.000+0000,Major,Flaky Test: org.apache.zookeeper.test.NonRecoverableErrorTest.testZooKeeperServiceAvailableOnLeader,This flaky is introduced by ZOOKEEPER-2247 recently.{noformat}Error MessageIOException is expected due to error injected to transaction log commitStacktracejunit.framework.AssertionFailedError: IOExce,hanm,hanm
ZOOKEEPER-2528,ZooKeeper,2016-08-24T20:45:01.000+0000,Critical,ZooKeeper cluster can become unavailable due to power failures,ZooKeeper cluster can become unavailable if power failures happen at certain specific points in time. Details:I am running a three-node ZooKeeper cluster. I perform a simple update from a client machi,ramanala,ramanala
ZOOKEEPER-2527,ZooKeeper,2016-08-24T11:34:52.000+0000,Major,Connection watch is not getting cleared when watch is created as part of get and it is fired as part of set and client is closed,Connection watch is not getting cleared when watch is created as part of get and it is fired as part of set and client is closedSteps to reproduce:-Configure the Zookeeper in ssl mode and start the sa,rakeshsingh,rakeshsingh
ZOOKEEPER-2526,ZooKeeper,2016-08-24T04:46:03.000+0000,Minor,Add config flag to prohibit connections from clients that don't do Sasl auth,"According to ZOOKEEPER-1736 the flag allowSaslFailedClient will allow clients whose Sasl auth has failed the same privileges as a client that does not attempt Sasl, i.e., anonymous login.It would be n",irfanhamid,irfanhamid
ZOOKEEPER-2525,ZooKeeper,2016-08-23T09:36:56.000+0000,Minor,Throwing Exception at zookeeper server side whenever client is closing the connection,"Throwing Exception at zookeeper server side whenever client is closing the connection2016-08-17 20:38:09,030 [myid:] - WARN [New I/O worker #4:ClientCnxnSocketNetty$ZKClientHandler@432] - Exception ca",rakeshsingh,rakeshsingh
ZOOKEEPER-2524,ZooKeeper,2016-08-23T09:35:26.000+0000,Major,"Start zkServer in ssl mode, start zkCli in non-ssl mode but on ssl port then try to quit at client, it takes almost 30 seconds to quit ","Start zkServer in ssl mode, start zkCli in non-ssl mode but on ssl port then try to quit at client, it takes almost 30 seconds to quit.Steps to reproduce:-Configure the details required for SSL in zkS",rakeshsingh,rakeshsingh
ZOOKEEPER-2523,ZooKeeper,2016-08-23T09:33:35.000+0000,Minor,No proper logging when zookeeper failed to start in ssl mode.,"Scenario1 :-Configure zookeeper for all but configure wrong ssl passwordStart the zookeeper server, it starts fine. No logs that zookeeper is not started in ssl mode though it has not started in ssl m",rakeshsingh,rakeshsingh
ZOOKEEPER-2522,ZooKeeper,2016-08-23T09:12:32.000+0000,Minor,"Need to document that default ""secureClientPort"" for Client will be 2181 and not ""clientPort"" when starting in SSL enable mode",By default we configure the clientPort as 2181 in zookeeper and secureClientPort as 3181 in SSL enable zookeeper. But when start the corresponding client (which is in ssl enabled mode) fails to connec,rakeshsingh,rakeshsingh
ZOOKEEPER-2521,ZooKeeper,2016-08-23T06:49:47.000+0000,Minor,space should be truncated while reading password for keystore/truststore which is required to configure while SSL enabled,"space should be truncated while reading password for keystore/truststore which is required to configure while SSL enabled.As of now if we configure the password with any heading/trailing space, the zo",rakeshsingh,rakeshsingh
ZOOKEEPER-2520,ZooKeeper,2016-08-23T06:44:34.000+0000,Major,Zookeeper should accept and handle encrypted password (AES) which is required to be passed for keystore and truststore in case of SSL support,When enable SSL support we need to configure the keystore and truststore details and corresponding password in zkEnv.sh/bat file. Currenlty we can only pass plain password which is not accepted becaus,rakeshsingh,rakeshsingh
ZOOKEEPER-2519,ZooKeeper,2016-08-22T12:45:36.000+0000,Major,zh->state should not be 0 while handle is active,"0 does not correspond to any of the defined states for the zookeeper handle, so a client should not expect to see this value. But in the function {{handle_error}}, we set {{zh->state = 0}}, which a cl",agrasso,agrasso
ZOOKEEPER-2518,ZooKeeper,2016-08-20T00:14:35.000+0000,Minor,Document how to set up tool chains for build and test C client on all platforms,Add documentations on how to set up ZooKeeper development environment for C client for all platforms. ,hanm,hanm
ZOOKEEPER-2517,ZooKeeper,2016-08-18T23:41:52.000+0000,Blocker,jute.maxbuffer is ignored,"In ClientCnxnSocket.java the parsing of the system property is erroneous:{code}packetLen = Integer.getInteger(  clientConfig.getProperty(ZKConfig.JUTE_MAXBUFFER),  ZKClientConfig.CLIENT_MAX_PACKET_LEN",benjamin.jaton,benjamin.jaton
ZOOKEEPER-2516,ZooKeeper,2016-08-17T18:43:54.000+0000,Minor,C client calculates invalid time interval for pings et al,"The C-client has a function called {{calculate_interval()}} in {{zookeeper.c}}, whose purpose is to determine the number of milliseconds difference between a start and end time. Unfortunately its logi",Hadriel,Hadriel
ZOOKEEPER-2515,ZooKeeper,2016-08-17T16:34:52.000+0000,Major,SessionTrackerImpl non-daemon thread slow to shutdown,"While calling SessionTrackerImpl#shutdown does result in the thread eventually stopping, it takes up to expirationInterval (3 seconds, by default) for the thread to finally die.Since the thread is not",paulmillar,paulmillar
ZOOKEEPER-2514,ZooKeeper,2016-08-16T21:44:35.000+0000,Critical,Simplify releasenotes creation for 3.4 branch - consistent with newer branches.,"ZOOKEEPER-2364 introduced a new process for creating release notes for 3.5 and later branches. Backport this to 3.4 branch in order to make the release manager's life easier (and be consisten with ""ho",phunt,phunt
ZOOKEEPER-2513,ZooKeeper,2016-08-14T00:46:35.000+0000,Critical,majorChange exceptions during leader sync,"In Learner.java there are exceptions being thrown in case majorChange = true, i.e., a reconfig is encountered in the stream of updates from the leader. There may be two problems in the way such except",shralex,shralex
ZOOKEEPER-2512,ZooKeeper,2016-08-12T18:27:04.000+0000,Major,Allow Jetty dependency to use HTTPS and Basic Auth,If ZOOKEEPER-2489 gets committed then it would be nice to allow more flexible configuration of https and basic authentication to JettyAdminServer.,eribeiro,eribeiro
ZOOKEEPER-2511,ZooKeeper,2016-08-11T21:31:05.000+0000,Major,Implement AutoCloseable in ZooKeeper.java,As a java developer I would like to be able to use try-with-resource blocks with ZooKeeper objects in order to make closing sessions easier.,abrahamfine,abrahamfine
ZOOKEEPER-2510,ZooKeeper,2016-08-10T23:50:38.000+0000,Major,org.apache.zookeeper.server.NettyServerCnxnTest uses wrong import for junit,junit.framework.Assert is deprecated. The code should use org.junit.Assert instead.Patch coming shortly.,tdunning,tdunning
ZOOKEEPER-2509,ZooKeeper,2016-08-10T04:55:36.000+0000,Major,Secure mode leaks memory,The Netty connection handling logic fails to clean up watches on connection close. This causes memory to leak.I will have a repro script available soon and a fix. I am not sure how to build a unit tes,tdunning,tdunning
ZOOKEEPER-2508,ZooKeeper,2016-08-09T13:40:00.000+0000,Major,Many ZooKeeper tests are flaky because they proceed with zk operation without connecting to ZooKeeper server.,Many ZooKeeper tests are flaky because they proceed with zk operation without connecting to ZooKeeper server.Recently in our build {{org.apache.zookeeper.server.ZooKeeperServerMainTest.testStandalone(,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2507,ZooKeeper,2016-08-08T20:28:31.000+0000,Minor,C unit test improvement: line break between 'ZooKeeper server started' and 'Running',"Currently we have this on C unit test output:{noformat}ZooKeeper server startedRunning......OK{noformat}This is because the zkServer.sh, when eco 'ZooKeeper server started', does not put a line break ",hanm,hanm
ZOOKEEPER-2506,ZooKeeper,2016-08-06T20:11:09.000+0000,Minor,Document use of read-only mode,It would be a good addition to the documentation a simple example of how to code an application to use read-only mode.,fpj,fpj
ZOOKEEPER-2505,ZooKeeper,2016-08-06T00:05:11.000+0000,Minor,Use shared library instead of static library in C client unit test,"Currently we are statically linking c unit tests to ZK client library - we should use shared library instead as there seems no particular reason to stick to static library, plus one benefit of using s",hanm,hanm
ZOOKEEPER-2504,ZooKeeper,2016-08-05T22:48:31.000+0000,Major,Enforce that server ids are unique in a cluster,"The leader will happily accept connections from learners that have the same server id (i.e., due to misconfiguration). This can lead to various issues including non-unique session_ids being generated ",dbenediktson,dbenediktson
ZOOKEEPER-2503,ZooKeeper,2016-08-05T16:01:00.000+0000,Major,Inconsistency between myid documentation and implementation,"In ZK documentation, we have:""The myid file consists of a single line containing only the text of that machine's id. So myid of server 1 would contain the text ""1"" and nothing else. The id must be uni",hanm,hanm
ZOOKEEPER-2502,ZooKeeper,2016-08-05T15:45:44.000+0000,Major,Flaky Test: org.apache.zookeeper.server.quorum.CnxManagerTest.testCnxFromFutureVersion,"{noformat}Error MessageBroken pipeStacktracejava.io.IOException: Broken pipe	at sun.nio.ch.FileDispatcherImpl.write0(Native Method)	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:47)	at su",hanm,hanm
ZOOKEEPER-2501,ZooKeeper,2016-08-04T18:43:55.000+0000,Minor,Improve ZooKeeperServerListenerImpl#notifyStopping() logging,"This jira is to address [~fpj]'s comment.{code}ZooKeeperCriticalThread#handleException() logs an error message including a throwable. Again, in ZooKeeperServerListenerImpl#notifyStopping(), it logs an",rakeshr,rakeshr
ZOOKEEPER-2500,ZooKeeper,2016-08-03T15:39:05.000+0000,Major,Fix compilation warnings for CliException classes,,abrahamfine,abrahamfine
ZOOKEEPER-2499,ZooKeeper,2016-08-03T05:44:19.000+0000,Major,Flaky Test: org.apache.zookeeper.test.SSLTest.testSecureQuorumServer ,"{noformat}Error Messagewaiting for server 0 being upStacktracejunit.framework.AssertionFailedError: waiting for server 0 being up	at org.apache.zookeeper.test.SSLTest.testSecureQuorumServer(SSLTest.ja",hanm,hanm
ZOOKEEPER-2498,ZooKeeper,2016-08-03T05:01:14.000+0000,Major,Potential resource leak in C client when processing unexpected / out of order response,"In C client, we use reference counting to decide if a given zh handle can be destroyed or not. This requires we always make sure to call api_prolog (which increment the counter) and api_epilog (which ",hanm,hanm
ZOOKEEPER-2497,ZooKeeper,2016-08-02T15:27:24.000+0000,Major,Flaky Test: org.apache.zookeeper.test.QuorumTest.testMultipleWatcherObjs,Example:https://builds.apache.org/job/ZooKeeper-trunk-jdk8/607/https://builds.apache.org/job/ZooKeeper_branch35_jdk8/127/Note I haven't found any of the Jenkins JDK7 build fail with same error message,hanm,hanm
ZOOKEEPER-2496,ZooKeeper,2016-08-01T07:52:39.000+0000,Major,"When inside a transaction, some exceptions do not have path information set.","If a client tries to execute some illegal operations inside a transaction, ZooKeeper throws an exception.Some exceptions such as NodeExistsException should have a path to indicate where the exception ",kazuakibanzai,kazuakibanzai
ZOOKEEPER-2495,ZooKeeper,2016-07-31T20:51:46.000+0000,Major,"Cluster unavailable on disk full(ENOSPC), disk quota(EDQUOT), disk write error(EIO) errors","ZooKeeper cluster completely stalls with *no* transactions making progress when a storage related error (such as *ENOSPC, EDQUOT, EIO*) is encountered by the current *leader*. Surprisingly, the same e",ramanala,ramanala
ZOOKEEPER-2494,ZooKeeper,2016-07-28T19:35:27.000+0000,Major,"reword documentation to say ""a simple shell to execute file-like operations"" instead of ""a shell in which to execute simple file-system-like operations""",[~rakeshr] mades this suggestion in ZOOKEEPER-2477 and I thought this was worth implementing in its own jira,abrahamfine,abrahamfine
ZOOKEEPER-2493,ZooKeeper,2016-07-28T17:34:04.000+0000,Major,Flaky Tests: ReconfigTest fails on Solaris ,Two tests related to ReconfigTest fail consistently on Solaris:org.apache.zookeeper.test.ReconfigTest.testPortChangeToBlockedPortLeaderorg.apache.zookeeper.test.ReconfigTest.testPortChangeToBlockedPor,hanm,hanm
ZOOKEEPER-2492,ZooKeeper,2016-07-28T02:09:40.000+0000,Trivial,gethostname return error before Win32WSAStartup on windows.,"gethostname return error before Win32WSAStartup on windows.in log_env function.gethostname(buf, sizeof(buf));LOG_INFO(LOGCALLBACK(zh), ""Client environment:host.name=%s"", buf);buf will be uninitialized",spooky000,spooky000
ZOOKEEPER-2491,ZooKeeper,2016-07-28T01:59:14.000+0000,Minor,C client build error in vs 2015 ,Visual Studio 2015  supports snprintf.#define snprintf _snprintf throw error.,spooky000,spooky000
ZOOKEEPER-2490,ZooKeeper,2016-07-27T06:17:10.000+0000,Major,infinitely connect on windows,"in addrvec_contains functionthis memcmp always return false on windows release build.for (i = 0; i < avec->count; i++){    if(memcmp(&avec->data[i], addr, INET_ADDRSTRLEN) == 0)        return 1;}becau",spooky000,spooky000
ZOOKEEPER-2489,ZooKeeper,2016-07-26T20:54:32.000+0000,Major,Upgrade Jetty dependency to a recent stable release version.,"Jetty was added as one of dependencies in ZOOKEEPER-1346 in 2011, and have not been updated since then. The version we are using in trunk is 6.1.26 which was released in 2010. We should consider upgra",hanm,hanm
ZOOKEEPER-2488,ZooKeeper,2016-07-25T23:05:44.000+0000,Major,Unsynchronized access to shuttingDownLE in QuorumPeer,Access to shuttingDownLE in QuorumPeer is not synchronized here:https://github.com/apache/zookeeper/blob/3c37184e83a3e68b73544cebccf9388eea26f523/src/java/main/org/apache/zookeeper/server/quorum/Quoru,hanm,hanm
ZOOKEEPER-2487,ZooKeeper,2016-07-25T17:06:19.000+0000,Major,Test failed because of 'Forked Java VM exited abnormally.',Sometimes tests fail with error message like this:Error Message:Forked Java VM exited abnormally. Please note the time in the report does not reflect the time until the VM exit.Stack Trace:junit.frame,hanm,hanm
ZOOKEEPER-2486,ZooKeeper,2016-07-21T22:44:02.000+0000,Major,Flaky Test: org.apache.zookeeper.test.QuorumZxidSyncTest.testBehindLeader,"From https://builds.apache.org/job/ZooKeeper_branch34_jdk7/1156{noformat}Error Messagewaiting for server upStacktracejunit.framework.AssertionFailedError: waiting for server up	at org.apache.zookeeper",hanm,hanm
ZOOKEEPER-2485,ZooKeeper,2016-07-21T22:40:51.000+0000,Major,Flaky Test: org.apache.zookeeper.test.FourLetterWordsTest.testFourLetterWords,"From https://builds.apache.org/job/ZooKeeper_branch34_jdk7/1156/{noformat}Error Messagetest timed out after 30000 millisecondsStacktracejava.lang.Exception: test timed out after 30000 milliseconds	at ",hanm,hanm
ZOOKEEPER-2484,ZooKeeper,2016-07-21T21:55:21.000+0000,Major,Flaky Test: org.apache.zookeeper.test.LoadFromLogTest.testLoadFailure,From https://builds.apache.org/job/ZooKeeper-trunk-openjdk7/1098/{noformat}Error MessageKeeperErrorCode = ConnectionLoss for /data-Stacktraceorg.apache.zookeeper.KeeperException$ConnectionLossExceptio,hanm,hanm
ZOOKEEPER-2483,ZooKeeper,2016-07-21T21:45:32.000+0000,Major,Flaky Test: org.apache.zookeeper.test.LETest.testLE,"From https://builds.apache.org/job/ZooKeeper_branch34/1587/{noformat}Error MessageThreads didn't joinStacktracejunit.framework.AssertionFailedError: Threads didn't join	at org.apache.zookeeper.test.LE",hanm,hanm
ZOOKEEPER-2482,ZooKeeper,2016-07-21T21:40:32.000+0000,Major,Flaky Test: org.apache.zookeeper.test.ClientPortBindTest.testBindByAddress,"From https://builds.apache.org/job/ZooKeeper_branch34/1587/{noformat}Error MessageNo such deviceStacktracejava.net.SocketException: No such device	at java.net.NetworkInterface.isLoopback0(Native Metho",hanm,hanm
ZOOKEEPER-2481,ZooKeeper,2016-07-21T21:33:21.000+0000,Major,Flaky Test: testZeroWeightQuorum,"See https://builds.apache.org/job/ZooKeeper-trunk-openjdk7/1098/{noformat}Error MessageThreads didn't joinStacktracejunit.framework.AssertionFailedError: Threads didn't join	at org.apache.zookeeper.te",hanm,hanm
ZOOKEEPER-2480,ZooKeeper,2016-07-19T11:11:39.000+0000,Minor,"Exhibitor and zookeeper, Cannot open channel to x at election address",We have 5 node ensemble setup in our tst environment and we are seeing the error below on two of the nodes. We have 3 nodes on the first data centre and 2 nodes on the second data centre and all of th,keremyzc,keremyzc
ZOOKEEPER-2479,ZooKeeper,2016-07-19T05:01:33.000+0000,Major,Add 'electionTimeTaken' value in LeaderMXBean and FollowerMXBean,"The idea of this jira is to expose {{time taken}} for the leader election via jmx Leader, Follower beans.",rakeshr,rakeshr
ZOOKEEPER-2478,ZooKeeper,2016-07-19T01:12:01.000+0000,Trivial,Duplicate 'the' on Zab in words Wiki page,There's a duplicate 'the' on the Zookeeper wikiZab in wordsPhase 1: Establish an epoch4.1,Aggress,Aggress
ZOOKEEPER-2477,ZooKeeper,2016-07-17T17:09:30.000+0000,Major,documentation should refer to Java cli shell and not C cli shell,"The documentation tends to refer to the c cli shell when citing examples of how to interact with ZK, rather than using the Java cli shell. Given the Java cli is much better maintained and more feature",phunt,phunt
ZOOKEEPER-2476,ZooKeeper,2016-07-16T00:25:52.000+0000,Critical,Not possible to upgrade via reconfig a Participant+Observer cluster to a Participant+Participant cluster,"Contrary to the documentation, it is not possible to upgrade via reconfig a Participant+Observer cluster to a Participant+Participant cluster. KeeperException.NewConfigNoQuorum is thrown instead.PrepR",randgalt,randgalt
ZOOKEEPER-2475,ZooKeeper,2016-07-14T14:06:05.000+0000,Major,Include ZKClientConfig API in zoookeeper javadoc,"Generate zookeeper api doc using {{ant javadoc}} commandopen build/docs/api/index.html, ZKClientConfig is not present",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2474,ZooKeeper,2016-07-14T12:52:16.000+0000,Critical,No way to reattach to a session when using ZKClientConfig,"The new constructors for ZooKeeper instances take a ZKClientConfig, which is great, however there is no way to reattach to an existing session.New constructors should be added to allow passing a sessi",timothyjward,timothyjward
ZOOKEEPER-2473,ZooKeeper,2016-07-11T17:28:23.000+0000,Minor,ZooInspector support for read-only mode,,benjamin.jaton,benjamin.jaton
ZOOKEEPER-2472,ZooKeeper,2016-07-11T02:31:51.000+0000,Minor,ServerConfig#parse(String[]) parse params has problems,"When debug zookeeper, run ZooKeeperServerMain then pass 4 args, e.g: 2181 F:\\zk\\data 2000 30, that is:clientPort = 2181dataDir = F:\\zk\\datatickTime = 2000maxClientCnxns = 30But ServerConfig#parse(",ykgarfield,ykgarfield
ZOOKEEPER-2471,ZooKeeper,2016-07-08T15:52:07.000+0000,Major,"Java Zookeeper Client incorrectly considers time spent sleeping as time spent connecting, potentially resulting in infinite reconnect loop","ClientCnxnSocket uses a member variable ""now"" to track the current time, and lastSend / lastHeard variables to track socket liveness. Implementations, and even ClientCnxn itself, are expected to call ",dbenediktson,dbenediktson
ZOOKEEPER-2470,ZooKeeper,2016-07-08T04:59:48.000+0000,Trivial,ServerConfig#parse(String[])  ignores tickTime,Based on bug report from ykgarfield:ServerConfig#parse(String[]) method has the following code:    public void parse(String[] args) {        ...        if (args.length == 3) {                tickTime ,shralex,shralex
ZOOKEEPER-2469,ZooKeeper,2016-07-08T00:55:19.000+0000,Major,infinite loop in ZK re-login,{noformat}                        int retry = 1;                        while (retry >= 0) {                            try {                                reLogin();                                b,sershe,sershe
ZOOKEEPER-2468,ZooKeeper,2016-07-07T05:34:42.000+0000,Major,SetQuota and DelQuota,"Setquota and delquota commands does not work Steps to reproduce:1. Create Test Node 1    create -c /TestZookeeperNodeNumber ""testdata""2. Create Test Node 2    create -c /TestZookeeperNodeBytes ""testda",joshi.shankar,joshi.shankar
ZOOKEEPER-2467,ZooKeeper,2016-07-07T02:51:02.000+0000,Minor,NullPointerException when redo Command is passed negative value,"When negative value of argument is passed to redo command .[zk: localhost:2181(CONNECTED) 0] redo -1Exception in thread ""main"" java.lang.NullPointerException        at java.util.StringTokenizer.<init>",joshi.shankar,joshi.shankar
ZOOKEEPER-2466,ZooKeeper,2016-07-05T21:04:28.000+0000,Critical,Client skips servers when trying to connect,"I've been looking at {{Zookeeper_simpleSystem::testFirstServerDown}} and I observed the following behavior. The list of servers to connect contains two servers, let's call them S1 and S2. The client n",fpj,fpj
ZOOKEEPER-2465,ZooKeeper,2016-07-05T17:38:03.000+0000,Blocker,Documentation copyright notice is out of date.,"As reported by [~eribeiro], all of the documentation pages show a copyright notice dating ""2008-2013"".  This issue tracks updating the copyright notice on all documentation pages to show the current y",cnauroth,cnauroth
ZOOKEEPER-2464,ZooKeeper,2016-07-04T22:21:01.000+0000,Major,NullPointerException on ContainerManager,I would like to expose you to a problem that we are experiencing.We are using a cluster of 7 zookeeper and we use them to implement a distributed lock using Curator (http://curator.apache.org/curator-,ssalmaso,ssalmaso
ZOOKEEPER-2463,ZooKeeper,2016-07-03T15:38:17.000+0000,Blocker,TestMulti is broken in the C client,I noticed that all multi tests seem to be timing out and they are failing silently. This is the output that I'm observing:{noformat}Zookeeper_multi::testCreate : assertion : elapsed 10001Zookeeper_mul,fpj,fpj
ZOOKEEPER-2462,ZooKeeper,2016-07-01T14:50:01.000+0000,Minor,force authentication/authorization,This change introduces two new config options to force authorization and authentication:1. disableWorldACLThe purpose of this option is disable the builtin mechanism which authorizes everyone.If it is,botond.hejj,botond.hejj
ZOOKEEPER-2461,ZooKeeper,2016-06-30T17:59:33.000+0000,Major,There is no difference between the observer and the participants in the leader election algorithm,"We have observed a case that when a leader machine crashes hard, non-voting learners take a long time to detect the new leader. After looking at the details more carefully, we identified one potential",nerdyyatrice,nerdyyatrice
ZOOKEEPER-2460,ZooKeeper,2016-06-30T07:39:13.000+0000,Critical,Remove javacc dependency from public Maven pom,during the vote of 3.5.2-ALPHA RC 0 we found a Maven dependency to javacc in published pom for zookeeper{code}<dependency><groupId>net.java.dev.javacc</groupId><artifactId>javacc</artifactId><version>,eolivelli,eolivelli
ZOOKEEPER-2459,ZooKeeper,2016-06-29T22:43:50.000+0000,Blocker,Update NOTICE file with Netty notice,"Bubbling up the Netty notice. According to the ALv2 item 4, we need to include it in our top notice, it isn't sufficient to have it in the bundle. ",fpj,fpj
ZOOKEEPER-2458,ZooKeeper,2016-06-29T21:48:58.000+0000,Major,Remove license file for servlet-api dependency,"In ZOOKEEPER-2235, we changed the license of the servlet-api dependency to the correct one ALv2, but didn't remove the CDDL license file, which is incorrect. This jira removes the incorrect license fi",fpj,fpj
ZOOKEEPER-2457,ZooKeeper,2016-06-29T21:47:20.000+0000,Major,Remove license file for servlet-api dependency,"In ZOOKEEPER-2235, we changed the license of the servlet-api dependency to the correct one ALv2, but didn't remove the CDDL license file, which is incorrect. This jira removes the incorrect license fi",fpj,fpj
ZOOKEEPER-2456,ZooKeeper,2016-06-29T19:32:32.000+0000,Major,Provide API to get user from different authentication providers,Currently zookeeper server same field is used to store both user name and passwordProvide a mechanism to separate the user and password either by adding new field or by adding new APIDETAILS:org.apach,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2455,ZooKeeper,2016-06-28T06:01:36.000+0000,Major,unexpected server response ZRUNTIMEINCONSISTENCY,"Hi Folks,I am hitting an error in my C client code and below are the set of operations I perform:  1.  Zookeeper Client connected to Zookeeper server S1 and a new server S2 gets added.  2.  monitor zo",cdpradeepa,cdpradeepa
ZOOKEEPER-2454,ZooKeeper,2016-06-27T09:16:43.000+0000,Minor,Limit Connection Count based on User,ZooKeeper currently can limit connection count from clients coming from the same ip. It is a great feature to malfunctioning clients DOS-ing the server with many requests.I propose additional safegura,botond.hejj,botond.hejj
ZOOKEEPER-2453,ZooKeeper,2016-06-25T16:49:28.000+0000,Minor,"Cannot compile on ARM: ""Error: bad instruction `lock xaddl""",It seems that this is a bug equivalent to the issue ZOOKEEPER-1374.make[5]: Entering directory '/home/pi/Downloads/mesos-0.28.2/build/3rdparty/zookeeper-3.4.5/src/c'if /bin/bash ./libtool --tag=CC --m,mthies,mthies
ZOOKEEPER-2452,ZooKeeper,2016-06-23T20:17:42.000+0000,Critical,Back-port ZOOKEEPER-1460 to 3.4 for IPv6 literal address support.,"Via code inspection, I see that the ""server.nnn"" configuration key does not support literal IPv6 addresses because the property value is split on "":"". In v3.4.3, the problem is in QuorumPeerConfig:{no",cnauroth,cnauroth
ZOOKEEPER-2451,ZooKeeper,2016-06-23T19:32:43.000+0000,Major,do not make use of system properties for security configuration,"Is there (or could there be) a way to set up security for ZK client that doesn't involve calls like {noformat}System.setProperty(ZooKeeperSaslClient.LOGIN_CONTEXT_NAME_KEY, SASL_LOGIN_CONTEXT_NAME);{n",sershe,sershe
ZOOKEEPER-2450,ZooKeeper,2016-06-22T21:11:40.000+0000,Critical,Upgrade Netty version due to security vulnerability (CVE-2014-3488),This JIRA recreates ZOOKEEPER-2432 which was deleted as the collateral damage during the spamming fighting effort Apache Infrastructure Team did weeks ago. Recreate the JIRA for the record so external,hanm,hanm
ZOOKEEPER-2449,ZooKeeper,2016-06-20T12:52:32.000+0000,Minor,Refresh the invalid host which got unknownhostexception during connection in StaticHostProvider,"As per the current logic if a host has ""UnknownHostException"" during zookeeper client object connection and it is never refreshed after that. Incase host comes back, this class won't try to connect it",vishk,vishk
ZOOKEEPER-2448,ZooKeeper,2016-06-19T15:16:15.000+0000,Major,Expose result of reconfiguration via JMX,"Currently, the main way to get the result of a reconfiguration is to look at the server logs. One possible way to expose a reconfiguration command and its result is to do it via JMX. One advantage ove",fpj,fpj
ZOOKEEPER-2447,ZooKeeper,2016-06-15T12:56:26.000+0000,Major,Zookeeper adds  good delay when one of the quorum host is not reachable,"StaticHostProvider --> resolveAndShuffle method adds all of the address which are valid in the quorum to the list, shuffles them and sends back to client connection class. If after shuffling if first ",vishk,vishk
ZOOKEEPER-2446,ZooKeeper,2016-06-08T10:03:01.000+0000,Critical,License missing in the pom.xml,"Assembling a {{NOTICE}} file in a project that uses Zookeeper I've realized the {{pom.xml}} does not declare the license, at least in the whole {{3.4.x}} branch, e.g., https://repo1.maven.org/maven2/o",wikier,wikier
ZOOKEEPER-2445,ZooKeeper,2016-06-08T08:56:59.000+0000,Critical,"Add a new node to cluster, error config file but sucessed","I want to add a new node to a test cluster with three node. So I tried with the folling steps: 1. I copied one foller zookeeper directory, and edit clientPort, dataDir , logDir, myid file, and then ad",Ahaha,Ahaha
ZOOKEEPER-2444,ZooKeeper,2016-06-07T11:01:08.000+0000,Major,Fix NULL handling for getlogin() call,https://github.com/apache/zookeeper/pull/70,vespian,vespian
ZOOKEEPER-2443,ZooKeeper,2016-06-07T09:42:49.000+0000,Major,Invalid Memory Access (SEGFAULT) and undefined behaviour in c client,"Hey,I encountered some issues with the zookeepeer c client.The problem starts in the zookeeper_init_internal method. A lot of initialization work is performed here and if any of the initialization rou",paulasmuth,paulasmuth
ZOOKEEPER-2442,ZooKeeper,2016-06-03T23:05:36.000+0000,Major,Socket leak in QuorumCnxManager connectOne,"The function connectOne() in QuorumCnxManager.java sometimes fails to release a socket allocated by Socket():{code} try {                if (LOG.isDebugEnabled()) {                    LOG.debug(""Openi",hanm,hanm
ZOOKEEPER-2441,ZooKeeper,2016-06-03T08:37:31.000+0000,Major,C API maps getaddrinfo() transient and permanent failures to the same value,https://github.com/apache/zookeeper/blob/trunk/src/c/src/zookeeper.c#L560maps getaddrinfo() return values indicating a transient failure (e.g. EAI_AGAIN) to same value (EINVAL) that zookeeper_init() u,aerdei,aerdei
ZOOKEEPER-2440,ZooKeeper,2016-06-02T21:01:32.000+0000,Major,permanent SESSIONMOVED error after client app reconnects to zookeeper cluster,"ZOOKEEPER-710 fixed the issue when the request is not a multi request. However, the multi request is handled a little bit differently as the code didn't throw the SESSIONMOVED exception. In addition, ",nerdyyatrice,nerdyyatrice
ZOOKEEPER-2439,ZooKeeper,2016-06-02T03:17:20.000+0000,Major,The order of asynchronous setACL is not correct.,"Within a given client connection, the execution of commands on the ZooKeeper server is always ordered, as both synchronous and asynchronous commands are dispatched through queuePacket (directly or ind",kazuakibanzai,kazuakibanzai
ZOOKEEPER-2438,ZooKeeper,2016-06-01T15:21:31.000+0000,Minor,Create sample program for multi client single JVM scenario.,Create sample program for multi client single JVM scenario which is handled in ZOOKEEPER-2139. ,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2437,ZooKeeper,2016-05-31T19:43:16.000+0000,Critical,Need detailed diagnostics for Zookeeper Connection Issues,"Using a zookeeper ensemble with Apache Solr, the client connection (socket) can be disconnected by either Solr or Zookeeper.  If the connection fails on the Zookeeper and we are in DEBUG mode then add",harcor,harcor
ZOOKEEPER-2436,ZooKeeper,2016-05-30T08:39:21.000+0000,Minor,Inconsistent truncation logic and out of sync logging and comments in recovery code,"Consider this scenario:# Ensemble of nodes A, B, C, D, E with A as the leader# Nodes A, B get partitioned from C, D, E# Leader A receives a write _before it detects_ that it has lost its quorum so it ",EdRowe,EdRowe
ZOOKEEPER-2435,ZooKeeper,2016-05-29T07:32:21.000+0000,Minor,miss event when the leader stop,"Hi All, In my projects, I use three ZooKeeper server as an ensemble:zk1 as a follower on 192.168.25.221,zk2 as a follower on 192.168.25.222,zk3 as the leader on 192.168.25.223.My two programs using Zo",BourneHan,BourneHan
ZOOKEEPER-2434,ZooKeeper,2016-05-29T01:56:59.000+0000,Minor,Error handling issues in truncation code,"# If FileTxnLog.truncate() is unable to delete a log file, it calls LOG.warn() but otherwise does nothing. I think this should be a fatal error not a logged warning. Otherwise those log files are goin",EdRowe,EdRowe
ZOOKEEPER-2433,ZooKeeper,2016-05-23T09:47:07.000+0000,Major,ZooKeeperSaslServer: allow user principals in subject,"The _createSaslServer_ function in ZooKeeperSaslServer +handles only service principal names+ (eg. *service_name/{color:blue}machine_name{color}@realm*), though sometimes user/service principal names ",andy_b,andy_b
ZOOKEEPER-2432,ZooKeeper,2016-05-22T16:43:41.000+0000,Major,Document how to use single thread C client API to monitor connection status.,"We need document the correct approach (use watchers combined with zookeeper_interest, select, and zookeeper_process) for monitoring connection events between client and server using single thread C li",hanm,hanm
ZOOKEEPER-2431,ZooKeeper,2016-05-22T16:37:57.000+0000,Major,C client documentation improvement,The existing documentation of C client in Programmer's Guide is incomplete and there are many TBD sections. We should improve the documentation by completing all the TBD sections and add more sample c,hanm,hanm
ZOOKEEPER-2430,ZooKeeper,2016-05-21T08:55:13.000+0000,Major,Remove jute.maxbuffer limit packetLen in client side,"jute.maxbuffer can be configured in both client and server side, if we try to getChildrenfrom a parent znode with large number of children znode, client may failed to get becauseof packetLen is more t",zhangyongxyz,zhangyongxyz
ZOOKEEPER-2429,ZooKeeper,2016-05-17T15:19:36.000+0000,Minor,IbmX509 KeyManager and TrustManager algorithm not supported,"When connecting from a zookeeper client running in IBM WebSphere Application Server version 8.5.5, with SSL configured in ZooKeeper, the below mentioned exception is observed.org.jboss.netty.channel.C",sauravmanit,sauravmanit
ZOOKEEPER-2422,ZooKeeper,2016-05-02T17:41:54.000+0000,Major,Improve health reporting by adding heap stats,"In order to improve remote monitoring of the ZooKeeper instance using tools like Icinga/NRPE, it is very desirable to expose JVM heap stats via a light-weight interface. The ""mntr"" 4lw is a good candi",evolvah,evolvah
ZOOKEEPER-2421,ZooKeeper,2016-05-02T14:56:30.000+0000,Major,testSessionReuse is commented out,This test case in SessionTest:{noformat}   testSessionReuse{noformat}is commented out.,fpj,fpj
ZOOKEEPER-2420,ZooKeeper,2016-05-02T05:13:54.000+0000,Major,Autopurge deletes log file prior to oldest retained snapshot even though restore may need it,"Autopurge retains all log files whose zxid are >= the zxid of the oldest snapshot file that it is going to retain (in PurgeTxnLog retainNRecentSnapshots()). However, unless there is a log file with th",EdRowe,EdRowe
ZOOKEEPER-2419,ZooKeeper,2016-05-01T11:12:40.000+0000,Blocker,Zookeeper.log filling up faster,"I am seeing that the /var/log/zookeeper/zookeeper.out file is getting filled up faster than usual. It has grown upto 5 GB. When I further saw the out file, lot of them are [INFO] as follows:2016-03-22",karthikban@gmail.com,karthikban@gmail.com
ZOOKEEPER-2418,ZooKeeper,2016-04-28T16:57:10.000+0000,Critical,txnlog diff sync can skip sending some transactions to followers,"If the leader is having disk issues so that its on disk txnlog is behind the in memory commit log, it will send a DIFF that is missing the transactions in between the two.Example:There are 5 hosts in ",nwolchko,nwolchko
ZOOKEEPER-2416,ZooKeeper,2016-04-26T08:02:07.000+0000,Major,Remove Java System property usage from ZooKeeper server code,"Many ZooKeeper properties are used as Java System properties in the ZooKeeper code.Some example:{code}public static int getSnapCount() {String sc = System.getProperty(""zookeeper.snapCount"");{code}{cod",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2415,ZooKeeper,2016-04-24T14:30:34.000+0000,Major,SessionTest is using Thread deprecated API.,The test class is using calls such as {{Thread.suspend}} and {{Thread.resume}}.,fpj,fpj
ZOOKEEPER-2414,ZooKeeper,2016-04-21T04:07:20.000+0000,Critical,c-client aborted when operate's path is invalid in zoo_amulti ,"code like this:{code}zoo_op_t ops[2];zoo_op_result_t results[2];zoo_create_op_init(ops, ""test"", ""1"", 1, &ZOO_OPEN_ACL_UNSAFE, 0, NULL, 0);zoo_create_op_init(ops+1, ""/test/1"", ""2"", 1, &ZOO_OPEN_ACL_UNS",johnlanni,johnlanni
ZOOKEEPER-2413,ZooKeeper,2016-04-13T18:35:50.000+0000,Major,ContainerManager doesn't close the Timer it creates when stop() is called,ContainerManager creates a Timer object. It's stop() method cancel's the running task but doesn't close the Timer itself. This ends up leaking a Thread (internal to the Timer).,randgalt,randgalt
ZOOKEEPER-2412,ZooKeeper,2016-04-12T13:32:11.000+0000,Major,"leader zk out of memory,  and leader db lastZxid is not update when process set data. ","the time begin to have problem is 20:59:47(1) out of memory log:2016-03-24 23:01:21,355 [myid:4] - INFO  [LearnerHandler-/192.168.50.26:35112:LearnerHandler@330] - Follower sid: 6 : info : org.apache.",Yongcheng,Yongcheng
ZOOKEEPER-2411,ZooKeeper,2016-04-11T09:03:44.000+0000,Major,email,,edevil,edevil
ZOOKEEPER-2410,ZooKeeper,2016-04-01T18:20:23.000+0000,Trivial,add time unit to 'ELECTION TOOK' log.info message,A three-line change to add the time unit to 'ELECTION TOOK' log.info message to help people not yet so familiar with zookeeper interpret log files.,cpoerschke,cpoerschke
ZOOKEEPER-2409,ZooKeeper,2016-04-01T06:59:51.000+0000,Major,zookeeper recipes lock's c implement: function child_floor bug,1. start zookeeper cluster with multi servers2. multi clients connect to different zookeeper server at the same time3. clients use lock from zookeeper recipes lock's C implement.for example:Client A  ,europelee,europelee
ZOOKEEPER-2408,ZooKeeper,2016-04-01T02:44:05.000+0000,Major,zoo_awget() ctx memory does not be freed if callback watcher was not invoked,"I lunch a client, then watch some node, call zoo_awget() to watch data, when the client exit, if the node data doesn't change, the callback 'watcher' won't be  invoked. and the memory of watcherCtx is",DyncKevin,DyncKevin
ZOOKEEPER-2407,ZooKeeper,2016-03-30T11:21:27.000+0000,Major,EventThread in ClientCnxn can't be closed when SendThread exits because of auth failed during reconnection,"EventThread in ClientCnxn can't be closed when SendThread exits because of auth failed during reconnection.for send thread if it is in authfailed state, the send thread exits,but the event thread is s",haitao-tony,haitao-tony
ZOOKEEPER-2406,ZooKeeper,2016-03-29T19:35:54.000+0000,Minor,/etc/zookeeper isn't used for ZOOCFGDIR,"The comment in zkEnv.sh indicates that /etc/zookeeper should be an option for the ZOOCFGDIR but the code beneath it does not look to see if it exists:{noformat}# We use ZOOCFGDIR if defined,          ",elrod@vindicia.com,elrod@vindicia.com
ZOOKEEPER-2405,ZooKeeper,2016-03-26T19:04:25.000+0000,Blocker,getTGT() in Login.java mishandles confidential information,"We're logging the kerberos ticket when in debug mode, probably not the best idea. This was identified as a ""critical"" issue by Fortify.{noformat}        for(KerberosTicket ticket: tickets) {          ",phunt,phunt
ZOOKEEPER-2404,ZooKeeper,2016-03-24T15:11:13.000+0000,Trivial,Sections to be completed in Programmer's guide document.,"There are some sections in  Programmer's guide document need to be completed, such as Read Operations, Write operations and Connecting to Zookeeper. ",Ibrahimsabat,Ibrahimsabat
ZOOKEEPER-2403,ZooKeeper,2016-03-23T20:21:13.000+0000,Trivial,Consistently handle and document boolean properties (true/false as well as yes/no),Currently zookeeper.skipACL is evaluated to be either yes or no. This is less than intuitive most developers would expect this to except true or false. https://github.com/apache/zookeeper/blob/trunk/s,Ryan P,Ryan P
ZOOKEEPER-2402,ZooKeeper,2016-03-23T12:09:42.000+0000,Major,Document client side properties,There are many ZooKeeper java client properties which are not documented. Bellow client properties are not documented in Admin Guide# zookeeper.sasl.client.username# zookeeper.sasl.clientconfig# zooke,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2401,ZooKeeper,2016-03-23T11:40:59.000+0000,Minor,Document leader.nodelay and follower.nodelay ZooKeeper server properties,"Following properties used in the zookeeper server, also configurable, but not documented in admin guide.# leader.nodelay# follower.nodelay",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2400,ZooKeeper,2016-03-23T09:00:26.000+0000,Major,ZooKeeper not starting: Follower is ahead of the leader,"Steps to reproduce:# Select deprecated algorithm in zoo.cfg: {code}electionAlg=0{code}# Start zookeeper cluster: A(index 3),B(index 1),C(index 2) nodes# Stop A node.# Make some change to zk data. i.e.",dernasherbrezon,dernasherbrezon
ZOOKEEPER-2399,ZooKeeper,2016-03-22T22:51:51.000+0000,Major,Partial Initial Patches to update Zookeeper trunk to Netty 4.x API,"These are initial patches to update Zookeeper to Netty 4.x API. They are not complete, as I am not familiar with Zookeeper or Netty. I just used Netty documents that detailed the difference in the API",wlt-ml@o-sinc.com,wlt-ml@o-sinc.com
ZOOKEEPER-2398,ZooKeeper,2016-03-22T13:11:56.000+0000,Minor,Config options should not be only available via system property,"Some config options (such as enabling readonly mode) are only settable via a system property.  This feels clunky, and makes it less seamless for testing, or for apps which embed a ZooKeeper inside a j",jbrosenberg@gmail.com,jbrosenberg@gmail.com
ZOOKEEPER-2397,ZooKeeper,2016-03-21T22:59:43.000+0000,Major,Undocumented SASL properties,"There are a number of properties spread across the code that do not appear in the docs. For example, zookeeper.allowSaslFailedClients isn't documented afaict.",fpj,fpj
ZOOKEEPER-2396,ZooKeeper,2016-03-21T22:58:58.000+0000,Major,Login object in ZooKeeperSaslClient is static,"The login object in ZooKeeperSaslClient is static, which means that if you try to create another client for tests, the login object will be the first one you've set for all runs. I've experienced this",fpj,fpj
ZOOKEEPER-2395,ZooKeeper,2016-03-21T22:48:40.000+0000,Major,allow ant command line control of junit test jvm args,"We're seeing some failing jobs (see below) and the speculation is that it might be due to ipv6 vs ipv4 usage. It would be nice to turn on ""prefer ipv4"" in the jvm but there is no easy way to do that. ",phunt,phunt
ZOOKEEPER-2394,ZooKeeper,2016-03-21T09:38:01.000+0000,Major,Many ZooKeeper properties are not configurable in zoo.cfg,"Many ZooKeeper properties are not configurable in zoo.cfg. If configured in zoo.cfg, {{QuorumPeerConfig}} parse logic will pre append ""zookeeper"" which is not the same property used in code. So a prop",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2393,ZooKeeper,2016-03-18T01:39:40.000+0000,Blocker,Revert run-time dependency on log4j and slf4j-log4j12,Zookeeper run-time dependency on log4j and slf4j-log4j12 was removed as part of ZOOKEEPER-1371 jira work.Following things were done as part of ZOOKEEPER-1371# Removed direct log4j API use from the cod,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2392,ZooKeeper,2016-03-16T14:50:04.000+0000,Minor,Update netty to 3.7.1.Final,,ceefour,ceefour
ZOOKEEPER-2391,ZooKeeper,2016-03-16T12:34:49.000+0000,Minor,setMin/MaxSessionTimeout of ZookeeperServer are implemented in quite a weak way,"setMin/MaxSessionTimeout of ZookeeperServer are implemented in quite a weak way.* -1 restores the default, but this is not documented.* values < -1 are permitted but make no sense.* min > max is permi",kazuakibanzai,kazuakibanzai
ZOOKEEPER-2390,ZooKeeper,2016-03-16T01:46:47.000+0000,Blocker,pom file needs license information,Can you add a license section to the pom file?org.apache.zookeeper:zookeeper:3.5.1-alpha does specify one currentlyAutomated tools utilize the license in the pom the ensure we're clients are using app,chengas123,chengas123
ZOOKEEPER-2389,ZooKeeper,2016-03-15T00:02:34.000+0000,Major,read-only observer doesn't load transaction log when transitioning to read-only,"I have rediscovered an issue, that was apparently posted a while back (link below).  It seems that if I configure an Observer node to be enabled for read-only mode, with syncEnabled = true, it properl",jbrosenberg@gmail.com,jbrosenberg@gmail.com
ZOOKEEPER-2388,ZooKeeper,2016-03-14T21:06:27.000+0000,Blocker,Unit tests failing on Solaris,"The same two tests are failing consistently on Solaris in 3.5/trunk (I don't see similar failures in 3.4, jenkins is mostly green there)org.apache.zookeeper.server.quorum.LocalPeerBeanTest.testClientA",phunt,phunt
ZOOKEEPER-2387,ZooKeeper,2016-03-10T11:44:13.000+0000,Major,Attempt to gracefully stop the ,"To stop ZooKeeper service, {{kill}} is issued against the ZK process. It will be good to gracefully stop all the subcomponents.",gsbiju,gsbiju
ZOOKEEPER-2386,ZooKeeper,2016-03-10T03:11:25.000+0000,Major,Cannot achieve quorum when middle server (in a q of 3) is unreacable,"Recently, we've observed a curious case where a quorum was not reached for days in a cluster of 3 nodes (zk0, zk1, zk2) and the middle node zk1 is unreachable from network. The leader election happens",enis,enis
ZOOKEEPER-2385,ZooKeeper,2016-03-09T19:45:16.000+0000,Blocker,Zookeeper trunk build is failing on windows,command {{ant tar}} fails with following error{code}D:\gitHome\zookeeperTrunk\build.xml:722: The following error occurred while executing this line:D:\gitHome\zookeeperTrunk\src\contrib\build.xml:47: ,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2384,ZooKeeper,2016-03-09T17:26:16.000+0000,Major,Support atomic increment / decrement of znode value,Use case is to store reference count (integer type) in znode.It is desirable to provide support for atomic increment / decrement of the znode value.Suggestion from Flavio:{quote}you can read the znode,yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2383,ZooKeeper,2016-03-08T17:00:14.000+0000,Blocker,Startup race in ZooKeeperServer,In attempting to upgrade Solr's ZooKeeper dependency from 3.4.6 to 3.4.8 (SOLR-8724) I ran into test failures where attempts to create a node in a newly started standalone ZooKeeperServer were failing,steve_rowe,steve_rowe
ZOOKEEPER-2382,ZooKeeper,2016-03-05T11:43:31.000+0000,Minor,Make fsync.warningthresholdms property configurable through zoo.cfg,Currently {{fsync.warningthresholdms}} property can be set as a Java system property. But it would help if this property can be made configurable through {{zoo.cfg}} so that configuration management t,gsbiju,gsbiju
ZOOKEEPER-2381,ZooKeeper,2016-03-04T08:35:58.000+0000,Major,ReconfigTest.testPortChange has been failing intermittently,"ReconfigTest.testPortChange has been failing intermittently:- Feb 12, 2016: https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3045/- Feb 16, 2015: http://permalink.gmane.org/gmane.comp.java.zook",suda,suda
ZOOKEEPER-2380,ZooKeeper,2016-03-04T05:32:18.000+0000,Blocker,Deadlock between leader shutdown and forwarding ACK to the leader,"Zookeeper enters into deadlock while shutting down itself, thus making zookeeper service unavailable as deadlocked server is a leader. Here is the thread dump:{code}""QuorumPeer[myid=1](plain=/0:0:0:0:",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2379,ZooKeeper,2016-03-03T15:22:12.000+0000,Blocker,recent commit broke findbugs qabot check,"A recent commit seems to have broken findbugs, looks like it's in ZooKeeperSaslClientsee:https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3075//artifact/trunk/build/test/findbugs/newPatchFindbu",phunt,phunt
ZOOKEEPER-2378,ZooKeeper,2016-03-03T07:03:38.000+0000,Critical,upgrade ivy to recent version,2.4.0 is the current version.,phunt,phunt
ZOOKEEPER-2377,ZooKeeper,2016-02-26T03:09:06.000+0000,Minor,zkServer.sh should resolve canonical path from symlinks,"If zkServer.sh is started from a symlink, it is not able to correctly source the other scripts because it looks in the wrong path.Attached patch fixes this by first resolving absolute path to the scri",sdh,sdh
ZOOKEEPER-2376,ZooKeeper,2016-02-25T19:45:05.000+0000,Major,Server fails to start if there is a zero-length TxnLog file present in the log directory,"If there is an empty TxnLog file in the log file folder, ZooKeeper server fails to start. This is the exception it logs:2015-11-02 07:41:10.479 -0600 (,,,) main : ERROR org.apache.zookeeper.server.Zoo",dryabkov,dryabkov
ZOOKEEPER-2375,ZooKeeper,2016-02-25T09:18:19.000+0000,Blocker,Prevent multiple initialization of login object in each ZooKeeperSaslClient instance,"If there are exist many ZooKeeperSaslClient instance in one process,each ZooKeeperSaslClient instance will be call synchronize method( createSaslClient),But each ZooKeeperSaslClient instance will be l",yuemeng,yuemeng
ZOOKEEPER-2374,ZooKeeper,2016-02-24T12:28:08.000+0000,Blocker,Can not telnet 2181 port on aws ec2 server,"This is the second time I faced the problem on ec2, my activemq stomp port have the same problem, but tcp message port works fine.I have checked zookeeper.out, no error log found. And aws technical su",zhufeizzz,zhufeizzz
ZOOKEEPER-2373,ZooKeeper,2016-02-24T00:02:58.000+0000,Blocker,Licenses section missing from pom file,The pom file here:https://repo1.maven.org/maven2/org/apache/zookeeper/zookeeper/3.4.8/zookeeper-3.4.8.pomshould have a section like this:{noformat}<licenses>    <license>         <name>The Apache Soft,fpj,fpj
ZOOKEEPER-2372,ZooKeeper,2016-02-23T15:18:57.000+0000,Minor,Add ability to specify user under which zookeeper process should be started using zkServer.sh,Currently the zkServer.sh script will start zookeeper as the user invoking the script.It would be good to add the ability to specify the user (maybe in a $USER variable in conf/zookeeper-env.sh) under,sdh,sdh
ZOOKEEPER-2371,ZooKeeper,2016-02-23T15:13:17.000+0000,Minor,zkServer.sh status does not work if JMX Port is enabled,"If I try to execute 'bin/zkServer.sh status' while having'-Dcom.sun.management.jmxremote.port=9011' in $JVMFLAGS,zookeeper quits with ""Error: Exception thrown by the agent : java.rmi.server.ExportExce",sdh,sdh
ZOOKEEPER-2370,ZooKeeper,2016-02-23T07:19:10.000+0000,Major,Can't access Znodes after adding ACL with SASL,"(My apology if this is not a bug.)I'm trying to use a ZK client which has successfully authenticated with a secure ZK server using principal {{me/hostname@EXAMPLE.COM}}. However, the following simple ",csun,csun
ZOOKEEPER-2369,ZooKeeper,2016-02-18T09:13:12.000+0000,Minor,Flushing DataOutputStream before calling toByteArray on the underlying ByteArrayOutputStream,In ./src/java/main/org/apache/zookeeper/server/ZooKeeperServer.java{code}            ByteArrayOutputStream baos = new ByteArrayOutputStream();            BinaryOutputArchive bos = BinaryOutputArchive.,emopers,emopers
ZOOKEEPER-2368,ZooKeeper,2016-02-15T09:28:10.000+0000,Major,Client watches are not disconnected on close,If I have a ZooKeeper client connected to an ensemble then obviously I can register watches. If the client is disconnected (for example by a failing ensemble member) then I get a disconnection event f,timothyjward,timothyjward
ZOOKEEPER-2367,ZooKeeper,2016-02-12T18:52:08.000+0000,Critical,Unable to establish quorum when hostnames are not resolvable between all of the nodes,"If I have a set of three machines, all of which have locally defined hostnames A, B and C (i.e. B and C cannot look up A by name). I am unable to control the DNS setup, and I don't want to manually re",timothyjward,timothyjward
ZOOKEEPER-2366,ZooKeeper,2016-02-12T16:59:27.000+0000,Blocker,Reconfiguration of client port causes a socket leak,"The NIOServerCnxnFactory reconfigure method can leak server sockets, and hence make ports unusable until the JVM restarts:The first line of the method takes a reference to the current ServerSocketChan",timothyjward,timothyjward
ZOOKEEPER-2365,ZooKeeper,2016-02-10T22:24:53.000+0000,Trivial,JAAS configuration section error is confusing,"I have zookeeper running normally just fine in a 3-server cluster.Then I try to configure zookeeper to use Kerberos, following docs in the Solr wiki here: https://cwiki.apache.org/confluence/display/s",dgfitch,dgfitch
ZOOKEEPER-2364,ZooKeeper,2016-02-08T21:36:14.000+0000,Blocker,"""ant docs"" fails on branch-3.5 due to missing releasenotes.xml.","""ant docs"" is failing on branch-3.5.  (Both trunk and branch-3.4 are fine.)  The root cause appearsto be a missing file on branch-3.5: src/docs/src/documentation/content/xdocs/releasenotes.xml. This c",cnauroth,cnauroth
ZOOKEEPER-2363,ZooKeeper,2016-02-05T17:09:17.000+0000,Major,DatadirCleanupManager never created by ZookeeperServerMain,h4. BackgroundZOOKEEPER-1107 introduced a DatadirCleanupManager to automatically purge snapshots. This can be configured using autopurge.snapRetainCount and autopurge.purgeInterval. This is documented,dforegger,dforegger
ZOOKEEPER-2362,ZooKeeper,2016-02-05T15:32:05.000+0000,Critical,ZooKeeper multi / transaction allows partial read,"In this thread http://mail-archives.apache.org/mod_mbox/zookeeper-user/201602.mbox/%3CCAPbqGzicBkLLyVDm7RFM20z0y3X1v1P-C9-1%3D%3D1DDqRDTzdOmQ%40mail.gmail.com%3E , I discussed an issue I've now seen i",wsorenson,wsorenson
ZOOKEEPER-2361,ZooKeeper,2016-02-04T18:02:58.000+0000,Minor,Revisit 'VisibleForTesting' phrase used to indicate a member or method visible for testing,ZooKeeper uses {{// VisibleForTesting}} comment to indicate a member or method which is visible for unit testing. The idea of this jira is to discuss better ways to convey the message more clear and i,rakeshr,rakeshr
ZOOKEEPER-2360,ZooKeeper,2016-02-04T17:33:02.000+0000,Blocker,Update commons collections version used by tests/releaseaudit,"I don't believe this affects us from a security perspective directly, however it's something we should clean up in our next release.Afaict the only commons we use for shipping/production code is commo",phunt,phunt
ZOOKEEPER-2359,ZooKeeper,2016-02-04T13:30:27.000+0000,Major,ZooKeeper client has unnecessary logs for watcher removal errors,"ClientCnxn.java logs errors during watcher removal:LOG.error(""Failed to find watcher!"", nwe);LOG.error(""Exception when removing watcher"", ke);An error code/exception is generated so the logs are noisy",randgalt,randgalt
ZOOKEEPER-2358,ZooKeeper,2016-01-28T02:35:00.000+0000,Major,NettyServerCnxn leaks watches upon close,"NettyServerCnxn.close() neglects to call zkServer.removeCnxn the way NIOServerCnxn.close() does. Also, WatchLeakTest does not test watch leaks in Netty.",iandi,iandi
ZOOKEEPER-2357,ZooKeeper,2016-01-22T16:26:28.000+0000,Minor,Unhandled errors propagating through cluster,"Hi,I need some help understanding a recurring problem we're seeing with our zookeeper cluster.  It's a five node cluster that ordinarily runs fine.  Occasionally we see an error from which the cluster",gareth.humphries.ig,gareth.humphries.ig
ZOOKEEPER-2356,ZooKeeper,2016-01-21T02:12:06.000+0000,Major,SaslServer don't keep user information.Cant find who create the znode.,"as zookeper data only keep data like this,will not keep any user information for create user then don't know who create this znode in Sasl Auth env  hope zookeper can store create/modify user inform",beeflyme,beeflyme
ZOOKEEPER-2355,ZooKeeper,2016-01-18T14:54:29.000+0000,Critical,Ephemeral node is never deleted if follower fails while reading the proposal packet,"ZooKeeper ephemeral node is never deleted if follower fail while reading the proposal packetThe scenario is as follows:# Configure three node ZooKeeper cluster, lets say nodes are A, B and C, start al",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2354,ZooKeeper,2016-01-12T15:20:43.000+0000,Major,ZOOKEEPER-1653 not merged in master and 3.5 branch,ZOOKEEPER-1653 is merged only to 3.4 branch. It should be merged to 3.5 and master branch as well.,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2353,ZooKeeper,2016-01-11T19:54:00.000+0000,Major,QuorumCnxManager protocol needs to be upgradable with-in a specific Version,Currently 3.5.X sends its hdr as follows:{code:title=QuorumCnxManager.java|borderStyle=solid}dout.writeLong(PROTOCOL_VERSION);dout.writeLong(self.getId());String addr = self.getElectionAddress().getHo,geek101,geek101
ZOOKEEPER-2352,ZooKeeper,2016-01-05T20:14:28.000+0000,Major,rpm build broke,"rpm cd to the BUILD directory, delete the directory it just cd to.  What was going on from that point was that it called some script which was loading /bin/bash and crashed since getcwd cannot a",wding,wding
ZOOKEEPER-2351,ZooKeeper,2016-01-04T03:34:00.000+0000,Major,%JAVA_HOME% in bin\zkEnv.cmd does not work on Windows 8 and Windows 10,"%JAVA_HOME% does not work in zkEnv.cmd, so zkServer.cmd and zkClient.cmd can not run and zookeeper can not start.Temporary solution to this is to use quotation marks ""%JAVA_HOME%"" to replace %JAVA_HOM",leonllyu@gmail.com,leonllyu@gmail.com
ZOOKEEPER-2350,ZooKeeper,2015-12-28T01:33:06.000+0000,Minor,Script that provide a way to build the ensemble with ease.,"Starting with 3.5.0, ZooKeeper has already supported a very convenient dynamic reconfiguration. However, the procedure is slightly complicated. So I propose adding a script to build ensemble with ease",minoru,minoru
ZOOKEEPER-2349,ZooKeeper,2015-12-21T14:17:50.000+0000,Minor,Update documentation for snapCount,The documentation states that {code}ZooKeeper logs transactions to a transactionlog. After snapCount transactions are written to a logfile a snapshot is started and a new transaction logfile is create,rprabhu,rprabhu
ZOOKEEPER-2348,ZooKeeper,2015-12-18T10:17:51.000+0000,Major,Data between leader and followers are not synchronized.,"When client session expired, leader tried to remove it from session map and remove its EPHEMERAL znode, for example, /test_znode. This operation succeed on leader, but at the very same time, network f",Chenningning,Chenningning
ZOOKEEPER-2347,ZooKeeper,2015-12-16T21:01:10.000+0000,Blocker,Deadlock shutting down zookeeper,"HBase recently upgraded to zookeeper 3.4.7In one of the tests, TestSplitLogManager, there is reproducible hang at the end of the test.Below is snippet from stack trace related to zookeeper:{code}""main",yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2346,ZooKeeper,2015-12-15T17:59:46.000+0000,Major,SASL Auth failure manifested to client as connection refusal,"If a client can't authenticate via sasl then (a) the stack trace is lost on the server logs, and (b) it is exposed to the client as a connection refusal. This results in curator retrying many times be",stevel@apache.org,stevel@apache.org
ZOOKEEPER-2345,ZooKeeper,2015-12-15T17:50:24.000+0000,Major,ServerCnxnFactory.configureSaslLogin() loses stack trace on auth failures,"When there's a problem authenticating in {{ServerCnxnFactory.configureSaslLogin() }}, the exception is retained -but the full stack lost.",stevel@apache.org,stevel@apache.org
ZOOKEEPER-2344,ZooKeeper,2015-12-15T17:47:23.000+0000,Major,Provide more diagnostics/stack traces on SASL Auth failure,"When Kerberos decides it doesn't want to work, the JRE libraries provide some terse and unhelpful error messages.The only way to debug the problem is (a) to have complete stack traces and (b) as much ",stevel@apache.org,stevel@apache.org
ZOOKEEPER-2343,ZooKeeper,2015-12-15T11:06:54.000+0000,Major,Zookeeper 3.5.1 failed to deploy into the kubernetes,"I'd like to setup 3-nodes zookeeper cluster with version 3.5.1. Because the network model of kubernetes is that pod and service has different ip address.  In order to deploy it into kubernetes, I have",cheyang,cheyang
ZOOKEEPER-2342,ZooKeeper,2015-12-10T00:59:31.000+0000,Major,Migrate to Log4J 2.,ZOOKEEPER-1371 removed our source code dependency on Log4J.  It appears that this also removed the Log4J SLF4J binding jar from the runtime classpath.  Without any SLF4J binding jar available on the r,cnauroth,cnauroth
ZOOKEEPER-2341,ZooKeeper,2015-12-09T22:13:06.000+0000,Trivial,bin/zkEnv.cmd needs quotes around %JAVA%,"I just downloaded ZooKeeper 3.4.7 (wouldn't let me put that version in the ""Affects Version/s"" field) and it doesn't work out of the box on Windows 7, which is brutal for folks who don't understand.It",kmortensen@basistech.com,kmortensen@basistech.com
ZOOKEEPER-2340,ZooKeeper,2015-12-09T05:33:57.000+0000,Minor,JMX is disabled even if JMXDISABLE is false,"Currently, to enable jmx for zookeeper, need to comment the property JMXDISABLE as JMXDISABLE=false continues to disable JMX.",neha.bathra,neha.bathra
ZOOKEEPER-2339,ZooKeeper,2015-12-08T23:39:19.000+0000,Major,Document differences in ZooKeeper usage on Windows.,The ZooKeeper documentation focuses primarily on usage for Unix-like systems.  There are some small differences in usage on Windows.  It would be good to enhance the documentation to cover this.,cnauroth,cnauroth
ZOOKEEPER-2338,ZooKeeper,2015-12-08T16:57:26.000+0000,Major,c bindings should create socket's with SOCK_CLOEXEC to avoid fd leaks on fork/exec,I've observed socket FD leaks in Apache Mesos when using ZK to coordinate master leadership: https://issues.apache.org/jira/browse/MESOS-4065,jdef,jdef
ZOOKEEPER-2337,ZooKeeper,2015-12-08T15:14:52.000+0000,Major,"Fake ""invalid"" hostnames used in tests are sometimes valid","Some of the ZooKeeper tests use ""fake"" hostnames to trigger host resolution failures. The problem with this is that it uses valid hostnames which are sometimes configured in VMs.At the moment I am una",timothyjward,timothyjward
ZOOKEEPER-2336,ZooKeeper,2015-12-07T08:12:04.000+0000,Major,Jenkins not working due to old SVN,"Jenkins seems not working since Build #2976 (Dec 6, 2015) due to SVN.https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2976/console{panel}     [exec] svn: E155036: Please see the 'svn upgrade' c",suda,suda
ZOOKEEPER-2335,ZooKeeper,2015-12-06T05:28:53.000+0000,Major,Java Compilation Error in ClientCnxn.java,There  are some compilation error in latest trunk code.{code}[javac] D:\gitHome\zookeeperTrunk\src\java\main\org\apache\zookeeper\ClientCnxn.java:49: error: package org.apache.log4j does not exist    ,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2334,ZooKeeper,2015-12-04T20:19:13.000+0000,Major,Zookeeper Archives Out Date,"The Zookeeper download page and mirrors only track the latest version of the mirror release versions.  The page has a link to the archives page at archive.apache.org, but that page is missing all rele",elevy,elevy
ZOOKEEPER-2332,ZooKeeper,2015-11-27T13:42:02.000+0000,Critical,Zookeeper failed to start for empty txn log,We found that the zookeeper server with version 3.4.6 failed to start for there is a empty txn log in log dir.  I think we should skip the empty log file during restoring the datatree. Any suggestion?,liushaohui,liushaohui
ZOOKEEPER-2331,ZooKeeper,2015-11-26T16:39:24.000+0000,Minor,Many instances of ZookeeperSaslClient in one process - every instance should use different jaas config section.,"First of all I don't know if ""Wish"" is the best task type for it. I just want to ask you a question.Why login field in ZooKeeperSaslClient is a static one?https://github.com/apache/zookeeper/blob/trun",piotr.a.chmielinski@intel.com,piotr.a.chmielinski@intel.com
ZOOKEEPER-2330,ZooKeeper,2015-11-23T10:03:46.000+0000,Major,ZooKeeper close API does not close Login thread.,"When kerberos is used as authentication mechanism, one login thread runs in the background for ZooKeeper client as well ZooKeepr server.This problem is related to Zookeeper client and the scenario is ",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2329,ZooKeeper,2015-11-21T21:41:16.000+0000,Minor,Clear javac and javadoc warning from zookeeper,Currently ZooKeeper java code has 10 javac and 1 javadoc warning. These should be removed.*javac warnings*{noformat}[javac] Compiling 228 source files to D:\gitHome\zookeeperTrunk\build\classes    [ja,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2328,ZooKeeper,2015-11-20T23:48:09.000+0000,Major,Connection broken for id 1,"Hi, We have a 3 node zookeeper running with 3.4.6 version. myId 1 (leader) and 2 (follower) are working fine, myId 3 node starts successfully but when we check the status, we see below error, we also ",arungujjar_azul,arungujjar_azul
ZOOKEEPER-2327,ZooKeeper,2015-11-20T01:16:11.000+0000,Major,"""ConnectionLoss for /dog""","Zookeeper v3.5.0-alpha experiences an error when trying to create a simple data node.Versions before and after 3.5.0-alpha work just fine, but this specific version oddly fails to create data nodes.So",mcandre,mcandre
ZOOKEEPER-2326,ZooKeeper,2015-11-18T22:23:47.000+0000,Minor,Include connected server address:port in log,"Currently ZooKeeper client log contains blank myid as bellow{noformat}2015-11-18 23:46:39,045 [myid:] - INFO  [main-SendThread(192.168.1.3:2183):ClientCnxn$SendThread@1138] - Opening socket connection",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2325,ZooKeeper,2015-11-18T22:21:56.000+0000,Critical,Data inconsistency if all snapshots empty or missing,"When loading state from snapshots on startup, FileTxnSnapLog.java ignores the result of FileSnap.deserialize, which is -1L if no valid snapshots are found. Recovery proceeds with dt.lastProcessed == 0",agrasso,agrasso
ZOOKEEPER-2324,ZooKeeper,2015-11-18T21:56:56.000+0000,Major,Make Client authentication mechanism change optional,Currently if ZooKeeper Client fails to authenticate using kerberos GSSAPI mechanism it automatically switches to DIGEST-MD5 authentication mechanism. This should be configurable. whether to switch to ,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2323,ZooKeeper,2015-11-18T20:29:53.000+0000,Major,ZooKeeper client enters into infinite AuthFailedException cycle if its unable to recreate Kerberos ticket,ZooKeeper client enters into infinite AuthFailedException cycle. For every operation its throws AuthFailedExceptionHere is the create operation exception{code}org.apache.zookeeper.KeeperException$Auth,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2322,ZooKeeper,2015-11-16T11:38:03.000+0000,Minor,Zookeeper server throws NullPointerExceptions while revalidating the session to the client,"This happened with a long run scenario where the client is connected to Zk and leader re-election happens in some time interval StackTrace:2015-11-05 03:15:42,953 [myid:1] - WARN [NIOWorkerThread-6:Wo",neha.bathra,neha.bathra
ZOOKEEPER-2321,ZooKeeper,2015-11-14T00:12:07.000+0000,Major,C-client session watcher removal is not thread safe,Invoking the C-client API function {{zoo_set_watcher()}} to remove/change a session event watcher is not a thread-safe operation. The IO thread accesses the session watcher (the one stored in the zhan,Hadriel,Hadriel
ZOOKEEPER-2320,ZooKeeper,2015-11-12T23:37:38.000+0000,Major,"C-client crashes when removing watcher asynchronously in ""local"" mode","The C-client library will crash when invoking the asynchronous {{zoo_aremove_watchers()}} API function with the '{{local}}' argument set to 1.The reason is: if the local argument is 1/true, then the c",Hadriel,Hadriel
ZOOKEEPER-2319,ZooKeeper,2015-11-09T23:36:16.000+0000,Major,UnresolvedAddressException cause the QuorumCnxManager.Listener exit,"Given three nodes, the leader on 2, but some issue with this machine, so I shutdown this machine, and change the host name to another machine.Then I start the node in the new machine, but the new node",yuyijq,yuyijq
ZOOKEEPER-2318,ZooKeeper,2015-11-09T17:26:31.000+0000,Major,segfault in auth_completion_func,We have seen some sporadic issues with unexplained segfaults inside auth_completion_func. The interesting thing is we are not using any auth mechanism at all. This happened against this version of the,marshall,marshall
ZOOKEEPER-2317,ZooKeeper,2015-11-09T10:59:30.000+0000,Blocker,Non-OSGi compatible version,"Bundle cannot be deployed to OSGi container.Manifest version is not OSGi compatible.Instead of using 3.5.1-alpha, manifest needs to contain 3.5.1.alpha",niveau0,niveau0
ZOOKEEPER-2316,ZooKeeper,2015-11-06T14:34:52.000+0000,Trivial,comment does not match code logic,"when i read the code below, the comment is put in an incorrect,place."" // in order to be committed, a proposal must be accepted by a quorum ""should be place on top of :   if (!p.hasAllQuorums()) {    ",haitao-tony,haitao-tony
ZOOKEEPER-2315,ZooKeeper,2015-11-06T03:29:34.000+0000,Minor,Change client connect zk service timeout log level from Info to Warn level,"Recently my the resourmanager  of my hadoop cluster is fail suddenly,so I look into the rsourcemanager log.But the log is not helpful for me to direct find the reson until I found the zk timeout info ",linyiqun,linyiqun
ZOOKEEPER-2314,ZooKeeper,2015-11-05T16:26:03.000+0000,Major,Improvements to SASL,"Points that occur to me right now:# The login object in ZooKeeperSaslClient is static, which means that if you try to create another client for tests, the login object will be the first one you've set",fpj,fpj
ZOOKEEPER-2313,ZooKeeper,2015-11-04T10:23:32.000+0000,Minor,"Refactor ZooKeeperServerBean and its subclasses (LeaderBean, ObserverBean, FollowerBean)","Following the work on ZOOKEEPER-2142, the goal of this ticket is to add a new constructor to ZooKeeperServerBean to pass the name as the parameter, so classes that extend from ZooKeeperServerBean shou",eribeiro,eribeiro
ZOOKEEPER-2312,ZooKeeper,2015-11-04T03:53:16.000+0000,Minor,Fix arrow direction in the 2-phase commit diagram in Zookeeper internal docs,https://zookeeper.apache.org/doc/r3.3.3/zookeeperInternals.htmlLeader issues *commit request* to followers once the ack received from the followers. But the 2-phase commit diagram shows the direction ,raju.bairishetti,raju.bairishetti
ZOOKEEPER-2311,ZooKeeper,2015-11-02T20:24:54.000+0000,Major,assert in setup_random,We've started seeing an assert failing inside setup_random at line 537:{code} 528 static void setup_random() 529 { 530 #ifndef _WIN32          // TODO: better seed 531     int seed; 532     int fd = o,marshall,marshall
ZOOKEEPER-2310,ZooKeeper,2015-11-01T06:26:33.000+0000,Major,Snapshot files must be synced to prevent inconsistency or data loss,"Today, Zookeeper server syncs transaction log files to disk by default, but does not sync snapshot files.  Consequently, an untimely crash may result in a lost or incomplete snapshot file.  During rec",abhishekrai,abhishekrai
ZOOKEEPER-2309,ZooKeeper,2015-10-30T15:07:52.000+0000,Blocker,TestClient fails,"I'm getting this out of a fresh copy of branch-3.4.{noformat}tests/TestClient.cc:375: Assertion: equality assertion failed [Expected: -101, Actual  : -4]tests/TestClient.cc:300: Assertion: assertion f",fpj,fpj
ZOOKEEPER-2308,ZooKeeper,2015-10-29T16:57:37.000+0000,Major,Warning messages in the zookeeper logs,"telnet localhost 2181 gives the following warning messages.2015-07-08 09:26:13,785 - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@347] - caught end of stream exceptionEndOfStreamExce",srameshg,srameshg
ZOOKEEPER-2307,ZooKeeper,2015-10-29T15:12:25.000+0000,Critical,ZooKeeper not starting because acceptedEpoch is less than the currentEpoch,"This issue occurred in one of our test environment where disk was being changed to read only very frequently.The the scenario is as follows:# Configure three node ZooKeeper cluster, lets say nodes are",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2306,ZooKeeper,2015-10-28T07:41:23.000+0000,Major,Remove file delete duplicate  code from test code,Code to delete a folder recursive is written in multiple test files. Following are the files containing the same piece of code.{code}src/java/systest/org/apache/zookeeper/test/system/QuorumPeerInstanc,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2305,ZooKeeper,2015-10-27T11:48:05.000+0000,Major,created,"deleteChild method in Pathtrie class, childNode.getChildren().length == 1, why not  childNode.getChildren().length == 0 ?",shengfeng,shengfeng
ZOOKEEPER-2304,ZooKeeper,2015-10-26T11:47:15.000+0000,Major,JMX ClientPort from ZooKeeperServerBean incorrect,"The ""ClientPort"" property of {{org.apache.zookeeper.server.ZooKeeperServerBean}} returns incorrect value. It includes address also like 192.168.1.2:2183. It should return only port",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2303,ZooKeeper,2015-10-25T15:46:40.000+0000,Critical,Zookeeper fails to compile (mesos driver) on Raspberry Pi2,"Trying to compile mesos on Raspberry Pi 2. Zookeeper builds ok with ant directly (Java only), but when using make for mesos it trys to compile the C code and this fails with the error:libtool: compile",stevef1uk,stevef1uk
ZOOKEEPER-2302,ZooKeeper,2015-10-25T10:52:43.000+0000,Major,Some test cases are not running because wrongly named,When run ZooKeeper test cases following two test classes never run because wrong naming convention is followed.{code}org.apache.zookeeper.server.quorum.TestQuorumPeerConfigorg.apache.zookeeper.server.,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2301,ZooKeeper,2015-10-25T09:44:22.000+0000,Major,QuorumPeer does not listen on passed client IP in the constructor,"QuorumPeer does not listen on passed client IP in the constructor, for client  connection. It always listens on all IP(0.0.0.0 or 0:0:0:0:0:0:0:0). This happens only when QuorumPeer is created using a",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2300,ZooKeeper,2015-10-25T07:07:09.000+0000,Major,Expose SecureClientPort and SecureClientAddress JMX properties,ZooKeeper currently exposes ClientPort and ClientAddress JMX properties. Same way we should expose SecureClientPort and SecureClientAddress.The values for these two properties will be decided based on,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2299,ZooKeeper,2015-10-22T09:28:54.000+0000,Major,NullPointerException in LocalPeerBean for ClientAddress,When clientPortAddress is not configured LocalPeerBean throws NullPointerException.*Expected Behavior:*# When only clientPort is configured ClientAddress value should be 0.0.0.0:clientPort or 0:0:0:0:,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2298,ZooKeeper,2015-10-22T04:31:22.000+0000,Minor,zookeeper: Should retry on EAI_NONAME return from getaddrinfo(),"The zookeeper interface is designed to retry (once per second for up to ten minutes) if one or more of the Zookeeper hostnames can't be resolved (see [MESOS-1326] and [MESOS-1523]).However, the curren",neilc,neilc
ZOOKEEPER-2297,ZooKeeper,2015-10-19T11:38:58.000+0000,Blocker,"NPE is thrown while creating ""key manager"" and ""trust manager"" ","NPE is thrown while creating ""key manager"" and ""trust manager"" , even though the zk setup is in non-secure modebq. 2015-10-19 12:54:12,278 [myid:2] - ERROR [ProcessThread(sid:2 cport:-1)::X509Authenti",anushri,anushri
ZOOKEEPER-2296,ZooKeeper,2015-10-18T21:08:34.000+0000,Blocker,compilation broken for 3.4,"Apparently, ZOOKEEPER-2253 wasn't fully backported from trunk so it doesn't compile now. We should make sure jenkins runs for 3.4, to catch these issues in the future. ",rgs,rgs
ZOOKEEPER-2295,ZooKeeper,2015-10-17T06:32:53.000+0000,Major,TGT refresh time logic is wrong,When Kerberos is used as authentication mechanism some time TGT is getting expired because it is not refreshed timely.The scenario is as follow:suppose now=8 (the current milliseconds)next refresh tim,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2294,ZooKeeper,2015-10-14T19:50:48.000+0000,Major,Ant target generate-clover-reports is broken,It appears that the current implementation of 'generate-clover-reports' is broken. # It doesn't define the  clover-report task # The clover-report element is missing the proper clover db reference ,chelin,chelin
ZOOKEEPER-2293,ZooKeeper,2015-10-14T07:56:57.000+0000,Minor,"Incorrect log level 'warn'  is resulting in clutering of logs, Suggest to demote it to DEBUG from WARN",In https://svn.apache.org/repos/asf/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/ZooKeeperServer.javaIf readOnly flag is not being sent it gets logged as warning. Since we have enabled wa,pmanvi,pmanvi
ZOOKEEPER-2292,ZooKeeper,2015-10-13T23:12:03.000+0000,Major,Sign the download package,"Current ZK is made available for download as a compressed archive.  Within the archive, there is a cryptographic signature for the ZK JAR file. Alas, the signature does not cover any of the other exec",elevy,elevy
ZOOKEEPER-2291,ZooKeeper,2015-10-13T15:41:05.000+0000,Minor,JMX log should not be printed while stopping ZK Server,"While stopping zookeeper prints below message :""ZooKeeper JMX enabled by defaultZooKeeper remote JMX Port set to 2022ZooKeeper remote JMX authenticate set to falseZooKeeper remote JMX ssl set to false",neha.bathra,neha.bathra
ZOOKEEPER-2290,ZooKeeper,2015-10-12T03:40:14.000+0000,Minor,Add read/write qps metrics in monitor cmd,Read/write qps are important metrics to show the pressure of the cluster. We can also use it to alert about some abuse of zookeeper.,liushaohui,liushaohui
ZOOKEEPER-2289,ZooKeeper,2015-10-10T22:50:30.000+0000,Major,"Support use of SASL ""auth-int"" and ""auth-conf"" quality of protection.","The current codebase supports use of SASL for authenticating connections, but it does not allow specifying the desired SASL Quality of Protection (QOP).  It always uses the default QOP, which is ""auth",cnauroth,cnauroth
ZOOKEEPER-2288,ZooKeeper,2015-10-10T22:16:24.000+0000,Major,"During shutdown, server may fail to ack completed transactions to clients.","During shutdown, requests may still be in flight in the request processing pipeline.  Some of these requests have reached a state where the transaction has executed and committed, but has not yet been",cnauroth,cnauroth
ZOOKEEPER-2287,ZooKeeper,2015-09-30T11:17:41.000+0000,Major,Audit logging the zookeeper operations,As of now Zookeeper does not support auditing the user operationsThis is a very important tracability in distributed cluster to trace the operationsWe can have a separate logger and log file.Can start,nijel,nijel
ZOOKEEPER-2286,ZooKeeper,2015-09-29T07:22:47.000+0000,Minor,Doc Issue,"First, thanks for your detail documents. It's very helpful.In this one ""Programming with ZooKeeper - A basic tutorial""(URL: https://zookeeper.apache.org/doc/trunk/zookeeperTutorial.html)The demo code ",richard.zhao,richard.zhao
ZOOKEEPER-2285,ZooKeeper,2015-09-28T21:25:05.000+0000,Major,QuorumTest's ignored test case causes wrong CI pre-commit feedback,# test case {{org.apache.zookeeper.test.QuorumTest.testSessionMove()}} is marked ignored by ZOOKEEPER-907# Most of the CI pre-commit feedback is -1 because of above ignored test case.# Test case is lo,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2284,ZooKeeper,2015-09-28T18:27:56.000+0000,Minor,LogFormatter and SnapshotFormatter does not handle FileNotFoundException gracefully,"{{LogFormatter}} and {{SnapshotFormatter}} does not handle FileNotFoundException gracefully. If file no exist then these classes propagate the exception to console.{code}Exception in thread ""main"" jav",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2283,ZooKeeper,2015-09-28T17:47:19.000+0000,Major,"traceFile property is not used in the ZooKeeper,  it should be removed from documentation","zookeeperAdmin guide have following description for traceFile property{noformat}traceFile(Java system property: requestTraceFile)If this option is defined, requests will be will logged to a trace file",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2282,ZooKeeper,2015-09-28T17:19:48.000+0000,Critical,chroot not stripped from path in asynchronous callbacks,"Callbacks passed to [zoo_acreate], [zoo_async], and [zoo_amulti] (for create ops) are called on paths that include the chroot. This is analagous to issue 1027, which fixed this bug for synchronous cal",agrasso,agrasso
ZOOKEEPER-2281,ZooKeeper,2015-09-23T14:43:57.000+0000,Minor,ZK Server startup fails if there are spaces in the JAVA_HOME path,Zookeeper startup fails if there are spaces in the %JAVA_HOME% variable. {code}if not exist %JAVA_HOME%\bin\java.exe (  echo Error: JAVA_HOME is incorrectly set.  goto :eof)set JAVA=%JAVA_HOME%\bin\ja,neha.bathra,neha.bathra
ZOOKEEPER-2280,ZooKeeper,2015-09-22T01:13:24.000+0000,Major,NettyServerCnxnFactory doesn't honor maxClientCnxns param,Even though NettyServerCnxnFactory has maxClientCnxns (default to 60) it doesn't enforce this limit in the code.,eribeiro,eribeiro
ZOOKEEPER-2279,ZooKeeper,2015-09-21T15:10:25.000+0000,Major,QuorumPeer  loadDataBase() error message is incorrect,"in  loadDataBase() method, the below info is incorrect. if (acceptedEpoch < currentEpoch) {                throw new IOException(""The current epoch, "" + ZxidUtils.zxidToString(currentEpoch) + "" is les",haitao-tony,haitao-tony
ZOOKEEPER-2278,ZooKeeper,2015-09-18T12:50:21.000+0000,Major,4lw command stmk throws NullPointerException,run echo stmk 123 | netcat <hostname> <port> fails with NullPointerException,neha.bathra,neha.bathra
ZOOKEEPER-2277,ZooKeeper,2015-09-16T16:29:12.000+0000,Major,Zookeeper off-line snapshot and transaction log viewer,"{color:blue}Currently ZooKeeper provides utility java program to view the snapshot and transaction off-line but these are not easy to use, also the content is less understandable {color}In this improv",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2276,ZooKeeper,2015-09-15T05:54:38.000+0000,Minor,Multi operation failure  does not include path in KeeperException,"With normal create operation, the path of the failed node is displayed in KeeperException but this is not the case when create operation is through multi api",neha.bathra,neha.bathra
ZOOKEEPER-2275,ZooKeeper,2015-09-14T20:21:34.000+0000,Major,Fix RPM package creation on recent distros,"Three issues with RPM package building, The install stage was removing BUILDROOT content:[rpm] + rm -rf /tmp/zkpython_build_rpm/BUILDSince BUILD and BUILDROOT are actually the same folder, everything ",Ormod,Ormod
ZOOKEEPER-2274,ZooKeeper,2015-09-11T17:46:26.000+0000,Major,ZooKeeperServerMain is difficult to subclass for unit testing,"Apache Curator needs a testable version of ZooKeeperServerMain. In the past, Curator has used javassist, reflection, etc. but this is all clumsy. With a few trivial changes, Curator could use ZooKeepe",randgalt,randgalt
ZOOKEEPER-2273,ZooKeeper,2015-09-10T18:45:40.000+0000,Major,Uninvited ZK joins the ensemble,"Scenario:- Install a Zookeeper on machine A- Install a Zookeeper on machine B, joining A to form an ensemble- Reinstall ZooKeeper on A (but with standaloneEnabled=false)-> B automatically joins A to f",benjamin.jaton,benjamin.jaton
ZOOKEEPER-2272,ZooKeeper,2015-09-10T06:36:06.000+0000,Trivial,Code clean up in ZooKeeperServer and KerberosName,"# Following code in {{org.apache.zookeeper.server.ZooKeeperServer}} should be cleaned up. Some how it got missed in code review{code}if ((System.getProperty(""zookeeper.allowSaslFailedClients"") != null",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2271,ZooKeeper,2015-09-09T22:03:48.000+0000,Major,Allow MBeanRegistry to be overridden for better unit tests in 3.4.x,,randgalt,randgalt
ZOOKEEPER-2270,ZooKeeper,2015-09-09T21:45:50.000+0000,Major,Allow MBeanRegistry to be overridden for better unit tests,Apache Curator currently must use byte code re-writing to prevent the MBeanRegistry from polluting the Platform MBeanServer. Provide a simple way to avoid this.,randgalt,randgalt
ZOOKEEPER-2269,ZooKeeper,2015-09-09T12:16:27.000+0000,Major,NullPointerException  in RemotePeerBean,{code}org.apache.zookeeper.server.quorum.RemotePeerBean.getClientAddress(){code} throws NullPointerException when clientPort is not part of dynamic configuration.,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2268,ZooKeeper,2015-09-08T14:08:00.000+0000,Major,Zookeeper doc creation fails on windows,"Zookeeper doc creation fails on windows with following error{code}D:\gitHome\zookeeper-trunk\build.xml:484: Execute failed: java.io.IOException: Cannot run program ""C:\non-install\apache-forrest-0.9\b",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2267,ZooKeeper,2015-09-08T06:28:58.000+0000,Minor,zoo_amulti doesn't correctly return ZINVALIDSTATE errors ,zoo_amulti will always return ZMARSHALLINGERROR whenever the zhandle is in an unrecoverable state. ZINVALIDSTATE should probably be returned in these situations.Preferably the return code from the rel,maflick88,maflick88
ZOOKEEPER-2266,ZooKeeper,2015-09-07T09:23:44.000+0000,Minor,Integrate JaCoCo Coverage Library,"I would like to propose integration of [JaCoCo|http://www.eclemma.org/jacoco/] coverage library with ZooKeeper.h4. Purposes - To find poorly covered methods, and improve JUnit testcases to cover them ",suda,suda
ZOOKEEPER-2265,ZooKeeper,2015-09-03T14:32:07.000+0000,Minor,zookeeper build fails while doing configuration for cppunit test,"running  {color:red}ant tar{color}  gives following error{code}D:\gitHome\zookeeper-trunk\build.xml:1432: Execute failed: java.io.IOException: Cannot run program ""autoreconf"" (in directory ""D:\gitHome",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2264,ZooKeeper,2015-08-31T13:22:07.000+0000,Minor,Wrong error message when secureClientPortAddress is configured but secureClientPort is not configured ,# Wrong error message when secureClientPortAddress is configured but secureClientPort is not configured.zookeeper throws IllegalArgumentException with error message {{clientPortAddress is set but clie,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2263,ZooKeeper,2015-08-28T15:14:58.000+0000,Minor,ZooKeeper server should not start when neither clientPort no secureClientPort is configured,ZooKeeper server should not start when neither clientPort no secureClientPort is configured.Without any client port ZooKeeper server can not server any purpose. It should simply return with proper err,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2262,ZooKeeper,2015-08-28T14:56:05.000+0000,Major,Admin commands do not include secure client information,"Admin commands  do not include secure client informationconnections, configuration, connection_stat_reset and stats admin should include secure client informations1) configuration should include the s",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2261,ZooKeeper,2015-08-28T14:32:27.000+0000,Major,"When only secureClientPort is configured connections, configuration, connection_stat_reset, and stats admin commands throw NullPointerException","When only secureClientPort is configured connections, configuration, connection_stat_reset and stats admin commands throw NullPointerException. Here is stack trace one of the connections command.{code",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2260,ZooKeeper,2015-08-28T00:29:18.000+0000,Major,Paginated getChildren call,"Add pagination support to the getChildren() call, allowing clients to iterate over children N at the time.Motivations for this include:  - Getting out of a situation where so many children were create",mprime,mprime
ZOOKEEPER-2259,ZooKeeper,2015-08-27T14:46:41.000+0000,Major,4 letter word commands are slow because these unnecessarily go through Sasl authentication,"4 letter word commands are slow because these commands unnecessarily go through Sasl authentication. {code}ZooKeeperSaslServer.<init>(Login) line: 48		NettyServerCnxn.<init>(Channel, ZooKeeperServer, ",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2258,ZooKeeper,2015-08-27T08:09:44.000+0000,Major,ZooKeeper bin scripts for the Windows needs to be updated,The idea of this jira is to port all the changes done to the {{zkxx.sh}} unix based scripts to the Windows {{zkxx.cmd}} scripts.,rakeshr,rakeshr
ZOOKEEPER-2257,ZooKeeper,2015-08-21T15:25:55.000+0000,Major,Make zookeeper server principal configurable at zookeeper client side,Currently Zookeeper client expects zookeeper server's principal to be in the form of zookeeper.sasl.client.username/server-ip  for example zookeeper/192.162.1.100. But this may not always be the case ,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2256,ZooKeeper,2015-08-20T12:57:42.000+0000,Minor,Zookeeper is not using specified JMX port in zkEnv.sh,Zookeeper is not using specified JMX port.I put bellow entry in zkEnv.sh{{export JMXPORT=12345}}But zookeeper still uses random port for jmx.,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2255,ZooKeeper,2015-08-20T05:52:43.000+0000,Minor,Use static member classes when permitted,Using static member classes saves time and space because an instances of a nonstatic member class has a reference to its enclosing instance.Also did some style improvements:- JLS recommends modifiers ,YvonneIronberg,YvonneIronberg
ZOOKEEPER-2254,ZooKeeper,2015-08-19T22:32:24.000+0000,Major,CDH 5.4.4 HBASE 1.0.0 with PHX 4.5.0,"Hi,I need support. I have tried to troubleshoot this problem, but anything I do, is not working. I do not have a problem with the NN, ZK or any network limitation, but the phoenix still not able to co",jtorres00,jtorres00
ZOOKEEPER-2253,ZooKeeper,2015-08-19T21:58:45.000+0000,Major,"C asserts ordering of ping requests, while Java client does not",Affects C clients from 3.3 to trunk.The Java client does not enforce ordering on ping requests. It merely updates fields when a ping reply is received and schedules a new ping request when necessary.T,cchen,cchen
ZOOKEEPER-2252,ZooKeeper,2015-08-19T20:09:07.000+0000,Minor,Random test case failure in org.apache.zookeeper.test.StaticHostProviderTest,Test {{org.apache.zookeeper.test.StaticHostProviderTest.testTwoInvalidHostAddresses()}} fails randomly.Refer bellow test ci buils:https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2827/testRepor,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2251,ZooKeeper,2015-08-19T02:47:03.000+0000,Critical,Add Client side packet response timeout to avoid infinite wait.,I came across one issue related to Client side packet response timeout In my cluster many packet drops happened for some time.One observation is the zookeeper client got hanged. As per the thread dump,nijel,nijel
ZOOKEEPER-2250,ZooKeeper,2015-08-17T23:50:47.000+0000,Major,Support client connections using a SOCKS proxy,"Connecting to ZooKeeper via a SOCKS proxy is often useful for debugging systems over an SSH dynamic port forward.It is possible to do this today with some hacking by setting ""zookeeper.clientCnxnSocke",electrum,electrum
ZOOKEEPER-2249,ZooKeeper,2015-08-17T16:24:12.000+0000,Major,CRC check failed when preAllocSize smaller than node data,"Unexpected exception, exiting abnormally java.io.IOException: CRC check failed org.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.next(FileTxnLog.java:612) org.apache.zookeeper.server.",benjamin.jaton,benjamin.jaton
ZOOKEEPER-2248,ZooKeeper,2015-08-15T07:54:29.000+0000,Major,log.zxid file is very large size. It's likely to lead to zk disk space is not enough.,"1. about logCount(the count of log entries)  2. it's local variable in SyncRequestProcessor, it will be reset 0, when SyncRequestProcessor thread exit for LOOKING.   SyncRequestProcessor thread will e",Yongcheng,Yongcheng
ZOOKEEPER-2247,ZooKeeper,2015-08-14T13:13:18.000+0000,Critical,Zookeeper service becomes unavailable when leader fails to write transaction log,"Zookeeper service becomes unavailable when leader fails to write transaction log. Bellow are the exceptions{code}2015-08-14 15:41:18,556 [myid:100] - ERROR [SyncThread:100:ZooKeeperCriticalThread@48] ",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2246,ZooKeeper,2015-08-13T02:44:54.000+0000,Major,quorum connection manager takes a long time to shut down,Receive worker can take a long time to shut down because the socket timeout is set to zero: http://s.apache.org/TfIThere was a discussion on the mailing list a while back: http://s.apache.org/cYG,michim,michim
ZOOKEEPER-2245,ZooKeeper,2015-08-11T13:48:18.000+0000,Major,SimpleSysTest test cases fails,"When {{org.apache.zookeeper.test.system.SimpleSysTest}} is run for in-memory Zookeeper Servers, by specifying baseSysTest.fakeMachines=yes, it fails. Its displays following errors1:{code}java.io.IOExc",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2244,ZooKeeper,2015-08-11T11:26:53.000+0000,Critical,On Windows zookeeper fails to restart,This issue occurs in following scenario1) configure server properties in  zookeeper configuration file(zoo.cfg)example:{code}server.1=localhost:43222:43225:participant;0.0.0.0:43228server.2=localhost:,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2243,ZooKeeper,2015-08-11T08:16:17.000+0000,Major,Supported platforms is completely out of date,"http://zookeeper.apache.org/doc/r3.4.6/zookeeperAdmin.html#sc_supportedPlatformsIt refers to Solaris as Sun Solaris so it's at least 5 years out of date.We should ""support"" the platforms that we are r",ikelly,ikelly
ZOOKEEPER-2242,ZooKeeper,2015-08-06T17:41:20.000+0000,Major,ZooKeeper OSGi bundle is missing package import for org.ietf.jgss.,"The ZooKeeper build injects OSGi headers into the manifest, but the {{Import-Package}} header does not include {{org.ietf.jgss}}, which is used by the ZooKeeper code.  For applications using ZooKeeper",cnauroth,cnauroth
ZOOKEEPER-2241,ZooKeeper,2015-08-05T20:18:31.000+0000,Minor,"In Login.java, a tgt with a small expiry time will break the code","In the Login.java code, if a TGT with a small expiration date (e.g. 5 minutes) is passed in, the refresh date is set at a value less than the MIN_TIME_BEFORE_RELOGIN, which is a minute by default. As ",rfarivar,rfarivar
ZOOKEEPER-2240,ZooKeeper,2015-08-05T04:09:17.000+0000,Trivial,Make the three-node minimum more explicit in documentation and on website,"One of the most important parts of a production zookeeper deployment is the three-node minimum requirement for fault tolerance ... but when I glance at the website and the documentation, this requirem",elyograg,elyograg
ZOOKEEPER-2239,ZooKeeper,2015-08-04T16:33:11.000+0000,Major,JMX State from LocalPeerBean incorrect,"The ""State"" property of LocalPeerBean in package org.apache.zookeeper.server.quorum is returning the incorrect value.  It is performing peer.getState() which is calling the getState() method on java.l",kglee79,kglee79
ZOOKEEPER-2238,ZooKeeper,2015-08-04T05:08:07.000+0000,Major,Support limiting the maximum number of connections/clients to a zookeeper server.,Currently zookeeper have the feature of limiting the maximum number of connection/client  per IP or Host (maxClientCnxns).But to safe guard zookeeper server from DoS attack due to many clients from di,nijel,nijel
ZOOKEEPER-2237,ZooKeeper,2015-07-30T08:26:02.000+0000,Major,Port async multi to 3.4 branch,"Async multi is available in 3.5 branch, but this is currently alpha, and doesn't look like it'll be GA in the next 6 months.I've run into a few cases where async multi would be really useful, but we w",ikelly,ikelly
ZOOKEEPER-2236,ZooKeeper,2015-07-23T15:46:35.000+0000,Major,Zookeeper truncates file to 0bytes,"I am facing a rename issue with Zkfuse. I am trying to test file atomic updates. After some iterations the file size becomes 0.This is easily reproducible, just running the below script for ~5mins.Set",bharats,bharats
ZOOKEEPER-2235,ZooKeeper,2015-07-17T16:30:19.000+0000,Blocker,License update,Updating license files and notice.txt as needed. Here is a list of the jars we are currently bundling with the release artifact with the corresponding license:# commons-cli-1.2.jar -- ASF# javacc.jar ,fpj,fpj
ZOOKEEPER-2234,ZooKeeper,2015-07-16T10:30:17.000+0000,Minor,Snapshot serialization race condition can lead to partial transaction and inoperable data node,"This issue can be reproduced by creating a node with a new ACL during data tree serialization after ACL cache serialization. When restoring from this snapshot without the tranlog, the state will inclu",adammilnesmith,adammilnesmith
ZOOKEEPER-2233,ZooKeeper,2015-07-14T06:51:08.000+0000,Trivial,Invalid description in the comment of LearnerHandler.syncFollower(),"LearnerHandler.syncFollower() has a comment like below:When leader election is completed, the leader will set itslastProcessedZxid to be (epoch < 32). There will be no txn associatedwith this zxid.How",mitake,mitake
ZOOKEEPER-2232,ZooKeeper,2015-07-12T02:16:32.000+0000,Minor,zkperl is out of sync with CPAN releases,"First some background here:Around 6 months ago I had some bug fixes I wanted patched in zkperl, which I had been using through [CPAN|https://metacpan.org/pod/Net::ZooKeeper]. I volunteered to take ove",maflick88,maflick88
ZOOKEEPER-2231,ZooKeeper,2015-07-03T07:55:25.000+0000,Major,ServerSocket opened by ZooKeeperServer cannot use SO_REUSEADDR under Linux,I think reporting [this stackoverflow question|http://stackoverflow.com/q/31163513/337621] to the ZooKeeper team is important.org.apache.zookeeper.server.NIOServerCnxnFactory.configure(InetSocketAddre,gabor.liptak,gabor.liptak
ZOOKEEPER-2230,ZooKeeper,2015-07-02T06:13:20.000+0000,Major,Connections fo ZooKeeper server becomes slow over time with native GSSAPI,ZooKeeper server becomes slow over time when native GSSAPI is used. The connection to the server starts taking upto 10 seconds.This is happening with ZooKeeper-3.4.6 and is fairly reproducible.Debug l,deepeshreja,deepeshreja
ZOOKEEPER-2229,ZooKeeper,2015-07-02T00:18:14.000+0000,Major,Several four-letter words are undocumented.,"The {{isro}}, {{gtmk}} and {{stmk}} commands are not covered in the four-letter word documentation.",cnauroth,cnauroth
ZOOKEEPER-2228,ZooKeeper,2015-07-01T23:46:30.000+0000,Major,WorkerReceiver's main loop  (in FastLeaderElection's) should break loop upon restart,It seems like in FastLeaderElection#Messenger#WorkerReceiver the main loop should be left immediately after this path \[0\] is taken:{code}                                       if (!rqv.equals(curQV),rgs,rgs
ZOOKEEPER-2227,ZooKeeper,2015-07-01T19:22:10.000+0000,Major,stmk four-letter word fails execution at server while reading trace mask argument.,"When the server handles the {{stmk}} four-letter word, it attempts to read an 8-byte Java {{long}} from the request as the trace mask argument.  The read fails, because the destination buffer's capaci",cnauroth,cnauroth
ZOOKEEPER-2226,ZooKeeper,2015-07-01T18:22:31.000+0000,Major,Mixing sequential and non-sequential can throw NodeExists for sequential nodes,"I have the following code (in curator):{code}int id = extractId(client.create().creatingParentsIfNeeded().withMode(CreateMode.PERSISTENT_SEQUENTIAL).forPath(prefix,data));{code}and{code}client.create(",dcapwell,dcapwell
ZOOKEEPER-2225,ZooKeeper,2015-06-30T13:56:55.000+0000,Major,modify existing 'configuration' command or add new one to return list of ZooKeeper's ensemble members,"Hi, All We are building high-availability ZooKeeper cluster at AWS and using version 3.5.0 because it support dynamic re-configuration. Everything works but one problem: it is difficult for ZooKeeper ",gstarchenko,gstarchenko
ZOOKEEPER-2224,ZooKeeper,2015-06-30T10:00:04.000+0000,Minor,Four letter command hangs when network is slow,"Four letter command hangs when network is slow or network goes down in between the operation, and the application also, which calling this four letter command,  hangs.",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2223,ZooKeeper,2015-06-30T06:26:12.000+0000,Minor,support method-level JUnit testcase,"Currently, a user can execute class-level single test, but cannot execute method-level ones.This patch adds a support for method-level single test so as to facilitate ease of debugging failing tests (",suda,suda
ZOOKEEPER-2222,ZooKeeper,2015-06-26T16:17:40.000+0000,Minor,Fail fast if `myid` does not exist but server.N properties are defined,"Under these circumstances the server logs a warning, but starts in standalone mode. I think it should exit.",joehalliwell,joehalliwell
ZOOKEEPER-2221,ZooKeeper,2015-06-25T14:07:10.000+0000,Major,Zookeeper JettyAdminServer server should start on configured IP.,"Currently JettyAdminServer starting on ""0.0.0.0"" IP. ""0.0.0.0"" means ""all IP addresses on the local machine"". So, if your webserver machine has two ip addresses, 192.168.1.1(private) and 10.1.2.1(publ",surendrasingh,surendrasingh
ZOOKEEPER-2220,ZooKeeper,2015-06-24T17:57:52.000+0000,Major,Couldn't instantiate org.apache.zookeeper.ClientCnxnSocketNetty,"I am trying to test SSL connectivity between client and server following the instructions in the following page:https://cwiki.apache.org/confluence/display/ZOOKEEPER/ZooKeeper+SSL+User+GuideBut, I get",rsetty,rsetty
ZOOKEEPER-2219,ZooKeeper,2015-06-24T06:39:28.000+0000,Major,ZooKeeper server should better handle SessionMovedException.,ZooKeeper server should better handle SessionMovedException.We hit the SessionMovedException. the following is the reason for the SessionMovedException we find:1. ZK client tried to connect to Leader ,zxu,zxu
ZOOKEEPER-2218,ZooKeeper,2015-06-23T02:32:35.000+0000,Critical,Close IO Streams in finally block,"The problem here is that if an exception is thrown during the read process the method will exit without closing the stream and hence without releasing the file system resources, it may run out of reso",tgttxy,tgttxy
ZOOKEEPER-2217,ZooKeeper,2015-06-19T03:25:49.000+0000,Major,event might lost before re-watch,"I use zk to  monitor the children nodes under a path, eg: /servers. when the client is told that children changes,  I have to re-watch the path again, during the peroid, it's possible that some childr",caspian,caspian
ZOOKEEPER-2216,ZooKeeper,2015-06-16T17:38:18.000+0000,Minor,Get the property hierarchy as a a whole tree ,"I am logging this  as part of a feature request.We use Zookeeper - pretty extensively. Thanks for putting a pretty awesome product! This is a feature request.As of now, there is no way to ask Zookeepe",noga,noga
ZOOKEEPER-2215,ZooKeeper,2015-06-12T12:09:49.000+0000,Major,Four letter command don't have kerberos authentication , echo dump | netcat <IP> <port>,surendrasingh,surendrasingh
ZOOKEEPER-2214,ZooKeeper,2015-06-11T15:46:35.000+0000,Minor,Findbugs warning: LearnerHandler.packetToString Dead store to local variable,,hdeng,hdeng
ZOOKEEPER-2213,ZooKeeper,2015-06-10T15:29:23.000+0000,Blocker,Empty path in Set crashes server and prevents restart,"See https://github.com/samuel/go-zookeeper/issues/62I've reproduced this on 3.4.5 with the code:        c, _, _ := zk.Connect([]string{""127.0.0.1""}, time.Second)        c.Set("""", []byte{}, 0)This cras",brianbrazil,brianbrazil
ZOOKEEPER-2212,ZooKeeper,2015-06-10T06:45:23.000+0000,Critical,distributed race condition related to QV version,"When a joiner is listed as an observer in an initial config,the joiner should become a non-voting follower (not an observer) until reconfig is triggered. [(Link)|http://zookeeper.apache.org/doc/trunk/",suda,suda
ZOOKEEPER-2211,ZooKeeper,2015-06-09T20:45:57.000+0000,Major,PurgeTxnLog does not correctly purge when snapshots and logs are at different locations,"PurgeTxnLog does not work when snapshots and transaction logs are at different file paths. The argument handling is buggy and only works when both snap and datalog dirs are given, and datalog dir cont",wesc,wesc
ZOOKEEPER-2210,ZooKeeper,2015-06-09T04:47:12.000+0000,Major,clock_gettime is not available in os x,"{noformat}src/zookeeper.c:286:9: warning: implicit declaration of function 'clock_gettime' is invalid in C99 [-Wimplicit-function-declaration]  ret = clock_gettime(CLOCK_MONOTONIC, &ts);        ^src/z",michim,michim
ZOOKEEPER-2209,ZooKeeper,2015-06-08T07:19:03.000+0000,Major,A .NET C# version of ZooKeeper client,Inspired by the work of [~ewhauser] .I propose a C# Client that supports the current stable version of ZK 3.4.6.It was built by using static code conversion tools followed by manual editing and C# imp,shayhatsor,shayhatsor
ZOOKEEPER-2208,ZooKeeper,2015-06-05T08:26:32.000+0000,Trivial,Log type of unexpected quorum packet in observer loop,This patch lets the observer loop log the type of packet for debugging.This issue is tightly related to  ZOOKEEPER-2205,suda,suda
ZOOKEEPER-2207,ZooKeeper,2015-06-04T07:52:41.000+0000,Trivial,Enhance error logs with LearnerHandler.packetToString(),This patch enhances error logs related to unexpected types of QuorumPacket with LearnerHandler.packetToString().,mitake,mitake
ZOOKEEPER-2206,ZooKeeper,2015-06-04T07:44:12.000+0000,Trivial,Add missing packet types to LearnerHandler.packetToString(),packetToString() is a method which is suitable for obtaining string representation of QuorumPacket. But it lacks some types of QuorumPacket. This patch adds the missing types and enhance the method fo,mitake,mitake
ZOOKEEPER-2205,ZooKeeper,2015-06-04T05:44:14.000+0000,Trivial,Log type of unexpected quorum packet in learner handler loop,Current learner handler loop doesn't log anything when it receives unexpected type of quorum packet from learner.This patch lets the learner handler loop log the type of packet for defensive purpose. ,mitake,mitake
ZOOKEEPER-2204,ZooKeeper,2015-06-03T16:04:31.000+0000,Minor,LearnerSnapshotThrottlerTest.testHighContentionWithTimeout fails occasionally,"The {{LearnerSnapshotThrottler}} will only allow 2 concurrent snapshots to be taken, and if there are already 2 snapshots in progress it will wait up to 200ms for one to complete. This isn't enough ti",dnadolny,dnadolny
ZOOKEEPER-2203,ZooKeeper,2015-06-03T03:36:16.000+0000,Major,multiple leaders can be elected when configs conflict,"This sequence leads the ensemble to a split-brain state: * Start server 1 (config=1:participant, 2:participant, 3:participant) * Start server 2 (config=1:participant, 2:participant, 3:participant) * 1",suda,suda
ZOOKEEPER-2202,ZooKeeper,2015-06-02T21:44:45.000+0000,Major,Cluster crashes when reconfig adds an unreachable observer,While adding support for reconfig() in Kazoo (https://github.com/python-zk/kazoo/pull/333) I found that the cluster can be crashed if you add an observer whose election port isn't reachable (i.e.: pac,rgs,rgs
ZOOKEEPER-2201,ZooKeeper,2015-06-02T01:30:25.000+0000,Critical,Network issues can cause cluster to hang due to near-deadlock,"{{DataTree.serializeNode}} synchronizes on the {{DataNode}} it is about to serialize then writes it out via {{OutputArchive.writeRecord}}, potentially to a network connection. Under default linux TCP ",dnadolny,dnadolny
ZOOKEEPER-2200,ZooKeeper,2015-06-01T19:02:52.000+0000,Major,Perl ZooKeeper locks up during heavy load,We are using Perl Net::ZooKeeper (0.38) and Net::ZooKeeper::Lock (0.03) libraries.  Deadlock appears to occur at the end during lock cleanup activity.  Here is a stack dump (sensitive names changed):T,kvanhorn,kvanhorn
ZOOKEEPER-2199,ZooKeeper,2015-05-31T23:28:24.000+0000,Major,Don't include unistd.h in windows,Windows doesn't have unistd.h.https://builds.apache.org/view/S-Z/view/ZooKeeper/job/ZooKeeper-trunk-WinVS2008/,michim,michim
ZOOKEEPER-2198,ZooKeeper,2015-05-30T21:22:23.000+0000,Minor,Set default test.junit.threads to 1.,Some systems are seeing test failures under concurrent execution.  This issue proposes to change the default {{test.junit.threads}} to 1 so that those environments continue to get consistent test runs,cnauroth,cnauroth
ZOOKEEPER-2197,ZooKeeper,2015-05-30T20:25:05.000+0000,Minor,non-ascii character in FinalRequestProcessor.java,src/java/main/org/apache/zookeeper/server/FinalRequestProcessor.java:134: error: unmappable character for encoding ASCII    [javac]         // was not being queued ??? ZOOKEEPER-558) properly. This ha,michim,michim
ZOOKEEPER-2196,ZooKeeper,2015-05-22T21:29:11.000+0000,Major,Web Access link broken,"The link for ""Web Access"" on the [SVN site page|https://zookeeper.apache.org/svn.html] is broken.This link:http://svn.apache.org/viewcvs.cgi/zookeeper/Should be replaced with this:https://svn.apache.o",reden,reden
ZOOKEEPER-2195,ZooKeeper,2015-05-21T07:27:55.000+0000,Trivial,fsync.warningthresholdms in zoo.cfg not working,"Config fsync.warningthresholdms in zoo.cfg does not work.I find QuorumPeerConfig.parseProperties give fsync.warningthresholdms a prefix like ""zookeeper.fsync.warningthresholdms"".  But in class FileTxn",davencool,davencool
ZOOKEEPER-2194,ZooKeeper,2015-05-21T06:35:59.000+0000,Trivial,Let DataNode.getChildren() return an unmodifiable view of its children set,"Current DataNode.getChildren() directly returns a pointer of its private member,  children. However, the member should be modified through addChild() and removeChild(). Callers of getChildren() should",mitake,mitake
ZOOKEEPER-2193,ZooKeeper,2015-05-20T09:38:23.000+0000,Major,reconfig command completes even if parameter is wrong obviously,"Even if reconfig parameter is wrong, it was confirmed to complete.refer to the following.- Ensemble consists of four nodes{noformat}[zk: vm-101:2181(CONNECTED) 0] configserver.1=192.168.100.101:2888:3",Yasuhito Fukuda,Yasuhito Fukuda
ZOOKEEPER-2192,ZooKeeper,2015-05-19T16:57:34.000+0000,Major,"Port ""Introduce new ZNode type: container"" to 3.4.x","ZOOKEEPER-2163 applies to the trunk branch. This feature is too needed to wait for 3.5.x. So, port the feature to the 3.4.x branch so it can be released ahead of 3.5.x.",randgalt,randgalt
ZOOKEEPER-2191,ZooKeeper,2015-05-14T18:32:18.000+0000,Major,Continue supporting prior Ant versions that don't implement the threads attribute for the JUnit task.,"ZOOKEEPER-2183 introduced usage of the threads attribute on the <junit> task call in build.xml to speed up test execution.  This attribute is only available since Ant 1.9.4.  However, we can continue ",cnauroth,cnauroth
ZOOKEEPER-2190,ZooKeeper,2015-05-14T02:59:35.000+0000,Major,"In StandaloneDisabledTest, testReconfig() shouldn't take leaving servers as joining servers",,hdeng,hdeng
ZOOKEEPER-2189,ZooKeeper,2015-05-13T06:20:59.000+0000,Major,QuorumCnxManager: use BufferedOutputStream for initial msg,"This was original JIRA of ZOOKEEPER-2203. For project management reason, all the issues and related discussion are moved to ZOOKEEPER-2203. This JIRA is linked to ZOOKEEPER-2098.==============This seq",suda,suda
ZOOKEEPER-2188,ZooKeeper,2015-05-11T11:07:00.000+0000,Major,client connection hung up because of  dead loop,"There is something wrong with the client code ClientCnxn.java, it will keep trying to connect to server in a dead loop.This is my test step, shut down zookeeper cluster, exectue zkCli.sh script to con",haitao-tony,haitao-tony
ZOOKEEPER-2187,ZooKeeper,2015-05-09T03:53:00.000+0000,Minor,"remove duplicated code between CreateRequest{,2}",To avoid cargo culting and reducing duplicated code we can merge most of CreateRequest & CreateRequest2 given that only the Response object is actually different.This will improve readability of the c,rgs,rgs
ZOOKEEPER-2186,ZooKeeper,2015-05-08T19:36:43.000+0000,Major,QuorumCnxManager#receiveConnection may crash with random input,This will allocate an arbitrarily large byte buffer (and try to read it!):{code}    public boolean receiveConnection(Socket sock) {        Long sid = null;...                sid = din.readLong();     ,rgs,rgs
ZOOKEEPER-2185,ZooKeeper,2015-05-08T17:44:38.000+0000,Minor,Run server with -XX:+HeapDumpOnOutOfMemoryError and -XX:OnOutOfMemoryError='kill %p'.,Continuing to run a server process after it runs out of memory can lead to unexpected behavior.  This issue proposes that we update scripts and documentation to add these JVM options:# {{-XX:+HeapDump,cnauroth,cnauroth
ZOOKEEPER-2184,ZooKeeper,2015-05-07T23:46:12.000+0000,Major,Zookeeper Client should re-resolve hosts when connection attempts fail,Testing in a Docker environment with a single Kafka instance using a single Zookeeper instance. Restarting the Zookeeper container will cause it to receive a new IP address. Kafka will never be able t,rthille,rthille
ZOOKEEPER-2183,ZooKeeper,2015-05-07T23:12:10.000+0000,Major,Concurrent Testing Processes and Port Assignments,"Tests use {{PortAssignment#unique}} for assignment of the ports to bind during tests.  Currently, this method works by using a monotonically increasing counter from a static starting point.  Generally",cnauroth,cnauroth
ZOOKEEPER-2182,ZooKeeper,2015-05-07T18:23:42.000+0000,Major,"Several test suites are not running during pre-commit, because their names do not end with ""Test"".","In build.xml, the {{<junit>}} task definition uses an include pattern of {{\*\*/\*$\{test.category\}Test.java}}.  This is important so that we don't accidentally try to run utility classes like {{Port",cnauroth,cnauroth
ZOOKEEPER-2181,ZooKeeper,2015-05-05T11:16:57.000+0000,Major,Slider-Zookeeper integration testcase fails with Zookeeper-3.5.0-alpha version,"TestZKIntegration testcase in slider fails with zookeeper-3.5.0-alpha version. From the logs, it came to know the state change went to LOST rather than CONNECTED while creating ZK path. The above test",Ayappan,Ayappan
ZOOKEEPER-2180,ZooKeeper,2015-05-05T02:04:33.000+0000,Major,quota do not take effect in version 3.4.6,"[zk: localhost:2181(CONNECTED) 18] listquota /mynodeabsolute path is /zookeeper/quota/mynode/zookeeper_limitsOutput quota for /mynode count=-1,bytes=100Output stat for /mynode count=6,bytes=484[zk: lo",omicronAK,omicronAK
ZOOKEEPER-2179,ZooKeeper,2015-05-04T08:47:54.000+0000,Trivial,Typo in Watcher.java,"at zookeeper/src/java/main/org/apache/zookeeper/Watcher.java, * implement. A ZooKeeper client will get various events from the ZooKeeprshould be fixed to  * implement. A ZooKeeper client will get vari",pavian48,pavian48
ZOOKEEPER-2178,ZooKeeper,2015-05-02T20:29:14.000+0000,Major,Native client fails compilation on Windows.,"Due to several recent changes, the native client fails to compile on Windows:# ZOOKEEPER-827 (read-only mode) mismatched a function return type between the declaration and definition.# ZOOKEEPER-1626 ",cnauroth,cnauroth
ZOOKEEPER-2177,ZooKeeper,2015-04-30T06:26:53.000+0000,Minor,point to md5/sha1/asc files in releases.html,these files are not mirrored. we should link to these files in http://zookeeper.apache.org/releases.html ,michim,michim
ZOOKEEPER-2176,ZooKeeper,2015-04-28T17:19:06.000+0000,Major,Unclear error message should be info not error,"Hi [~shralex],Looking at the CI output of ZOOKEEPER-2163 I see this:{noformat} [exec]     [junit] 2015-04-17 17:36:23,750 [myid:] - ERROR [QuorumPeer[myid=4](plain=/0:0:0:0:0:0:0:0:11235)(secure=disab",rgs,rgs
ZOOKEEPER-2175,ZooKeeper,2015-04-24T02:17:57.000+0000,Major,Checksum validation for malformed packets needs to handle.," *Session Id from ZK :* 2015-04-15 21:24:54,257 | INFO  | CommitProcessor:22 | Established session 0x164cb2b3e4b36ae4 with negotiated timeout 45000 for client /160.149.0.117:44586 | org.apache.zookeep",brahmareddy,brahmareddy
ZOOKEEPER-2174,ZooKeeper,2015-04-21T23:43:37.000+0000,Minor,JUnit4ZKTestRunner logs test failure for all exceptions even if the test method is annotated with an expected exception.,"{{JUnit4ZKTestRunner}} wraps JUnit test method execution, and if any exception is thrown, it logs a message stating that the test failed.  However, some ZooKeeper tests are annotated with {{@Test(expe",cnauroth,cnauroth
ZOOKEEPER-2173,ZooKeeper,2015-04-21T10:34:55.000+0000,Major,ZK startup failure should be handled with proper error message,"If any failure during zk Startup (myid file does not exist), then still zk startup returns as successful (STARTED).ZK startup failure should be handled with proper error message",andreina,andreina
ZOOKEEPER-2172,ZooKeeper,2015-04-21T04:14:24.000+0000,Critical,Cluster crashes when reconfig a new node as a participant,"The operations are quite simple: start three zk servers one by one, then reconfig the cluster to add the new one as a participant. When I add the  third one, the zk cluster may enter a weird state and",ziyouw,ziyouw
ZOOKEEPER-2171,ZooKeeper,2015-04-21T00:22:38.000+0000,Major,avoid reverse lookups in QuorumCnxManager,"Apparently, ZOOKEEPER-107 (via a quick git-blame look) introduced a bunch of getHostName() calls in QCM. Besides the overhead, these can cause problems when mixed with failing/mis-configured DNS serve",rgs,rgs
ZOOKEEPER-2170,ZooKeeper,2015-04-20T11:19:36.000+0000,Major,Zookeeper is not logging as per the configuration in log4j.properties,"In conf/log4j.properties default root logger is {code}zookeeper.root.logger=INFO, CONSOLE{code}Changing root logger to bellow value or any other value does not change logging effect{code}zookeeper.roo",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2169,ZooKeeper,2015-04-16T20:21:47.000+0000,Major,Enable creation of nodes with TTLs,"As a user, I would like to be able to create a node that is NOT tied to a session but that WILL expire automatically if action is not taken by some client within a time window.I propose this to enable",fournc,fournc
ZOOKEEPER-2168,ZooKeeper,2015-04-15T14:50:06.000+0000,Major,Add C APIs for new createContainer Methods,ZOOKEEPER-2163 adds new client methods to create containers. These need to be exposed in the C client as well.,randgalt,randgalt
ZOOKEEPER-2167,ZooKeeper,2015-04-15T00:01:24.000+0000,Major,Restarting current leader node sometimes results in a permanent loss of quorum,"I'm seeing an issue where a restart of the current leader node results in a long-term / permanent loss of quorum (I've only waited 30 minutes, but it doesn't look like it's making any progress). Resta",novas0x2a,novas0x2a
ZOOKEEPER-2166,ZooKeeper,2015-04-14T21:00:25.000+0000,Major,backupOldConfig() doesn't check for null,QuorumPeerConfig.backupOldConfig() should check if configFileStr is null or not and do nothing if it is null. This is currently breaking Apache Curator's TestingCluster.,randgalt,randgalt
ZOOKEEPER-2165,ZooKeeper,2015-04-14T11:42:28.000+0000,Minor,"OSGi requires package ""server.quorom.flexible"" be exported","Class QuoromPeer has a constructor which takes a QuorumVerifier value as a parameter. This class is defined in package ""org.apache.zookeeper.server.quorum.flexible"" but that package is not exported.",skitching,skitching
ZOOKEEPER-2164,ZooKeeper,2015-04-14T07:36:12.000+0000,Major,fast leader election keeps failing,"I have a 3-node cluster with sids 1, 2 and 3. Originally 2 is the leader. When I shut down 2, 1 and 3 keep going back to leader election. Here is what seems to be happening.- Both 1 and 3 elect 3 as t",michim,michim
ZOOKEEPER-2163,ZooKeeper,2015-04-13T18:19:28.000+0000,Major,Introduce new ZNode type: container,"BACKGROUND============A recurring problem for ZooKeeper users is garbage collection of parent nodes. Many recipes (e.g. locks, leaders, etc.) call for the creation of a parent node under which partici",randgalt,randgalt
ZOOKEEPER-2162,ZooKeeper,2015-04-13T04:33:50.000+0000,Major,infinite exception loop occurs when dataDir is lost,"This sequence leads server.1 and server.2 to infinite exception loop. * Start server.1 and server.2 with the initial ensemble server.1=participant, server.2=observer.   In this time, acceptedEpoch\[i\",suda,suda
ZOOKEEPER-2161,ZooKeeper,2015-04-08T16:10:12.000+0000,Major,Cleanup task fails - java.io.FileNotFoundException: /zookeeper.log (Permission Denied),The cleanup task fails with the following stack trace. This is happening repeatedly every time the cleanup task runs. Even the command line invocation of cleanup fails with the same stack trace.zookee,mchiocca,mchiocca
ZOOKEEPER-2160,ZooKeeper,2015-04-07T11:50:04.000+0000,Trivial,just test,,jie,jie
ZOOKEEPER-2159,ZooKeeper,2015-04-07T06:59:21.000+0000,Blocker,Pluggable SASL Authentication,"Today SASLAuthenticationProvider is used for all SASL based authentications which creates some ""if/else"" statements in ZookeeperSaslClient and ZookeeperSaslServer code with just Kerberos and Digest.We",yufeldman,yufeldman
ZOOKEEPER-2158,ZooKeeper,2015-04-06T14:31:36.000+0000,Major,CLONE - Switch to using maven to build ZooKeeper,Maven is a great too for building java projects at the ASF.  It helps standardize the build a bit since it's a convention oriented.It's dependency auto downloading would remove the need to store the d,laesunKim,laesunKim
ZOOKEEPER-2157,ZooKeeper,2015-04-03T06:21:17.000+0000,Minor,Upgrade option should be removed from zkServer.sh usage,"Upgrade option should be removed from zkServer.sh usage from trunk codeCurrently upgrade option is available in zkServer.sh usage , while upgrade feature is already been removed from trunk.{noformat}#",andreina,andreina
ZOOKEEPER-2156,ZooKeeper,2015-04-03T05:03:39.000+0000,Major,If JAVA_HOME is not set zk startup and fetching status command execution result misleads user.,"If JAVA_HOME is not set,  zk startup and fetching status command execution result misleads user.1. Eventhough zk startup has failed since JAVA_HOME is not set , on CLI it displays that zk STARTED.{nof",andreina,andreina
ZOOKEEPER-2155,ZooKeeper,2015-04-02T06:35:53.000+0000,Critical,"network is not good, the watcher in observer env will clear","When I set up a ZooKeeper ensemble that uses Observers, The network is not very good.I find all of the watcher disappear.I read the source code and find:  When the observer connect to leader, will dum",linking12,linking12
ZOOKEEPER-2154,ZooKeeper,2015-03-31T05:55:08.000+0000,Major,NPE in KeeperException,KeeperException should handle exception is code is null...,surendrasingh,surendrasingh
ZOOKEEPER-2153,ZooKeeper,2015-03-30T21:00:10.000+0000,Major,X509 Authentication Documentation,,hdeng,hdeng
ZOOKEEPER-2152,ZooKeeper,2015-03-25T17:25:06.000+0000,Major,Intermittent failure in TestReconfig.cc,I'm seeing this failure in the c client test once in a while:{noformat}[exec] /home/jenkins/jenkins-slave/workspace/ZooKeeper-trunk/trunk/src/c/tests/TestReconfig.cc:474: Assertion: assertion failed [,michim,michim
ZOOKEEPER-2151,ZooKeeper,2015-03-24T19:20:22.000+0000,Major,FollowerZookeeperServer has thousands of outstanding requests stuck in CommitProcessor,We are seeing one follower server in our quorum stuck with thousands of outstanding requests:---------------------------------------------node04:~$ telnet 10.10.10.6 2181Trying 10.10.10.6...Connected ,jaredc,jaredc
ZOOKEEPER-2150,ZooKeeper,2015-03-24T16:06:34.000+0000,Major,Observers losing connection with active ensemble and dont recover,We have pool of zookeeper machines (contains both active and observer) in version 3.4.3. We recently undated our exhibitor from 1.2.x to 1.5.4. We are seeing a strange behavior in our observers: they ,pjogani,pjogani
ZOOKEEPER-2149,ZooKeeper,2015-03-24T01:12:01.000+0000,Major,Logging of client address when socket connection established,"When a socket connection is established, in ZooKeeperServer, it would print logs:""Established session 0x$(session) with negotiated timeout $(timeout) for client: $(client_hostport)""However, in client,",hdeng,hdeng
ZOOKEEPER-2148,ZooKeeper,2015-03-22T23:33:16.000+0000,Major,ZooKeeper SSL User Guide,"SSL is a new feature added in ""3.5+"".We have a dedicated user guide:https://cwiki.apache.org/confluence/display/ZOOKEEPER/ZooKeeper+SSL+User+Guide",hdeng,hdeng
ZOOKEEPER-2147,ZooKeeper,2015-03-21T18:12:10.000+0000,Trivial,Remove ZOO_NOTWATCHING_EVENT,"A review of the ZK code shows that the NOTWATCHING event is never raised. However, most client users wouldn't know this and would (hopefully) write code to handle the event. We ran into this in our ow",tdistler,tdistler
ZOOKEEPER-2146,ZooKeeper,2015-03-20T23:07:54.000+0000,Major,BinaryInputArchive readString should check length before allocating memory,I recently observed a problem caused by malformed packets. ZK server crashed because of OutOfMemoryError.The reason is BinaryInputArchive didn't check the length before allocating memory in readString,hdeng,hdeng
ZOOKEEPER-2145,ZooKeeper,2015-03-18T20:27:23.000+0000,Major,Node can be seen but not deleted,I have a three-server ensemble that appears to be working fine in every respect but for the fact that I can ls or get a znode but can not rmr it.>[zk: localhost:2181(CONNECTED) 0] get /accumulo/9354e9,flawaetz,flawaetz
ZOOKEEPER-2144,ZooKeeper,2015-03-16T10:48:18.000+0000,Major,Provide a way to update the auth info on a connection,"The current auth info implementation makes it very difficult to work with expiring auth info.  If a client fails over between servers, it resends its list of auth info in a FIFO order.  Therefore, if ",karold,karold
ZOOKEEPER-2143,ZooKeeper,2015-03-16T10:38:43.000+0000,Major,Pass the operation and path to the AuthenticationProvider,"Currently, the AuthenticationProvider only gets passed the id of the client and the acl expression.  If one wishes to perform auth checks based on the action or path being acted on, that needs to be i",karold,karold
ZOOKEEPER-2142,ZooKeeper,2015-03-16T10:30:46.000+0000,Trivial,JMX ObjectName is incorrect for observers,Observers show up in JMX as StandaloneServer rather than Observer.,karold,karold
ZOOKEEPER-2141,ZooKeeper,2015-03-16T10:28:31.000+0000,Blocker,ACL cache in DataTree never removes entries,The problem and potential solutions are discussed in http://mail-archives.apache.org/mod_mbox/zookeeper-user/201502.mbox/browserI will attach a proposed patch in due course.,karold,karold
ZOOKEEPER-2140,ZooKeeper,2015-03-13T07:03:40.000+0000,Major,NettyServerCnxn and NIOServerCnxn code should be improved,"Classes org.apache.zookeeper.server.NIOServerCnxn and org.apache.zookeeper.server.NettyServerCnxn have following need and scope for improvement1) Duplicate code.	These two classes have around 250 line",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2139,ZooKeeper,2015-03-13T04:28:53.000+0000,Blocker,"Support multiple ZooKeeper client, with different configurations, in a single JVM","I have two ZK client in one JVM, one is secure client and second is normal client (For non secure cluster).""zookeeper.sasl.client"" system property is ""true"" by default, because of this my second clien",surendrasingh,surendrasingh
ZOOKEEPER-2138,ZooKeeper,2015-03-11T21:00:43.000+0000,Major,ZooKeeper C client testing is failing,"After testHammer has been fixed, now test-core-java is successful and test-core-cppunit emerges to fail:https://builds.apache.org/view/S-Z/view/ZooKeeper/job/ZooKeeper-trunk/2624/consolehttps://builds",hdeng,hdeng
ZOOKEEPER-2137,ZooKeeper,2015-03-10T22:05:58.000+0000,Major,Make testPortChange() less flaky,"The cause of flaky failure of testPortChange() is a race in sync().I figured out it could take some time to fix sync(). Meanwhile, we can make testPortChange() less flaky by doing reconfig on the lead",hdeng,hdeng
ZOOKEEPER-2136,ZooKeeper,2015-03-10T05:27:59.000+0000,Blocker,Sync() should get quorum acks.,Currently if the sync packet goes to leader it doesn't get quorum acks. This is a problem during reconfig and leader changes. testPortChange() flaky failure is caused by such case.I proposed to change,hdeng,hdeng
ZOOKEEPER-2135,ZooKeeper,2015-03-08T21:16:51.000+0000,Major,fix trunk build,,michim,michim
ZOOKEEPER-2134,ZooKeeper,2015-03-08T21:14:13.000+0000,Blocker,AsyncHammerTest.testHammer fails intermittently,The trunk build has been red for a while because of this (and ZOOKEEPER-2000 and ZOOKEEPER-2080). We should fix this sooner than later.,michim,michim
ZOOKEEPER-2133,ZooKeeper,2015-03-05T16:49:28.000+0000,Major,zkperl: Segmentation fault if getting a node with null value,If Node content is null:[zk: (CONNECTED) 0] get /appsnullcZxid = 0x10000000dthanmy $data = $zk->{zkh}->get('/apps');causing a core dump with Segmentation fault,botond.hejj,botond.hejj
ZOOKEEPER-2132,ZooKeeper,2015-02-26T18:49:02.000+0000,Major,Follower::syncWithLeader should roll logs before taking snapshot,If multiple leader elections occur before SyncRequestProcessor takes a snapshot and rolls logs (at least 50000 transactions by default). PurgeTxnLog may inadvertently delete the current transaction lo,asadpanda,asadpanda
ZOOKEEPER-2131,ZooKeeper,2015-02-24T17:25:41.000+0000,Major,Error:KeeperErrorCode = NoNode,"getting error below:[2015-02-24 11:11:25,226] INFO Got user-level KeeperException when processing sessionid:0x14bbc922a2b0002 type:create cxid:0x1a zxid:0xe8 txntype:-1 reqpath:n/a Error Path:/consume",dirtdiver512,dirtdiver512
ZOOKEEPER-2130,ZooKeeper,2015-02-24T10:49:13.000+0000,Minor,Command to get ensemble summary,"It is good to have a command which can give complete summary of zookeeper ensemble. Ensemble summary should give information about who is leader, which are followers, observers.Consider a zookeeper cl",arshad.mohammad,arshad.mohammad
ZOOKEEPER-2129,ZooKeeper,2015-02-24T10:15:58.000+0000,Trivial,ruok command is not consistent with other four letter commands,ruok commands prints the output in the same line unlike the other four letter commands which print output in next line. Even though output is correct it is difficult to notice the output specially for,arshad.mohammad,arshad.mohammad
ZOOKEEPER-2128,ZooKeeper,2015-02-24T03:46:25.000+0000,Major,zoo_aremove_watchers API is incorrect,The C API for zoo_aremove_watchers incorrectly specifies the seventh argument as a pointer to a function pointer.  It should be simply a function pointer only.,dgosselin,dgosselin
ZOOKEEPER-2127,ZooKeeper,2015-02-23T11:48:34.000+0000,Major,Document zkCli.sh,According to the answer provided to this stack overflow question:http://stackoverflow.com/questions/28589703/zookeeper-zkcli-sh-create-switches-documentation/28594057#28594057the zkCli.sh script is no,blackduck.joe,blackduck.joe
ZOOKEEPER-2126,ZooKeeper,2015-02-21T23:58:35.000+0000,Major,Improve exit log messsage of EventThread and SendThread by adding SessionId,"We saw the following out of order log when close Zookeeper client session.{code}2015-02-16 06:01:12,985 INFO org.apache.zookeeper.ZooKeeper: Session: 0x24b8df4044005d4 closed..........................",zxu,zxu
ZOOKEEPER-2125,ZooKeeper,2015-02-20T22:32:52.000+0000,Major,SSL on Netty client-server communication,Supporting SSL on Netty client-server communication. 1. It supports keystore and trustore usage. 2. It adds an additional ZK server port which supports SSL. This would be useful for rolling upgrade.RB,hdeng,hdeng
ZOOKEEPER-2124,ZooKeeper,2015-02-20T18:58:43.000+0000,Major,Allow Zookeeper version string to have underscore '_',"Using Bigtop or other RPM build for Zookeeper, there is a problem with using the hyphen '-' character in the version string:{noformat}[bigdata@bdvs1166 bigtop]$ gradle zookeeper-rpm:buildSrc:compileJa",jinghe,jinghe
ZOOKEEPER-2123,ZooKeeper,2015-02-18T23:02:44.000+0000,Minor,Provide implementation of X509 AuthenticationProvider,,hdeng,hdeng
ZOOKEEPER-2122,ZooKeeper,2015-02-18T17:24:50.000+0000,Trivial,Impplement SSL support in the Zookeeper C client library,Implement SSL support in the Zookeeper C client library to work with the secure server.,asamarna,asamarna
ZOOKEEPER-2121,ZooKeeper,2015-02-18T17:08:43.000+0000,Major,"Documentation of create method is unclear, incorrect, or both","If you go to the create method documentation here:http://zookeeper.apache.org/doc/r3.4.6/api/index.htmlThen you see:{code}public String create(String path,            byte[] data,            List<ACL>",blackduck.joe,blackduck.joe
ZOOKEEPER-2120,ZooKeeper,2015-02-17T20:20:45.000+0000,Major,SSL feature on Netty,"As we discussed in ZOOKEEPER-2094, the SSL work would be divided into several subtask:1. Provide implementation of X509 AuthenticationProvider2. Modify ZooKeeper Netty server and client to support SSL",hdeng,hdeng
ZOOKEEPER-2119,ZooKeeper,2015-02-17T16:42:20.000+0000,Major,Netty client docs,ZOOKEEPER-2069 adds Netty client option.  We need to add docs on how to use it.,hdeng,hdeng
ZOOKEEPER-2118,ZooKeeper,2015-02-15T06:32:53.000+0000,Major,CLONE - Netty for quorum communication,We need Netty in quorum communication to make use of SSL/auth feature in Netty.This might need more thoughts like ZOOKEEPER-901. This issue would be a good place to start discussing thoughts.,ysl871308,ysl871308
ZOOKEEPER-2117,ZooKeeper,2015-02-13T15:13:45.000+0000,Critical,"""caught end of stream"", server: ""Stale state"" of a Zk client just after connecting","Hi All,Under WIndows 8.1 and 2012, using the ZooKeeper C client 3.5.0, when running my ZooKeeper client, just after the ZooKeeper Client is connecting with the ZooKeeper server, the ZooKeeper server i",BrunoGauthier,BrunoGauthier
ZOOKEEPER-2116,ZooKeeper,2015-02-11T23:48:44.000+0000,Critical,zkCli.sh doesn't honor host:port parameter,"This doc http://zookeeper.apache.org/doc/r3.1.2/zookeeperStarted.html (""Connecting to ZooKeeper"" section) says:Once ZooKeeper is running, you have several options for connection to it:Java: Usebin/zkC",csbubbles,csbubbles
ZOOKEEPER-2115,ZooKeeper,2015-02-06T00:44:40.000+0000,Trivial,Initialize command succeeds even though it didn't in case of permission errors on the data directory,while testing single user mode that the initialize command succeeds even though it didn't in case of permission errors on the data directory:{code}....+ exec /usr/lib/zookeeper/bin/zkServer-initialize,mnarayan,mnarayan
ZOOKEEPER-2114,ZooKeeper,2015-02-05T08:06:56.000+0000,Major,jute generated allocate_* functions are not externally visible,Some jute generated functions (e.g. allocate_ACL_vector) that should be publicly exported are given local (vs global) linkage. This is due to an incomplete regex for EXPORT_SYMBOLS  in the C Makefile.,timrc,timrc
ZOOKEEPER-2113,ZooKeeper,2015-01-29T21:38:03.000+0000,Major,SSL support for ClientCnxnSocketNetty,This is a SSL feature on netty client.,hdeng,hdeng
ZOOKEEPER-2112,ZooKeeper,2015-01-28T01:00:32.000+0000,Major,Netty for quorum communication,Add Netty option to replace NIO for quorum communication.,hdeng,hdeng
ZOOKEEPER-2111,ZooKeeper,2015-01-27T19:21:08.000+0000,Major,Not isAlive states should be synchronized in ClientCnxn,"In ClientCnxn.queuePacket, it checks variables of state and closing and then make decisions. There is toctou race in queuePacket():{code}        if (!state.isAlive() || closing) {            conLossPa",hdeng,hdeng
ZOOKEEPER-2110,ZooKeeper,2015-01-27T04:11:29.000+0000,Minor,Typo fixes in the ZK documentation,"So as part of building an Aurora cluster ontop of Mesos, I wanted to learn ZK. I spent an evening reading much of the ZK documentation and noticed many grammatical or spelling errors. Being a good OSS",SEJeff,SEJeff
ZOOKEEPER-2109,ZooKeeper,2015-01-26T12:29:40.000+0000,Trivial,Typo in src/c/src/load_gen.c,"There is a minor typo in {{src/c/src/load_gen.c}}, ""Succesfully"" should be spelled ""Successfully""",ebourg,ebourg
ZOOKEEPER-2108,ZooKeeper,2015-01-26T12:19:14.000+0000,Minor,Compilation error in ZkAdaptor.cc with GCC 4.7 or later,"Hi,Debian and Fedora have a patch fixing a compilation failure in ZkAdaptor.cc but it doesn't appear to be fixed in the upcoming version 3.5.0. This issue is similar to ZOOKEEPER-470 and ZOOKEEPER-179",ebourg,ebourg
ZOOKEEPER-2107,ZooKeeper,2015-01-23T07:12:34.000+0000,Major,zookeeper client should support custom HostProviders,The zookeeper client currently contains a StaticHostProvider and no means to replace it with your own implementation of the existing HostProvider interface. It would be great if the zookeeper client w,robert.kamphuis,robert.kamphuis
ZOOKEEPER-2106,ZooKeeper,2015-01-13T16:28:14.000+0000,Critical,Error when reading from leader causes JVM to hang,"I tried looking through existing JIRA for something like this, but the closest I came was ZOOKEEPER-2104.  It looks very similar, but I don't know if it really is the same thing.  Essentially we had a",revans2,revans2
ZOOKEEPER-2105,ZooKeeper,2015-01-10T01:11:15.000+0000,Minor,PrintWriter left unclosed in NIOServerCnxn#checkFourLetterWord,{code}        final PrintWriter pwriter = new PrintWriter(                new BufferedWriter(new SendBufferWriter()));{code}pwriter should be closed upon return from the method.,yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2104,ZooKeeper,2015-01-10T00:48:51.000+0000,Major,Sudden crash of all nodes in the cluster,"In a 3 nodes ensemble, suddenly all the nodes seem to fail, displaying ""ZooKeeper is not running"" messages.Not retry seems to be happening after that.This a request to understand what happened and pro",benjamin.jaton,benjamin.jaton
ZOOKEEPER-2103,ZooKeeper,2015-01-07T20:55:11.000+0000,Minor,ZooKeeper Client Configuration,I ran into an issue when connecting to two ZooKeeper clusters from the same JVM application. One of the clusters required SASL authentication while the other one did not. Unfortunately the client uses,manolamancha,manolamancha
ZOOKEEPER-2102,ZooKeeper,2015-01-07T19:02:50.000+0000,Major,commitandactivate messages spamming the quorum,"Using zab-dump (https://github.com/twitter/zktraffic/pull/11), I am seeing this in a prod cluster running 3.5.0 + patches:{noformat}QuorumPacket(     timestamp=18:45:35:962873,     src=10.0.1.1:2889, ",rgs,rgs
ZOOKEEPER-2101,ZooKeeper,2015-01-04T10:13:32.000+0000,Major,Transaction larger than max buffer of jute makes zookeeper unavailable,"*Problem*For multi operation, PrepRequestProcessor may produce a large transaction whose size may be larger than the max buffer size of jute. There is check of buffer size in readBuffer method  of Bin",liushaohui,liushaohui
ZOOKEEPER-2100,ZooKeeper,2014-12-29T23:59:11.000+0000,Major,ZooKeeperSaslClient doesn't shut down Login thread,"I found this in 3.4.5, but a quick perusal of the code suggests this exists in later versions as well.Setup: I'm running some ZooKeeper SASL tests with Hadoop's MiniKDC under Solr's test framework, wh",gchanan,gchanan
ZOOKEEPER-2099,ZooKeeper,2014-12-29T21:35:58.000+0000,Major,Using txnlog to sync a learner can corrupt the learner's datatree,"When a learner sync's with the leader, it is possible for the Leader to send the learner a DIFF that does NOT contain all the transactions between the learner's zxid and that of the leader's zxid thus",svoutil,svoutil
ZOOKEEPER-2098,ZooKeeper,2014-12-29T20:34:20.000+0000,Major,QuorumCnxManager: use BufferedOutputStream for initial msg,"Whilst writing fle-dump (a tool like [zk-dump|https://github.com/twitter/zktraffic/], but to dump FastLeaderElection messages), I noticed that QCM is using DataOutputStream (which doesn't buffer) dire",rgs,rgs
ZOOKEEPER-2097,ZooKeeper,2014-12-19T22:30:32.000+0000,Minor,Clarify security requirement for Exists request,"According to the [Programmer's Guide|http://zookeeper.apache.org/doc/current/zookeeperProgrammers.html]:bq. Everyone implicitly has LOOKUP permission. This allows you to stat a node, but nothing more.",iandi,iandi
ZOOKEEPER-2096,ZooKeeper,2014-12-19T17:41:29.000+0000,Major,C client builds with incorrect error codes in VisualStudio 2010+,"It reports:warning C4005: 'EWOULDBLOCK' : macro redefinitionwarning C4005: 'EINPROGRESS' : macro redefinitionIn MSVS 2010+, these constants are now in <errno.h>.What's worse, they have different numer",vvs,vvs
ZOOKEEPER-2095,ZooKeeper,2014-12-18T21:58:39.000+0000,Minor,Add Systemd startup/conf files,"As adoption of systemd by distributions grows, it would be nice to have systemd configuration and startup files for Zookeeper in the upstream tree. I would thus like to contribute the following patch ",galaux,galaux
ZOOKEEPER-2094,ZooKeeper,2014-12-06T00:59:50.000+0000,Major,SSL feature on Netty,"Add SSL handler to Netty pipeline, and a default X509AuthenticationProvider to perform authentication.Review board: https://reviews.apache.org/r/30753/diff/#",iandi,iandi
ZOOKEEPER-2093,ZooKeeper,2014-12-01T18:05:13.000+0000,Minor,Expose cumulative latency and request count,"Currently Zookeeper exposes min, max and average since server start request latency.It'd also be useful to be able to calculate latency over a given time period. This patch exposes the total latency, ",brianbrazil,brianbrazil
ZOOKEEPER-2092,ZooKeeper,2014-11-27T13:03:29.000+0000,Major,A zk instance can not be connected for ZooKeeperServer is not running,"In our 5 node zk cluster, we found a zk node always can not be connected. From the stack we found the ZooKeeperServer hung at waiting the server to be running. But the node is running normally and syn",liushaohui,liushaohui
ZOOKEEPER-2091,ZooKeeper,2014-11-26T01:06:21.000+0000,Major,Possible logic error in ClientCnxnSocketNIO,"When SASL authentication is enabled, the ZooKeeper client will finally call ClientCnxnSocketNIO#sendPacket(Packet p) to send a packet to server:@Overridevoid sendPacket(Packet p) throws IOException { ",rchzzjcn,rchzzjcn
ZOOKEEPER-2090,ZooKeeper,2014-11-25T14:54:18.000+0000,Trivial,"Fix Zookeeper docs ""To be done"" notices","The docs on the website are full of TBDs since a long time ago. While there is not a full lack of docs, and you can get going with what there is, the main general-purpose entry points are not too poli",hsanjuan,hsanjuan
ZOOKEEPER-2089,ZooKeeper,2014-11-25T14:46:26.000+0000,Major,Improve the building blocks part of the programmer's guide,This part of the documentation has been incomplete since 3.1.2. The main reason seems to be that the information that was supposed to be there exists elsewhere in a different form. It needs a revision,fpj,fpj
ZOOKEEPER-2088,ZooKeeper,2014-11-24T13:49:34.000+0000,Trivial,Provide custom logging hook,"Hello, proud Zookeeper maintainers!I incoporated the zookeeper C client API in a quite large code base. The result is fine, everything works as expected but the logs. Our code already manages its log ",jf.smigielski,jf.smigielski
ZOOKEEPER-2087,ZooKeeper,2014-11-21T23:28:54.000+0000,Minor,Few UX improvements in ZooInspector,A few simple changes would simplify using ZooInspector a lot.  - Alphabetical order of nodes on a tree view- Short term caching of zookeeper nodes for faster rendering of node tree- Add/Delete node in,adudczak,adudczak
ZOOKEEPER-2086,ZooKeeper,2014-11-21T08:37:20.000+0000,Minor,Unnecessary error log when defaultWatcher  is not set for ZooKeeper client,"In org.apache.zookeeper.ZooKeeper.ZKWatchManager#materialize(), even if the defaultWatcher is null, it is still be added into the Set and returned. This would cause a lot of annoying error log at org.",rchzzjcn,rchzzjcn
ZOOKEEPER-2085,ZooKeeper,2014-11-19T00:54:41.000+0000,Major,Upgrade to jline2 ,Hive has upgraded to jline2 in HIVE-8609 due to a serious bug we found in HIVE-8565. It'd be great if Zookeeper could upgrade as well.,brocknoland,brocknoland
ZOOKEEPER-2084,ZooKeeper,2014-11-15T16:04:32.000+0000,Major,Document local session parameters,Document the options introduced in ZOOKEEPER-1147.,fpj,fpj
ZOOKEEPER-2083,ZooKeeper,2014-11-15T10:38:53.000+0000,Major,Remove deprecated LE implementations,"As per ZOOKEEPER-1153, we should remove implementations 0, 1, 2.",fpj,fpj
ZOOKEEPER-2082,ZooKeeper,2014-11-14T22:42:30.000+0000,Minor,Mistype of electionAlgo can fill out your disk in minutes,"The parameter, electionAlgo, is supposed to be 0--3. However, when I mistyped the value in my zoo.cfg (I'm stupid), ZK falls into a dead loop and starts filling up the entire disk which millions of th",tianyin,tianyin
ZOOKEEPER-2081,ZooKeeper,2014-11-14T01:27:51.000+0000,Major,Leader election cannot complete when a node is blackholed (unreachable) even when quorum is possible.,I noticed a situation when one of our 3-node clusters on RHEL lost a machine due to PSU failure. The remaining two nodes failed to complete leader election and would continually restart the leader ele,matan_a,matan_a
ZOOKEEPER-2080,ZooKeeper,2014-11-12T23:54:10.000+0000,Major,Fix deadlock in dynamic reconfiguration,I got the following test failure on MacBook with trunk code:{code}Testcase: testCurrentObserverIsParticipantInNewConfig took 93.628 sec  FAILEDwaiting for server 2 being upjunit.framework.AssertionFai,yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2079,ZooKeeper,2014-11-12T17:08:36.000+0000,Minor,"Stop daemon with ""kill"" rather than ""kill -9""","Script `zkServer.sh` stops zookeeper by sending the java process a `kill -9` (SIGKILL). As there seems to be no technical reasons to use such a radical signal rather than the default SIGTERM (-15), I ",galaux,galaux
ZOOKEEPER-2078,ZooKeeper,2014-11-12T12:09:38.000+0000,Minor,"zkServer.sh uses pattern unsupported by ""grep"" on Solaris","The script ""zkServer.sh"" contains a pattern (POSIX ""character class syntax"") which is not supported by ""grep"" on Solaris (both versions 10 and 11).{code}ZOO_DATADIR=""$(grep ""^[[:space:]]*dataDir"" ""$ZO",metatech,metatech
ZOOKEEPER-2077,ZooKeeper,2014-11-12T08:44:46.000+0000,Major,Wild-card/Regex Support for Zookeeper client commands,"We had an use-case where we had to list nodes matching a particular pattern from a given path. While looking at the ZK client commands, it seems that it does not support wildcard/regex. I did try to o",vivekpm,vivekpm
ZOOKEEPER-2076,ZooKeeper,2014-11-10T23:59:43.000+0000,Major,Improve Leader Change Mechanism,"When a leader is removed during a reconfiguration, ZOOKEEPER-107 uses a mechanism where the old leader nominates the new one. Although it reduces the time for a new leader to be elected, it still take",shralex,shralex
ZOOKEEPER-2075,ZooKeeper,2014-11-07T20:22:03.000+0000,Major,Utils.bufEquals,"Just happened to notice Utils.bufEquals(byte[], byte[]) as a rather large outlier (~7% CPU time) when running with an attached profiler.By just simply switching the implementation to delegate directly",chelin,chelin
ZOOKEEPER-2074,ZooKeeper,2014-11-07T09:20:00.000+0000,Minor,"Incorrect exit codes for ""./zkCli.sh cmd arg""","Linux@hghoulaslx406:/> $ZOOKEEPER_HOME/bin/zkCli.sh create /test ""test""Created /test1Linux@hghoulaslx406:/> echo $?0Linux@hghoulaslx406:/> $ZOOKEEPER_HOME/bin/zkCli.sh create /test ""test""Node already ",surendrasingh,surendrasingh
ZOOKEEPER-2073,ZooKeeper,2014-11-04T17:10:49.000+0000,Critical,Memory leak on zookeeper_close,"When running valgrind against a zookeeper client using the C API, I noticed an occasional memory leak on zookeeper_close.  I traced the issue to a regression added by fix ZOOKEEPER-804.  The attached ",dgosselin,dgosselin
ZOOKEEPER-2072,ZooKeeper,2014-10-28T22:19:53.000+0000,Major,Netty Server Should Configure Child Channel Pipeline By Specifying ChannelPipelineFactory,"Currently, netty server is setting up child channel in this way:{code} bootstrap.getPipeline().addLast(""servercnxnfactory"", channelHandler);{code}According to the [netty doc|http://netty.io/3.9/api/or",hdeng,hdeng
ZOOKEEPER-2071,ZooKeeper,2014-10-26T23:38:08.000+0000,Major,Update docs for Apache branding and trademark requirements,The documentation needs to follow the Apache branding and trademark requirements:  http://www.apache.org/foundation/marks/pmcs.html,wsmoak,wsmoak
ZOOKEEPER-2070,ZooKeeper,2014-10-26T23:30:11.000+0000,Minor,Explain how to update and publish the project website,"Need to document how the different parts of the project website get updated and published, both for committers, and for potential contributors who do not have write access.",wsmoak,wsmoak
ZOOKEEPER-2069,ZooKeeper,2014-10-26T16:58:31.000+0000,Major,Netty Support for ClientCnxnSocket,Review Board: https://reviews.apache.org/r/27244/diff/#,hdeng,hdeng
ZOOKEEPER-2068,ZooKeeper,2014-10-26T03:38:04.000+0000,Major,ServerCnxnTest.testServerCnxnExpiry failed when using Netty server option,"If using Netty server (setting ""zookeeper.serverCnxnFactory"" to ""NettyServerCnxnFactory""), ServerCnxnTest.testServerCnxnExpiry always failed",hdeng,hdeng
ZOOKEEPER-2067,ZooKeeper,2014-10-25T01:40:51.000+0000,Minor,Init script fails to track PID file when using a non-standard dataDir,"When setting a dataDir in zoo.cfg that does not match /var/lib/zookeeper, the supplied init.d script failed to track the PID file. This change moves the logic that is present in zkServer.sh to determi",phobos182,phobos182
ZOOKEEPER-2066,ZooKeeper,2014-10-24T15:16:44.000+0000,Minor,Updates to README.txt,Updates to README.txt - first reference should be to Apache ZooKeeper - fix obsolete ibiblio-rsync-repository url - better describe the release process - minor grammar and punctuation changes,wsmoak,wsmoak
ZOOKEEPER-2065,ZooKeeper,2014-10-23T00:05:23.000+0000,Minor,Debian package java depdencency,The Debian control file sets a dependency on sun-java6-jre. We currently run Zookeeper in production with Java 1.7. This makes it difficult to support in our environment since it attempts to install a,phobos182,phobos182
ZOOKEEPER-2064,ZooKeeper,2014-10-21T19:57:54.000+0000,Critical,Prevent resource leak in various classes,"In various classes, there is potential resource leak.e.g. LogIterator / RandomAccessFileReader is not closed upon return from the method.Corresponding close() should be called to prevent resource leak",yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-2063,ZooKeeper,2014-10-17T20:34:38.000+0000,Major,Netty+SSL support for client-server communication,"ZooKeeper currently have netty option on server side. We want to support netty on client side too. After that, we could add ssl support based on netty channel.",hdeng,hdeng
ZOOKEEPER-2062,ZooKeeper,2014-10-14T23:23:44.000+0000,Major,RemoveWatchesTest takes forever to run,"[junit] Running org.apache.zookeeper.RemoveWatchesTest    [junit] Tests run: 46, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 306.188 sec",fpj,fpj
ZOOKEEPER-2061,ZooKeeper,2014-10-14T18:51:42.000+0000,Major,Zookeeper needs an official RPM package. I am happy to build and submit one.,,mistermocha,mistermocha
ZOOKEEPER-2060,ZooKeeper,2014-10-14T17:58:38.000+0000,Major,Trace bug in NettyServerCnxnFactory,"In NettyServerCnxnFactory, high throughput triggers a deadlock.This is caused by a channel-buffer-dumping debug statement in NettyServerCnxnFactory.java that is executed regardless of log level.This c",iandi,iandi
ZOOKEEPER-2059,ZooKeeper,2014-10-09T09:03:08.000+0000,Major,"Use command like this ""./zkCli.sh -server host:port cmd args"" but it doesn't work, 3.4.5 version is work fine","Use command like this [./zkCli.sh -server host:port cmd args], such as [./zkCli.sh -server localhost:2181 create /test """"]  to create a node, 3.4.5 is work fine, but 3.4.6 it doesn't work.for 3.4.5 it",hade_huang,hade_huang
ZOOKEEPER-2058,ZooKeeper,2014-10-09T05:04:28.000+0000,Major,rat: exclude *.cer files,Somehow the release audit started complaining about *.cer files.,michim,michim
ZOOKEEPER-2057,ZooKeeper,2014-10-09T00:52:26.000+0000,Major,ZooKeeper should be as fast as Kafka,Kafka can achieve ~750K/s records for async replication. We can see that it's highly performant for eventual consistency model.Some might argue that ZooKeeper is a strong consistency model. Nonetheles,hdeng,hdeng
ZOOKEEPER-2056,ZooKeeper,2014-10-08T15:51:41.000+0000,Major,Zookeeper 3.4.x and 3.5.0-alpha is not OSGi compliant,"Similar to this issue https://issues.apache.org/jira/browse/ZOOKEEPER-1334, the MANIFEST.MF is still flawed. When using in OSGi, I got this exception:java.lang.NoClassDefFoundError: org/ietf/jgss/GSSE",kdong,kdong
ZOOKEEPER-2055,ZooKeeper,2014-10-07T11:56:49.000+0000,Minor,Don't throw ArrayIndexOutOfBoundsException when SASL username/password isn't specified,"When using SASLAuthenticationProvider and the jaas.conf file doesn't have a username and/or password for either the server or client configuration, when the client tries to connect via zkCli, an Array",svramusi,svramusi
ZOOKEEPER-2054,ZooKeeper,2014-10-07T01:52:47.000+0000,Major,test-patch.sh: don't set ulimit -n,It seems to be causing NioNettySuiteHammerTest failure.,michim,michim
ZOOKEEPER-2053,ZooKeeper,2014-10-02T20:39:51.000+0000,Major,Zookeeper scripts should honor ZOOKEEPER_HOME,"Currently the scripts will determine the root of the Zookeeper installation based on the location of the script. However, it would be convenient if the scripts honored the ZOOKEEPER_HOME environment v",owen.omalley,owen.omalley
ZOOKEEPER-2052,ZooKeeper,2014-10-02T07:08:40.000+0000,Major,Unable to delete a node when the node has no children,We stumbled upon a ZooKeeper bug where a node with no children cannot be removed on our 3 node ZooKeeper ensemble or standalone ZooKeeper on Red Hat Enterprise Linux x86_64 environment.  Here is an ex,yipng,yipng
ZOOKEEPER-2051,ZooKeeper,2014-09-30T20:08:42.000+0000,Critical,Creating ephemeral znodes from within a transaction fail with local sessions,"With local sessions enabled, the premise is that as soon as you try to create an ephemeral znode your session will be upgraded to global. The problem is that the session upgrade logic doesn't intercep",rgs,rgs
ZOOKEEPER-2050,ZooKeeper,2014-09-30T13:35:59.000+0000,Minor,Maven dependency should remove the 3 dependencies ,"When i add the latest zookeeper jar in the dependency it throws the error and say following jars are missing.If i added those in exclusion its working fine.<exclusions>				<exclusion>					<groupId>com",samraj,samraj
ZOOKEEPER-2049,ZooKeeper,2014-09-29T18:08:50.000+0000,Major,Yosemite build failure: htonll conflict,recordio.h defines {{htonll}} which conflicts with Apple's equally named implementation from within arpa/inet.h.{noformat} gcc -DHAVE_CONFIG_H -I. -I. -I. -I./include -I./tests -I./generated -Wall -We,tillt,tillt
ZOOKEEPER-2048,ZooKeeper,2014-09-26T07:10:55.000+0000,Major,Ability to support alphabetic characters in the version string,"Following ZOOKEEPER-1598, could we further enhance ZK to support alphabetic characters in the version string?E.g.,  zookeeper-3.4.5.ABC.1.2.3.4-1.jar.",chunjun.xiao,chunjun.xiao
ZOOKEEPER-2047,ZooKeeper,2014-09-25T17:35:46.000+0000,Major,testTruncationNullLog fails on windows,"The calls to delete the log file on windows are failing, so the test ends up failing. The fix is to close the db before deleting.",fpj,fpj
ZOOKEEPER-2046,ZooKeeper,2014-09-23T06:43:14.000+0000,Major,Compile zookeeper by JDK 7 in default,"Currently, zookeeper is compiled by JDK 5 in default as<property name=""javac.target"" value=""1.5"" /><property name=""javac.source"" value=""1.5"" />we may change it to JDK 7 in default",rguo,rguo
ZOOKEEPER-2045,ZooKeeper,2014-09-22T23:17:41.000+0000,Minor,ConnectStringParser public api didn't handle null connect string,"{code}public final class ConnectStringParser {...   public ConnectStringParser(String connectString) {   ...{code}ConnectStringParser is a public api. Besides that, both ZooKeeper constructor and ZooK",hdeng,hdeng
ZOOKEEPER-2044,ZooKeeper,2014-09-22T10:17:01.000+0000,Minor,CancelledKeyException in zookeeper branch-3.4,"I am getting cancelled key exception in zookeeper (version 3.4.5). Please see the log below. When this error is thrown, the connected solr shard is going down by giving the error ""Failed to index meta",shamjith.antholi,shamjith.antholi
ZOOKEEPER-2043,ZooKeeper,2014-09-22T09:15:09.000+0000,Major,"Too many connections,maxClientCnxns  don't close ","org.apache.zookeeper.server.NIOServerCnxnvoid doIO(SelectionKey k) throws InterruptedException {        try {            if (isSocketOpen() == false) {                LOG.warn(""trying to do i/o on a n",hikin,hikin
ZOOKEEPER-2042,ZooKeeper,2014-09-17T17:44:45.000+0000,Minor,zkServer.sh does not work properly on Solaris,"There are two issues in the zkServer.sh script that make it not work properly out of the box on Solaris.1. The bin/zkServer.sh script uses plain ""echo"" in all instances but one: when writing the pid t",jlindwall,jlindwall
ZOOKEEPER-2041,ZooKeeper,2014-09-17T02:10:36.000+0000,Major,maxClientCnxns should limit connections for each process rather than ip,Recently I learned more about maxClientCnxns configuration and read the read the code of implement. I know now it's the limitation of the number of connection from the same ip.But actually we may run ,tobe,tobe
ZOOKEEPER-2040,ZooKeeper,2014-09-16T16:05:19.000+0000,Major,Server to log underlying cause of SASL connection problems,"When you have SASL connectivity problems, you spend time staring at logs ideally logs with stack traces.ZK server can help here by including the stack traces when there is a SASL auth problem, rather",stevel@apache.org,stevel@apache.org
ZOOKEEPER-2039,ZooKeeper,2014-09-16T02:34:57.000+0000,Minor,Jute compareBytes incorrect comparison index,"The Jute utility's nave byte-array comparison compares b1[off1+i] with b2[off2+1]. (A literal 1, not the variable i)It should be off2+i, in parallel with the other operand.",iandi,iandi
ZOOKEEPER-2038,ZooKeeper,2014-09-16T02:23:04.000+0000,Minor,Coding error in recipes/lock/src/c/src/zoo_lock.c,"In fuction child_floor(), strcmp() is used to compare the whole string.But there exists conditions a sorted_data looks like (""x-000-00"", ""x-222-01"", ""x-111-02""), and now ""x-222-01"" is calling child_fl",tsingakbar,tsingakbar
ZOOKEEPER-2037,ZooKeeper,2014-09-15T21:00:16.000+0000,Major,ZooKeeper methods to wait on client connection (re)establishment.,"When a ZooKeeper object is created and returned, it is not guaranteed that connection to a server is established.Usually, a wait/signal pattern is used for the ZK watcher{code}latch = new CountDownLat",hdeng,hdeng
ZOOKEEPER-2036,ZooKeeper,2014-09-15T08:08:27.000+0000,Blocker,Client which is not authorized able to access the Secure Data which is created by the Secure Client, *{color:blue}Scenario:{color}* Started the Secure ZK Cluster.Logged with Secure ZK Client(by passing valid jaas.conf) and created the ZnodesNow logged in to same secure cluster using unsecure ZKClien,brahmareddy,brahmareddy
ZOOKEEPER-2035,ZooKeeper,2014-09-13T17:33:14.000+0000,Minor,diagnostics on SASL connection problems doesn't match error strings sent back,"The diagnostics code in {{ZooKeeperSaslClient.createSaslToken()}} which looks for a {{""(""Mechanism level: Server not found in Kerberos database (7) - UNKNOWN_SERVER)""}} error string isn't finding a ma",stevel@apache.org,stevel@apache.org
ZOOKEEPER-2034,ZooKeeper,2014-09-13T17:09:48.000+0000,Minor,StringIndexOutOfBoundsException in createSaslServer ,"I'm seeing {{StringIndexOutOfBoundsException}} in {{createSaslServer}}, where my test kerberos code is (presumably) is not correctly set up. Looking at the comments, it hints that the problem is my pr",stevel@apache.org,stevel@apache.org
ZOOKEEPER-2033,ZooKeeper,2014-09-10T18:14:12.000+0000,Major,zookeeper follower fails to start after a restart immediately following a new epoch,"The following issue was seen when adding a new node to a zookeeper cluster.Reproduction steps1. Create a 2 node ensemble. Write some keys.2. Add another node to the ensemble, by modifying the config. ",asadpanda,asadpanda
ZOOKEEPER-2032,ZooKeeper,2014-09-09T23:33:55.000+0000,Minor,ReconfigBackupTest didn't clean up resources.,,hdeng,hdeng
ZOOKEEPER-2031,ZooKeeper,2014-09-09T20:43:26.000+0000,Major,Support tagging a QuorumServer,"Currently ZooKeeper only allows using the server id which is an integer for identifying servers. For my (unavoidable) use case, there may be concurrent dynamic removes and adds of servers which may ev",something,something
ZOOKEEPER-2030,ZooKeeper,2014-09-07T04:42:42.000+0000,Minor,"dynamicConfigFile should have an absolute path, not a relative path, to the dynamic configuration file",a relative path doesn't seem like a good idea since it will work only if we start the server from the same directory as we did previously.,shralex,shralex
ZOOKEEPER-2029,ZooKeeper,2014-09-05T23:21:43.000+0000,Minor,Leader.LearnerCnxAcceptor should handle exceptions in run(),Leader.LearnerCnxAcceptor swallows exceptions and shuts itself down. It should instead crash the Leader.,asadpanda,asadpanda
ZOOKEEPER-2028,ZooKeeper,2014-09-05T07:20:52.000+0000,Minor,TestClient#testAuth aborts because ASSERT throws exception again in destructor when there is active exception already,"Hi Guys,the testcase consistently fails if debug is turned on(set zoo_set_debug_level(ZOO_LOG_LEVEL_DEBUG) in TestDriver.cc); if debug is OFF, it fails for the first time, subsequent runs succeed.can ",tianq,tianq
ZOOKEEPER-2027,ZooKeeper,2014-09-04T09:31:23.000+0000,Minor,Dynamic quorum weight shifting between datacenters for follow the sun operations,"Relating to ZOOKEEPER-107 which has just added dynamic membership configuration, I'd like to propose a simplified one command weight shifting between datacenters.This will allow for a globalized quoru",harisekhon,harisekhon
ZOOKEEPER-2026,ZooKeeper,2014-09-02T07:21:54.000+0000,Minor,Startup order in ServerCnxnFactory-ies is wrong,"{{NIOServerCnxnFactory}} and {{NettyServerCnxnFactory}} {{startup}} method implementations are binding {{ZooKeeperServer}} too late, so in {{ZooKeeperServer}} in its startup can fail to register appro",sslavic,sslavic
ZOOKEEPER-2025,ZooKeeper,2014-08-29T20:21:33.000+0000,Major,"Single-node ejection caused apparent reconnection storm, leading to cluster unresponsiveness","Description will be included in an attached PDF.The two main questions we have are:1: What would be the cause of the ""Unreasonable Length"" error in our context, and how might we prevent it from occurr",tyree731,tyree731
ZOOKEEPER-2024,ZooKeeper,2014-08-28T15:41:09.000+0000,Major,Major throughput improvement with mixed workloads,"The patch is applied to the commit processor, and solves two problems:1. Stalling - once the commit processor encounters a local write request, it stalls local processing of all sessions until it rece",kfirlevari,kfirlevari
ZOOKEEPER-2023,ZooKeeper,2014-08-28T11:29:54.000+0000,Minor,Improved system test,"Adding the ability to perform a system test of mixed workloads using read-only/mixed/write-only clients. In addition, adding few basic latency statistics.https://reviews.apache.org/r/25217/Just in cas",kfirlevari,kfirlevari
ZOOKEEPER-2022,ZooKeeper,2014-08-28T08:29:31.000+0000,Minor,The log of sessionTimeout is inaccurate,"When the client constructs ZooKeeper object, it will record the basic info in log. But its sessionTimeout may be inaccurate if it's not equal to negotiationSessionTimeout. Can we change the descriptio",tobe,tobe
ZOOKEEPER-2021,ZooKeeper,2014-08-26T13:22:40.000+0000,Major,ZKserver.cmd fails usng the config param ,"When usgin the command like this:zkServer.cmd zoo.cfgwe get this error:ERROR: Invalid arguments, exiting abnormallyjava.lang.NumberFormatException: For input string :""C:\Development\zookeeperserver-3.",agareppe,agareppe
ZOOKEEPER-2020,ZooKeeper,2014-08-24T19:04:15.000+0000,Major,Change TRUNC to SNAP in sync phase for safety guarantee ,"ZOOKEEPER-1549 discusses the problem:""When the leader started, it will apply every txn in its txnlog (incl. uncommitted ones) into its in-memory data tree""I didn't any solution so far solved this prob",hdeng,hdeng
ZOOKEEPER-2019,ZooKeeper,2014-08-22T23:23:31.000+0000,Major,Unhandled exception when setting invalid limits data in /zookeeper/quota/some/path/zookeeper_limits ,"If you have quotas properly set for a given path, i.e.:{noformat}create /zookeeper/quota/test/zookeeper_limits 'count=1,bytes=100'create /zookeeper/quota/test/zookeeper_stats 'count=1,bytes=100'{nofor",rgs,rgs
ZOOKEEPER-2018,ZooKeeper,2014-08-22T18:17:15.000+0000,Major,Zookeper node fails to boot if writes are reordered,After studying the steps ZooKeeper takes to update the logs we found the following bug. The bug may manifest in file systems with writeback buffering. If you run the zookeeper client script (zkCli.sh),samera,samera
ZOOKEEPER-2017,ZooKeeper,2014-08-22T14:10:44.000+0000,Minor,New tests for reconfig failure cases,1) New test file with some reconfig failure cases. 2) Moved testLeaderTimesoutOnNewQuorum from ReconfigTest to the new file3) Added a check to standaloneDisabledTest.java,shralex,shralex
ZOOKEEPER-2016,ZooKeeper,2014-08-21T17:23:09.000+0000,Major,Automate client-side rebalancing,"ZOOKEEPER-1355 introduced client-side rebalancing, which is implemented in both the C and Java client libraries. However, it requires the client to detect a configuration change and call updateServerL",hdeng,hdeng
ZOOKEEPER-2015,ZooKeeper,2014-08-21T10:00:57.000+0000,Minor,I found memory leak in zk client for c++,"==15070== 895,632 bytes in 57,640 blocks are indirectly lost in loss record 370 of 371==15070==    at 0x4C2677B: calloc (vg_replace_malloc.c:593)==15070==    by 0x4C59BB: deserialize_String_vector (zo",phipgao,phipgao
ZOOKEEPER-2014,ZooKeeper,2014-08-21T02:57:37.000+0000,Blocker,Only admin should be allowed to reconfig a cluster,"ZOOKEEPER-107 introduces reconfiguration support via the reconfig() call. We should, at the very least, ensure that only the Admin can reconfigure a cluster. Perhaps restricting access to /zookeeper/c",rgs,rgs
ZOOKEEPER-2013,ZooKeeper,2014-08-19T22:12:17.000+0000,Trivial,typos in zookeeperProgrammers,I noticed a couple typos. See patch.,tbc0,tbc0
ZOOKEEPER-2012,ZooKeeper,2014-08-15T04:08:46.000+0000,Minor,HBase client hangs after client-side OOM,"please see http://apache-hbase.679495.n3.nabble.com/HBase-client-hangs-after-client-side-OOM-td4062675.html.it looks the send thread caught the error successfully, as it is finally running fine.. but ",tianq,tianq
ZOOKEEPER-2011,ZooKeeper,2014-08-15T03:34:01.000+0000,Minor,move legacy zookeeper jar to dist-maven,"Since most users do not care about the source code, it would be better to put the fat jar to disk-maven dir. also see the README.txt:{quote}zookeeper-<version>.jar         - legacy jar file which cont",tianq,tianq
ZOOKEEPER-2010,ZooKeeper,2014-08-14T18:27:47.000+0000,Minor,Add logs when ZooKeeper is back running,"NIOServerCnxn produces ""Zookeeper not running"" logs, which is very useful.It would be also useful to have a way to know when Zookeeper has recovered from it and it running again.",benjamin.jaton,benjamin.jaton
ZOOKEEPER-2009,ZooKeeper,2014-08-14T09:39:53.000+0000,Minor,zkCli does not execute command passed as arguments,"In 3.4.5, zkCli executed commands passed on the command line. This command would create the {{/test}} znode and exit, with a non-zero exit code if the command failed:{code}$ ./zkCli.sh create /test nu",thecoop1984,thecoop1984
ZOOKEEPER-2008,ZooKeeper,2014-08-12T09:20:19.000+0000,Minor,System test fails due to missing leader election port,Leader election and client ports are not initialized when creating a QuorumServer during system tests.,kfirlevari,kfirlevari
ZOOKEEPER-2007,ZooKeeper,2014-08-08T21:37:58.000+0000,Major,Update RPM package to be relocatable and contrib packaging bugfix,"RPM package init.d startup script is not relocatable, and there is some bugs in contrib directory build structure where property is not passed from main project to contrib, hence some of the contrib p",eyang,eyang
ZOOKEEPER-2006,ZooKeeper,2014-08-07T22:26:52.000+0000,Major,Standalone mode won't take client port from dynamic config,"When clientPort is specified in the new format, using ""server.x=host:port1:port2;clientPort"" in either static or dynamic file and without a ""clientPort = xxxx"" statement, a standalone mode server does",hdeng,hdeng
ZOOKEEPER-2005,ZooKeeper,2014-08-07T14:10:23.000+0000,Major,Failure to setCurrentEpoch on lead,We are embedding the zookeeper server in our container and every now and then I see the exception below when running our integration tests suite.This is something that have never bother us before when,iocanel,iocanel
ZOOKEEPER-2004,ZooKeeper,2014-08-05T07:47:59.000+0000,Major,zkCli doesn't output command,"Hi,With zookeeper 3.3.6, output is as expected (cf last line which returns the result of ls /{code}nelson@nelson-laptop (0) $ ./zookeeper-3.3.6/bin/zkCli.sh -server 127.0.0.1:2181 ls /Connecting to 12",chmod777,chmod777
ZOOKEEPER-2003,ZooKeeper,2014-08-05T07:04:17.000+0000,Major,Missing fsync() on the logs parent directory,"After studying the steps ZooKeeper takes to update the logs we found the following bug. The bug may not manifest in the current file system implementations, but it violates the POSIX recommendations a",samera,samera
ZOOKEEPER-2002,ZooKeeper,2014-08-03T08:06:45.000+0000,Major,Host,,rmprint,rmprint
ZOOKEEPER-2001,ZooKeeper,2014-07-31T22:37:00.000+0000,Major,Please provide a parse method with input stream as parameter,org.apache.zookeeper.server.quorum.QuorumPeerConfig has the following two methods.1.public void parse(String path) throws ConfigException2. public void parseProperties(Properties zkProp)It would be gr,suresh_mat@yahoo.com,suresh_mat@yahoo.com
ZOOKEEPER-2000,ZooKeeper,2014-07-31T06:49:13.000+0000,Minor,Fix ReconfigTest.testPortChange,"testPortChange changes all ports and role of the server and thus causes existing clients to disconnect, while this wouldn't happen if only the client port changes. Need to fix it to only change client",shralex,shralex
ZOOKEEPER-1999,ZooKeeper,2014-07-30T18:09:48.000+0000,Major,Converting CRLF to LF in DynamicConfigBackwardCompatibilityTest,The gitattributes set java files line ending be LF.The DynamicConfigBackwardCompatibilityTest.java uses CRLF and should be converted to LF.,hdeng,hdeng
ZOOKEEPER-1998,ZooKeeper,2014-07-29T19:27:17.000+0000,Critical,C library calls getaddrinfo unconditionally from zookeeper_interest,(commented this on ZOOKEEPER-338)I've just noticed that we call getaddrinfo from zookeeper_interest... on every call. So from zookeeper_interest we always call update_addrs:https://github.com/apache/z,rgs,rgs
ZOOKEEPER-1997,ZooKeeper,2014-07-28T20:22:38.000+0000,Major,server with a single line server list shouldn't be StandaloneEnabled,"A server goes to standalone mode if there is only a single server line in server list description.In fact, the server line was ignored.The test [testStandaloneQuorum|https://github.com/apache/zookeepe",hdeng,hdeng
ZOOKEEPER-1996,ZooKeeper,2014-07-28T13:17:52.000+0000,Major,Incorrect statement in documentation,Documentation contains the following warning about FreeBSD:http://zookeeper.apache.org/doc/r3.4.6/zookeeperAdmin.html#sc_systemReq-------FreeBSD is supported as a development and production platform f,trtrmitya,trtrmitya
ZOOKEEPER-1995,ZooKeeper,2014-07-28T02:09:32.000+0000,Major,Safely remove client port in old config file on reconfig itself,1. check on reconfig the clientPort field.2. ,hdeng,hdeng
ZOOKEEPER-1994,ZooKeeper,2014-07-28T02:08:52.000+0000,Major,Backup config files.,"We should create a backup file for a static or dynamic configuration file before changing the file. Since the static file is changed at most twice (once when removing the ensemble definitions, at whic",hdeng,hdeng
ZOOKEEPER-1993,ZooKeeper,2014-07-28T02:07:47.000+0000,Blocker,Keep the client port upon parsing config,"1. Current implementation ignored and removed ""clientPort"" on parsing. For the sake of backward compatibility, ""clientPort"" should be kept and used upon parsing config on fresh boot.2. When getting cl",hdeng,hdeng
ZOOKEEPER-1992,ZooKeeper,2014-07-28T02:05:18.000+0000,Blocker,backward compatibility of zoo.cfg,"This issue supersedes our discussion in ZOOKEEPER-1989.To summarize, ZK users can seamlessly upgrade 3.4 to 3.5. But two things will happen:1. the server list will be separated out as a dynamic file (",hdeng,hdeng
ZOOKEEPER-1991,ZooKeeper,2014-07-26T01:29:49.000+0000,Minor,zkServer.sh returns with a zero exit status when a ZooKeeper process is already running,"If ZooKeeper is started with zkServer.sh, and an error is shown that a ZooKeeper process is already running, the command returns with an exit status of 0, while it should end with a non-zero exit stat",reedwm,reedwm
ZOOKEEPER-1990,ZooKeeper,2014-07-25T23:33:44.000+0000,Critical,suspicious instantiation of java Random instances,"It's not clear to me why we are doing this, but it looks very suspicious. Why aren't we just calling ""new Random()"" in these cases? (even for the tests I don't really see it - typically that would jus",phunt,phunt
ZOOKEEPER-1989,ZooKeeper,2014-07-24T17:38:18.000+0000,Blocker,backward compatibility of zoo.cfg,"Before 3.5.x, users define zoo.cfg with ""clientPort"" parameter which is used to identify on which port the server is serving clients.After upgrading to 3.5.x, the new format:{noformat}server.$id=$addr",hdeng,hdeng
ZOOKEEPER-1988,ZooKeeper,2014-07-24T17:26:53.000+0000,Major,new test patch to verify dynamic reconfig backward compatibility,,rgs,rgs
ZOOKEEPER-1987,ZooKeeper,2014-07-24T00:02:02.000+0000,Blocker,unable to restart 3 node cluster,"I tried a fairly simple test, start a three node cluster, bring it down, then restart it. On restart the servers elect the leader and send updates, however the negotiation never completes - the client",phunt,phunt
ZOOKEEPER-1986,ZooKeeper,2014-07-23T21:22:58.000+0000,Minor,refactor log trace on touchSession,"The previous log trace has a minor mistake after applying ZOOKEEPER-1982:It will show ""invalidsession"" and ""closingsession"". There should be a whitespace in between.I might wanna further refactor the ",hdeng,hdeng
ZOOKEEPER-1985,ZooKeeper,2014-07-23T02:22:37.000+0000,Minor,Memory leak in C client,"in the file zookeeper.c, most function call of ""close_buffer_oarchive(&oa, 0)"" shoud been instead by close_buffer_oarchive(&oa, rc < 0 ? 1 : 0); ",desmondhe,desmondhe
ZOOKEEPER-1984,ZooKeeper,2014-07-22T21:37:26.000+0000,Major,testLeaderTimesoutOnNewQuorum is a flakey test ,"I'm seeing intermittent failures in testLeaderTimesoutOnNewQuorum It's failing both on jdk6 and jdk7. (this is my personaljenkins, I haven't see any other failures than this during the pastfew days).{",phunt,phunt
ZOOKEEPER-1983,ZooKeeper,2014-07-22T21:18:38.000+0000,Major,Append to zookeeper.out (not overwrite) to support logrotation,Currently zkServer.sh will redirect output to zookeeper.out using a simple shell redirect. When logrotate (and similar tools) are used to rotate the zookeeper.out file with the 'copytruncate' semantic,shyamal,shyamal
ZOOKEEPER-1982,ZooKeeper,2014-07-22T20:07:52.000+0000,Minor,Refactor (touch|add)Session in SessionTrackerImpl.java,"This JIRA extends the idea of ZOOKEEPER-1978.Besides refactoring get-put operations of concurrentMap in addSession method, addSession also calls touchSession which repeatedly checks if session existed",hdeng,hdeng
ZOOKEEPER-1981,ZooKeeper,2014-07-21T16:45:19.000+0000,Minor,Fix Dodgy Code Warnings identified by findbugs 2.0.3,"There are two cases:1. a duplicate check of null bytes.2. a lot switch statement without default case.For the default case, I suggest 1. throwing an exception as a way to break the program. It's highl",hdeng,hdeng
ZOOKEEPER-1980,ZooKeeper,2014-07-21T07:31:10.000+0000,Major,"how to draw the figure""ZooKeeper Throughput as the Read-Write Ratio Varies"" ?","I want to know how to draw the figure ""ZooKeeper Through as the Read-Write Ratio Varies"" and "" Reliability in the Presence of Errors"" .is it produced by the benchmarking tools provide by the Computer ",cynric,cynric
ZOOKEEPER-1979,ZooKeeper,2014-07-20T22:30:33.000+0000,Minor,Fix Performance Warnings found by Findbugs 2.0.3,findbugs complains that{code}new Integer(cnxToValue);{code}should be changed to {code}Integer.parseInt(cnxToValue);{code},hdeng,hdeng
ZOOKEEPER-1978,ZooKeeper,2014-07-20T22:28:21.000+0000,Minor,Fix Multithreaded correctness Warnings,"findbugs is complaining{code} if (sessionsById.get(id) == null) {             SessionImpl s = new SessionImpl(id, sessionTimeout);             sessionsById.put(id, s);}{code}is not atomic for the gap ",hdeng,hdeng
ZOOKEEPER-1977,ZooKeeper,2014-07-20T18:32:22.000+0000,Major,Calibrate initLimit dynamically,We have seen a number of times users failing to get an ensemble up because the snapshot transfer times out. We should be able to do better than this and calibrate initLimit dynamically. I was thinking,fpj,fpj
ZOOKEEPER-1976,ZooKeeper,2014-07-20T03:01:01.000+0000,Major,address internationalization issues identified by findbugs 2.0.3,"Findbugs 2.0.3 found a number of internationalization issues with the code, we ignored these for the time being in ZOOKEEPER-1975, however we should address them one by one eventually.",phunt,phunt
ZOOKEEPER-1975,ZooKeeper,2014-07-20T02:53:11.000+0000,Major,"Turn off ""internationalization warnings"" in findbugs exclude file","A more recent version of findbugs (2.0.3) added some checks - one is for internationalization issues. We should fix these, but for the time being we'll ignore them. (I'll also create a separate jira t",phunt,phunt
ZOOKEEPER-1974,ZooKeeper,2014-07-19T16:57:27.000+0000,Blocker,"winvs2008 jenkins job failing with ""unresolved external symbol""",The winvs2008 build is failing withbq. unresolved external symbol __imp__ZOO_READONLY_STATEsee: https://builds.apache.org/view/S-Z/view/ZooKeeper/job/ZooKeeper-trunk-WinVS2008/1445/console,phunt,phunt
ZOOKEEPER-1973,ZooKeeper,2014-07-19T16:50:31.000+0000,Major,Jetty Server changes broke ibm6 support,"The recent Jetty Server additions ZOOKEEPER-1346 have broken ibm6 support, can someone take a look? (we've had issues like this in the past - typically due to using specialized/sun classes that don't ",phunt,phunt
ZOOKEEPER-1972,ZooKeeper,2014-07-18T23:44:02.000+0000,Major,Fix invalid volatile long/int increment (++),The findbugs complains about incrementing a volatile variable in [AuthFastLeaderElection|https://github.com/apache/zookeeper/blob/087abf83684167ae56864fe4c3be0079fa653266/src/java/main/org/apache/zook,hdeng,hdeng
ZOOKEEPER-1971,ZooKeeper,2014-07-18T21:33:56.000+0000,Major,Make JMX remote monitoring port configurable,This is a follow-up item from ZOOKEEPER-1948.,gsbiju,gsbiju
ZOOKEEPER-1970,ZooKeeper,2014-07-18T17:46:30.000+0000,Major,Fix Findbugs Warnings,The findbugs complained a lot of warnings after upgrade:https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2191//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html#Warnings_I18NIt w,hdeng,hdeng
ZOOKEEPER-1969,ZooKeeper,2014-07-18T16:47:12.000+0000,Major,Fix Port Already In Use for JettyAdminServerTest,The test is failiing:{code}failed SocketConnector@0.0.0.0:8080: java.net.BindException: Address already in use{code}I tried to assign a unique port in test and Jenkins build comes normal again.,hdeng,hdeng
ZOOKEEPER-1968,ZooKeeper,2014-07-18T00:24:25.000+0000,Major,Make Jetty dependencies optional in ivy.xml,Should we make the jetty/jackson libraries optional in ivy.xml given that Jetty Server is itself optional (an uses reflection to boot).,phunt,phunt
ZOOKEEPER-1967,ZooKeeper,2014-07-16T20:46:04.000+0000,Major,"Eliminate the temp dynamic config file, find last proposed config in transaction log.",The .next temporary config file is created when a server acks a reconfig proposal.During reconfig commit this file becomes the permanent dynamic config file.This temp file is read (if exists) during s,shralex,shralex
ZOOKEEPER-1966,ZooKeeper,2014-07-15T13:52:11.000+0000,Major,VS and line breaks,The patch attached to https://issues.apache.org/jira/browse/ZOOKEEPER-1953 has caused problems for git users when committed from SVN.The attached patch simply changes the line endings of the offending,oho,oho
ZOOKEEPER-1965,ZooKeeper,2014-07-15T02:36:07.000+0000,Major,Install could not be done on powerpc Error: Unrecognized opcode: `lock',"after (ant compile_jute) and(cd src/c/ ./configure), make can not be done!It contains error:/tmp/ccyJ6new.s: Assembler messages:/tmp/ccyJ6new.s:67: Error: Unrecognized opcode: `lock'/tmp/ccyJ6new.s:10",sonnyandqc,sonnyandqc
ZOOKEEPER-1964,ZooKeeper,2014-07-11T23:20:58.000+0000,Minor,Fix Flaky Test in ReconfigTest.java,"There is flaky tests in ReconfigTest showing something like:{code}junit.framework.AssertionFailedError: Mismatches ElectionAddress! expected:<[127.0.0.1]:12369> but was:<[localhost]:12369>	at org.apac",hdeng,hdeng
ZOOKEEPER-1963,ZooKeeper,2014-07-10T17:20:34.000+0000,Major,Make JDK 7 the minimum requirement for Zookeeper,JDK 6 stopped receiving public updates in early 2013:http://www.oracle.com/technetwork/java/eol-135779.htmlI propose making JDK 7 the minimum for Zookeeper going forward.  One patch that I've personal,ecarter,ecarter
ZOOKEEPER-1962,ZooKeeper,2014-07-10T11:29:42.000+0000,Minor,Add a CLI command to recursively list a znode and children,"When troubleshooting applications where znodes can be multiple levels deep  (eg. HBase replication), it is handy to see all child znodes recursively rather than run an ls for each node manually.So I p",ggop,ggop
ZOOKEEPER-1961,ZooKeeper,2014-07-08T15:56:13.000+0000,Major,NPE in ZooKeeperServerMain.shutdown(),"while trying to stop a server that appears not to have started properly, the {{shutdown()}} method triggered an NPE",stevel@apache.org,stevel@apache.org
ZOOKEEPER-1960,ZooKeeper,2014-07-08T14:29:13.000+0000,Major,Improve logs in PurgeTxnLog.java to give more details,"Improve logs in PurgeTxnLog.java to give more detailsSuggest to add logs in following scenarios1. If no file to purge (deletion list is empty) - INFO2. Add logs for debug purpose (txnLog, dataDir and ",nijel,nijel
ZOOKEEPER-1959,ZooKeeper,2014-07-08T14:23:57.000+0000,Major,"Move zkEnv files to conf folder, since it is expected to be configured by user",Move zkEnv files to conf folderThis is the  common pattern followed across other hadoop components,nijel,nijel
ZOOKEEPER-1958,ZooKeeper,2014-07-08T00:32:36.000+0000,Minor,Client does not detect rejected connections,"When attempting to connect to a zookeeper server that is not currently running, the connection will return the ""connection refused"" message through the timeout logic.  This is because Windows is retur",odysseus654,odysseus654
ZOOKEEPER-1957,ZooKeeper,2014-07-07T18:33:40.000+0000,Minor,ReconfigTest can fail when checking remote peer MXBean ElectionAddress,"CThis happens most of the time when I run the {{ReconfigTest}} unit test on Mac OS X Mavericks, using Java 6 or 7. I get failures like this:{noformat}Mismatches ElectionAddress! expected:<[127.0.0.1]:",bhavanki,bhavanki
ZOOKEEPER-1956,ZooKeeper,2014-07-07T10:04:25.000+0000,Minor,Support Cleanup script in windows,The script zkCleanup.sh support cleaning the zk data in linux system.The same function needs to be supported in windows also,nijel,nijel
ZOOKEEPER-1955,ZooKeeper,2014-07-04T22:30:02.000+0000,Major,EOFException on Reading Snapshot,"We have a 5 node zookeeper cluster that has been operating normally for several months.  Starting a few days ago, the entire cluster crashes a few times per day, all nodes at the exact same time.  We ",az,az
ZOOKEEPER-1954,ZooKeeper,2014-07-03T20:45:09.000+0000,Minor,StaticHostProvider loses IPv6 scope ID when resolving server addresses,I have been getting constant failures of the {{ClientPortBindTest}} unit test (see ZOOKEEPER-1256) on my Macbook. I traced the problem to loss of the IPv6 scope ID on the address chosen for the loopba,bhavanki,bhavanki
ZOOKEEPER-1953,ZooKeeper,2014-07-03T03:49:15.000+0000,Major,Add solution and project files to enable build with current Visual Studio editions (VS 2012/2013) - 32-bit and 64-bit.,Add solution and project files to enable build with current Visual Studio editions (VS 2012/2013) - 32-bit and 64-bit.,phunt,phunt
ZOOKEEPER-1952,ZooKeeper,2014-07-02T12:26:43.000+0000,Minor,Default log directory and file name can be changed,"The log folder and log file name is configurable now.The default log folder is ""."" in distribution. So the log file (zookeeper.out) will be placed in bin folderCan this be changed to <zk_home>/logs/zo",nijel,nijel
ZOOKEEPER-1951,ZooKeeper,2014-07-01T15:57:27.000+0000,Trivial,Clean up raw type compile warnings under Java 7,"Compiling with Java 1.7.0_60 under Mac OS X 10.9.3, I get five warnings about raw types being found. (Compiler warnings are attached.) These can probably be cleaned up pretty easily.The warnings were ",bhavanki,bhavanki
ZOOKEEPER-1950,ZooKeeper,2014-06-30T21:43:37.000+0000,Major,configBackwardCompatibilityMode breaks compatibility,"The current implementation divide information of servers of legacy config into two separate dynamic config files. There is a problem.When we set ""clientPort"" variable in config file, it gets automatic",hdeng,hdeng
ZOOKEEPER-1949,ZooKeeper,2014-06-27T08:01:23.000+0000,Major,recipes jar not included in the distribution package,"Following recipe jars doesn't exists in the distribution ""zookeeper-3.4.6.tar.gz""recipes/election/zookeeper-3.4.6-recipes-election.jarrecipes/lock/zookeeper-3.4.6-recipes-lock.jarrecipes/queue/zookeep",rakeshr,rakeshr
ZOOKEEPER-1948,ZooKeeper,2014-06-26T20:21:37.000+0000,Major,Enable JMX remote monitoring,The zooker server start up script includes the option to enable jmx monitoring but only locally. Can we update the script so that remote monitoring can also be enabled which will help in data collecti,gsbiju,gsbiju
ZOOKEEPER-1947,ZooKeeper,2014-06-26T18:48:54.000+0000,Major,Implement a better way to specify joiners,Currently a server must appear in its own config when it starts up. One of the reasons is that the server spec has LE ports through which it can connect to the leader. This means that when creating an,shralex,shralex
ZOOKEEPER-1946,ZooKeeper,2014-06-25T05:34:03.000+0000,Minor,Server logging should reflect dynamically reconfigured address,"The server's client address:port is part of the QuorumPeer's thread name and thus shown in logs. Thread name is not currently updated after dynamic reconfiguration of the address, resulting in confusi",vuakko,vuakko
ZOOKEEPER-1945,ZooKeeper,2014-06-24T03:51:18.000+0000,Major,"deb - zkCli.sh, zkServer.sh and zkEnv.sh regression caused by ZOOKEEPER-1663","This is the same issue as ZOOKEEPER-1719, where the shebang for etc/init.d/zookeeper is set to /bin/sh, but needs to be fixed for deb packages(in src/packages/deb/init.d/zookeeper)",maflick88,maflick88
ZOOKEEPER-1944,ZooKeeper,2014-06-21T07:00:03.000+0000,Major,The 2pc picture of zookeeperInternals.pdf may be not correct. ,"In the page 6, the 2pc diagram may be not right.The commit direction may be from leader to followers.",bestree007,bestree007
ZOOKEEPER-1943,ZooKeeper,2014-06-19T17:36:06.000+0000,Major,"""src/contrib/zooinspector/NOTICE.txt"" isn't complying to "".gitattributes"" in branch-3.4","Using the git repo and checkout ""branch-3.4"", the ""src/contrib/zooinspector/NOTICE.txt"" file always shows up for changes but cannot be checkout or reset.This is caused by "".gitattributes"" line ""text=a",hdeng,hdeng
ZOOKEEPER-1942,ZooKeeper,2014-06-18T14:48:33.000+0000,Major,ZooKeeper OSGi package imports: org.ietf.jgss dependency missing from manifest,"For OSGI applications, the zookeeper manifest file should have org.ietf.jgss in its Import-Package statement. org.apache.zookeeper.client.ZooKeeperSaslClient imports org.ietf.jgss.*. The following Cla",misquith,misquith
ZOOKEEPER-1941,ZooKeeper,2014-06-14T17:52:18.000+0000,Major,"2014-06-14 12:40:46,886 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server  Will not attempt to authenticate using SASL (unknown error)",,kondisetty@gmail.com,kondisetty@gmail.com
ZOOKEEPER-1940,ZooKeeper,2014-06-13T16:57:11.000+0000,Trivial,Integrate with Docker.,"Docker is an open platform for developers and sysadmins to build, ship, and run distributed applications.It's become quite popular and I'd like to see the zookeeper community suggest a standard way to",medined,medined
ZOOKEEPER-1939,ZooKeeper,2014-06-12T06:39:20.000+0000,Major,ReconfigRecoveryTest.testNextConfigUnreachable is failing,"Following is the failure log message:2014-06-11 23:53:22,538 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@62] - TEST METHOD FAILED testNextConfigUnreachablejava.lang.AssertionError: QP ",rakeshr,rakeshr
ZOOKEEPER-1938,ZooKeeper,2014-06-12T05:04:32.000+0000,Trivial,bump version in the C library as we prepare for 3.5.0 release,"building the C library from trunk now has 3.4.0 everywhere which makes it confusing when testing, so lets bump the version. ",rgs,rgs
ZOOKEEPER-1937,ZooKeeper,2014-06-11T03:28:06.000+0000,Major,init script needs fixing for ZOOKEEPER-1719,"ZOOKEEPER-1719 changed the interpreter to bash for zkCli.sh, zkServer.sh and zkEnv.sh, but did not change src/packages/deb/init.d/zookeeper This causes the following failure using /bin/sh[...] root@ho",CpuID,CpuID
ZOOKEEPER-1936,ZooKeeper,2014-06-10T07:25:37.000+0000,Minor,Server exits when unable to create data directory due to race ,We sometime see issues with ZooKeeper server not starting and seeing this error in the log:[2014-05-27 09:29:48.248] ERROR   : -               .org.apache.zookeeper.server.ZooKeeperServerMain    Unexp,hmusum,hmusum
ZOOKEEPER-1935,ZooKeeper,2014-06-10T05:46:48.000+0000,Major,Current ZooKeeper C Library (Client) makes a distinction between removing a child node and adding a child node on receiving ZOO_CHILD_EVENT session event,"I want to determine whether a node adds or removes a child node. But based on the currently implementation, I can only to get the session event ZOO_CHILD_EVENT. There is no ways to determine whether i",wangfy8599,wangfy8599
ZOOKEEPER-1934,ZooKeeper,2014-06-05T23:01:06.000+0000,Major,Stale data received from sync'd ensemble peer,In our regression testing we encountered an error wherein we were caching a value we read from zookeeper and then experienced session loss. We subsequently got reconnected to a different zookeeper ser,marshall,marshall
ZOOKEEPER-1933,ZooKeeper,2014-06-03T16:59:07.000+0000,Major,Windows release build of zk client cannot connect to zk server,"When building zookeeper in Visual Studio in debug mode, the client can connect to the server without error. When building in release mode, I get a continuous error message:{code}2014-06-02 11:25:20,07",norrisl,norrisl
ZOOKEEPER-1932,ZooKeeper,2014-06-02T00:58:01.000+0000,Major,org.apache.zookeeper.test.LETest.testLE fails once in a while,"org.apache.zookeeper.test.LETest.testLE is failing on trunk once in a while. I'm not able to reproduce the failure on my box. I looked at the log, but I couldn't quite figure out what's going on. http",michim,michim
ZOOKEEPER-1931,ZooKeeper,2014-06-01T20:09:11.000+0000,Major,intern project idea: implement zab,The goal of this project is to define an interface for replication protocol and implement the interface using ZAB. This project will most likely be done outside of ZooKeeper to avoid impacting the sta,michim,michim
ZOOKEEPER-1930,ZooKeeper,2014-05-28T05:47:51.000+0000,Minor,A typo in zookeeper recipes.html,"With the sequence flag, ZooKeeper automatically appends a sequence number that is *greater that* any one previously appended to a child of ""/election"".*greater that* above should be *greater than*",chengwei-yang,chengwei-yang
ZOOKEEPER-1929,ZooKeeper,2014-05-24T04:13:02.000+0000,Major,std::length_error on update children,"Trying to open zk root directory:./zkfuse -z localhost:2181 -m /CLOUD/zookeeper -d1    [0x7f89362d0780] INFO  zkfuse null - Starting zkfusecacheSize = 256, debug = 1, forceDirSuffix = ""._dir_"", mount ",olamedia,olamedia
ZOOKEEPER-1928,ZooKeeper,2014-05-22T00:46:46.000+0000,Major,add configurable throttling to the number of snapshots concurrently sent by a leader,"We want to add configurable throttling to the number of snapshots concurrently sent by a leader.  Without this, when recovering from a partial outage or network partition, the leader can become overlo",ecarter,ecarter
ZOOKEEPER-1927,ZooKeeper,2014-05-10T18:06:37.000+0000,Major,"zkServer.sh fails to read dataDir (and others) from zoo.cfg on Solaris 10 (grep issue, manifests as FAILED TO WRITE PID).  ","Fails to write PID file with a permissions error, because the startup script fails to read the dataDir variable from zoo.cfg, and then tries to use the drive root ( / ) as the data dir.Tracked the pro",super_ed_9000,super_ed_9000
ZOOKEEPER-1926,ZooKeeper,2014-05-08T22:34:57.000+0000,Major,Unit tests should only use build/test/data for data,"Some of the unit tests are creating temp files under system tmp dir (/tmp), and put data there.We should encapsulate all temporary data from unit tests under build/test/data. ant clean will clean all ",enis,enis
ZOOKEEPER-1925,ZooKeeper,2014-05-08T19:53:05.000+0000,Major,Time to Live or auto expiration of zookeeper node,Today whenever a znode is created; it stays there for ever. We all know that there is a limitation in terms of how many nodes a system can handle. It would be nice to have a way to specify expiry time,ojoshi,ojoshi
ZOOKEEPER-1924,ZooKeeper,2014-05-07T12:28:07.000+0000,Major,"\,/ 'n;kj kkln. l,   ",,shwethags,shwethags
ZOOKEEPER-1923,ZooKeeper,2014-05-05T13:49:19.000+0000,Major,A typo in zookeeperStarted document,"There is a typo in the document zookeeperStarted.*, see http://zookeeper.apache.org/doc/trunk/zookeeperStarted.html, in the section *Connecting to ZooKeeper*, where the *help* output *createpath* whic",chengwei-yang,chengwei-yang
ZOOKEEPER-1922,ZooKeeper,2014-05-05T12:21:40.000+0000,Minor,Negative min latency value,"We're seeing the output of stat on one node return a negative value for min latency time:stat Zookeeper version: 3.4.6-1569965, built on 02/20/2014 09:09 GMTClients:...Latency min/avg/max: -477/149/26",jpotter,jpotter
ZOOKEEPER-1921,ZooKeeper,2014-05-04T15:28:32.000+0000,Major,Zk binding to 127.0.0.1 for quorum connections,"I did not see this behavior with 3.4.5. When I upgraded to 3.4.6, couldn't establish quorum any more - what I found was that the listener on :3888 was only running on 127.0.0.1.I was able to work arou",nneul,nneul
ZOOKEEPER-1920,ZooKeeper,2014-04-28T02:59:50.000+0000,Minor,Login thread is not shutdown when close the ClientCnxn,"A new ZooKeeper client will start three threads, the SendThread, EventThread and LoginThread. I belive that these threads will be shutdown after call the zk.close. I test that the SendThread and Event",liuyang@huawei,liuyang@huawei
ZOOKEEPER-1919,ZooKeeper,2014-04-25T02:44:52.000+0000,Major,Update the C implementation of removeWatches to have it match ZOOKEEPER-1910,See https://issues.apache.org/jira/browse/ZOOKEEPER-1910,rgs,rgs
ZOOKEEPER-1918,ZooKeeper,2014-04-24T20:04:46.000+0000,Minor,Add 64 bit Windows as a supported development platform,Change this line:Win32 is supported as a development platform only for both server and client.to:Win32 and Win64 are supported as a development platform only for both server and client.http://zookeepe,michim,michim
ZOOKEEPER-1917,ZooKeeper,2014-04-22T18:02:04.000+0000,Blocker,Apache Zookeeper logs cleartext admin passwords,Check the CVE entry for a description:http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-0085,fpj,fpj
ZOOKEEPER-1916,ZooKeeper,2014-04-19T23:56:25.000+0000,Minor,make Cli depend on zookeeper,Currently building the solution fails because the dependency is not properly set.,michim,michim
ZOOKEEPER-1915,ZooKeeper,2014-04-19T23:55:00.000+0000,Minor,Use $(ProjectDir) macro to specify include directories,Right now we need to explicitly set the ZOOKEEPER_HOME environment variable.,michim,michim
ZOOKEEPER-1914,ZooKeeper,2014-04-18T22:51:56.000+0000,Major,TestWatchers.cc failure,https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2051/console     [exec]      [exec] /home/jenkins/jenkins-slave/workspace/PreCommit-ZOOKEEPER-Build/trunk/src/c/tests/TestWatchers.cc:667: Asser,michim,michim
ZOOKEEPER-1913,ZooKeeper,2014-04-18T20:42:22.000+0000,Major,Invalid manifest files due to bogus revision property value,"Without the proposed patch, I get invalid manifests because stderr is added to the revision property. I think this might be something specific to my setup though:{noformat}    $ java -version    Picke",rgs,rgs
ZOOKEEPER-1912,ZooKeeper,2014-04-14T20:14:50.000+0000,Critical,Leader election lets 2 leaders happen,"In 3-node cluster, when there are 2 nodes die and reboot during leader election, it might lead to the case that there are 2 leaders happen in the system. Eventually, a leader that does not has followe",tanakorn,tanakorn
ZOOKEEPER-1911,ZooKeeper,2014-04-11T15:08:25.000+0000,Major,REST contrib module does not include all required files when packaged,"If you compile the REST contrib module, the tarball will only include the main JAR. It will not bundle the required dependencies or include the minimal working configuration files.",mackrorysd,mackrorysd
ZOOKEEPER-1910,ZooKeeper,2014-04-11T08:08:12.000+0000,Major,RemoveWatches wrongly removes the watcher if multiple watches exists on a path,"Consider a case where zkclient has added 2 data watchers(say 'w1' and 'w2') on '/node1'.Now user has removed w1, but this is deleting the 'CnxnWatcher' in ZK server against the ""/node1"" path. This wil",rakeshr,rakeshr
ZOOKEEPER-1909,ZooKeeper,2014-04-09T23:51:28.000+0000,Major,removeWatches doesn't return NOWATCHER when there is no watch set,"ZOOKEEPER-442 introduced support for a new opcode: removeWatches. The way it was implemented though, implies that you need to check on the client side if a watch/watcher is set *before* you send your ",rgs,rgs
ZOOKEEPER-1908,ZooKeeper,2014-04-01T22:09:51.000+0000,Major,setAcl should be have a recursive function,setAcl should be have a recursive function.  This becomes a problem with HBase when trying to back in and out of secure clusters.,kevin.odell,kevin.odell
ZOOKEEPER-1907,ZooKeeper,2014-03-31T15:18:57.000+0000,Major,Improve Thread handling,"Server has many critical threads running and co-ordinating each other like  RequestProcessor chains et. When going through each threads, most of them having the similar structure like:{code}public voi",rakeshr,rakeshr
ZOOKEEPER-1906,ZooKeeper,2014-03-31T07:52:07.000+0000,Major,zkpython: invalid data in GetData for empty node,In python if we ask {{zookeeper.get}} (which translates into {{pyzoo_get}}) for empty node we can get trash in result on Python level. Issue is pretty tricky. It goes like this:  * python C extension ,nekto0n,nekto0n
ZOOKEEPER-1905,ZooKeeper,2014-03-25T13:33:23.000+0000,Major,ZKClients are hitting KeeperException$ConnectionLossException due to wrong usage pattern,"Since the ZooKeeper client connection establishment happens in async way, the client should wait for the 'KeeperState.SyncConnected' event before start performing any ops. Many tests are having this k",rakeshr,rakeshr
ZOOKEEPER-1904,ZooKeeper,2014-03-25T08:05:05.000+0000,Major,WatcherTest#testWatchAutoResetWithPending is failing,"Following is the stacktrace taken from [Build : ZooKeeper-3.4-WinVS2008_java/465|https://builds.apache.org/job/ZooKeeper-3.4-WinVS2008_java/465/]{code}    [junit] 2014-03-19 09:28:50,020 [myid:] - INF",rakeshr,rakeshr
ZOOKEEPER-1903,ZooKeeper,2014-03-24T14:52:18.000+0000,Major,30/6,,CobraRoy,CobraRoy
ZOOKEEPER-1902,ZooKeeper,2014-03-24T14:51:44.000+0000,Major,summertime,,CobraRoy,CobraRoy
ZOOKEEPER-1901,ZooKeeper,2014-03-23T20:08:23.000+0000,Minor,[JDK8] Sort children for comparison in AsyncOps tests,"AsyncOpsTest, ChrootAsyncTest, and NioNettySuiteTest can fail running on Java 8 if child znodes are not added to a list in the same order as expected. For example{noformat}Testcase: testAsyncGetChildr",apurtell,apurtell
ZOOKEEPER-1900,ZooKeeper,2014-03-21T18:11:12.000+0000,Blocker, NullPointerException in truncate,The other day we started up a ZK instance that had been down for a bit (1day) and started getting NPEs all over the place...{noformat}2014-20-03 11:15:42.320 INFO  QuorumPeerConfig [main] - Reading co,sbower,sbower
ZOOKEEPER-1899,ZooKeeper,2014-03-20T15:01:55.000+0000,Major,zookeeper-cli does not use STDERR and STDOUT correctly to output information,"When running a zookeeper-cli, any error or logging information should go to STDERR and the result(s) of the command to STDOUT. For example, let's take the unix 'ls' command:Unix, STDERR is redirected ",srinathman,srinathman
ZOOKEEPER-1898,ZooKeeper,2014-03-20T14:45:36.000+0000,Critical,"ZooKeeper Java cli shell always returns ""0"" as exit code","zookeeper-cli always return ""0"" as exit code whether the command has been successful or not.Ex:Unsuccessful:{code}-bash-4.1$ zookeeper-client aaConnecting to localhost:21812014-03-20 14:43:01,361 [myi",srinathman,srinathman
ZOOKEEPER-1897,ZooKeeper,2014-03-18T23:10:22.000+0000,Major,ZK Shell/Cli not processing commands,When running zookeeper 3.4.5 I was able to run commands using zkCli such as zkCli.sh -server 127.0.0.1:2182 ls /zkCli.sh -server 127.0.0.1:2182 get /blahAfter upgrading to 3.4.6 these commands no long,gnoremac,gnoremac
ZOOKEEPER-1896,ZooKeeper,2014-03-17T16:41:32.000+0000,Major,Reconfig error messages when upgrading from 3.4.6 to 3.5.0,"When upgrading from 3.4.6 (rc0 actually) to 3.5.0 (trunk as of two weeks ago actually) I got this error message:{noformat}2014-02-26 22:12:15,446 - ERROR [WorkerReceiver[myid=4]] - Something went wron",rgs,rgs
ZOOKEEPER-1895,ZooKeeper,2014-03-16T16:35:55.000+0000,Blocker,"update all notice files, copyright, etc... with the new year - 2014",From a note on the list:Hi folks!This is a reminder to update the year in the NOTICE files from 2013 (or older) to 2014.From a legal POV this is not that important as some say.But nonetheless it's goo,phunt,phunt
ZOOKEEPER-1894,ZooKeeper,2014-03-14T02:43:02.000+0000,Major,ObserverTest.testObserver fails consistently,"ObserverTest.testObserver fails consistently on my box. It looks like the observer (myid:3) calls QuorumPeer.getQuorumVerifier() in a tight loop, and the leader (myid:2) is not getting enough CPU time",michim,michim
ZOOKEEPER-1893,ZooKeeper,2014-03-13T03:46:13.000+0000,Minor,automake: use serial-tests option,"automake switched to run tests in parallel by default in 1.13, but zktest-st and zktest-mt can't run in parallel. We can use the serial-tests option to run tests serially but this option was introduce",michim,michim
ZOOKEEPER-1892,ZooKeeper,2014-03-13T02:06:36.000+0000,Major,addrvec_next gets called twice when failing over to the next server,"zookeeper_interest() already calls zoo_cycle_next_server() when the socket is set to -1, so we shouldn't call addrvec_next in handle_error. This causes the next server to get skipped. Zookeeper_simple",michim,michim
ZOOKEEPER-1891,ZooKeeper,2014-03-10T23:33:59.000+0000,Major,StaticHostProviderTest.testUpdateLoadBalancing times out,StaticHostProviderTest.testUpdateLoadBalancing is consistently timing out on my box. I'll attach a log file.,michim,michim
ZOOKEEPER-1890,ZooKeeper,2014-02-28T01:21:05.000+0000,Major,unclosed FileOutputStream in FileTxnLog.rollLog,"When calling rollLog, FileTxnLog flushes but does not close its FileOutputStream, leaking a file descriptor.",gaul,gaul
ZOOKEEPER-1889,ZooKeeper,2014-02-26T00:38:40.000+0000,Major,Implement Top-N sort operator,"When, for example, doing an order by with a limit, if limit << total, it would be much more efficient to maintain a priority queue instead of sorting the entire data set.In most cases, this will great",sphillips,sphillips
ZOOKEEPER-1888,ZooKeeper,2014-02-25T19:07:11.000+0000,Major,"ZkCli.cmd commands fail with ""'java' is not recognized as an internal or external command""",This appears to be a bug in ZkCli.cmd as it does not try to locate java using the JAVA_HOME environment variable. Will post the patch soon.,ivanmi,ivanmi
ZOOKEEPER-1887,ZooKeeper,2014-02-24T01:00:12.000+0000,Major,C implementation of removeWatches,This is equivalent for ZOOKEEPER-442's Java impl. ,rgs,rgs
ZOOKEEPER-1886,ZooKeeper,2014-02-21T05:35:58.000+0000,Major,"Exception in Follower.followLeader() where Leader is still running, can make that follower hang in LeaderElection","SocketTimeoutException in {{Follower#followLeader()}} where the leader is successfully running can make this follower not able to rejoin the quorum.Analysis:1. SocketTimeoutException in below code, wi",vinayrpet,vinayrpet
ZOOKEEPER-1885,ZooKeeper,2014-02-20T15:55:47.000+0000,Major,Znodes deletable by anyone without having the rights to do so,"Hi,I'm not really sure if this is a bug or a misunderstanding on my part, but I have the problem that, when I create a znode with an ACL as follows:{noformat}[zk: localhost:2181(CONNECTED) 60] create ",bveliqi,bveliqi
ZOOKEEPER-1884,ZooKeeper,2014-02-20T11:58:58.000+0000,Minor,zkCli silently ignores commands with missing parameters,"Apparently, we have fixed this in trunk, but not in the 3.4 branch. When we pass only the path to create, the command is not executed because it expects an additional parameter and there is no error m",fpj,fpj
ZOOKEEPER-1883,ZooKeeper,2014-02-18T03:30:27.000+0000,Minor,C client unit test failures,"I am seeing unit test failure for c client after I do 'make check' as shown below. The failure is pretty consistent, but does not happen always. This is on latest check-out of zookeeper trunk.--------",abutala,abutala
ZOOKEEPER-1881,ZooKeeper,2014-02-13T23:53:00.000+0000,Major,Shutdown server immediately upon PrivilegedActionException,"It seems when an SaslServer cannot be created due to a PriviledgedActionException, it is better to shutdown the server immediately instead of letting it to propagate. The current behaviour will just s",d.yuan,d.yuan
ZOOKEEPER-1879,ZooKeeper,2014-02-10T20:46:16.000+0000,Major,improve the correctness checking of txn log replay,In ZOOKEEPER-1573 we decided to fix an issue by relaxing some of the checking. Specifically when the sequence of txns is as follows:* zxid 1: create /prefix/a* zxid 2: create /prefix/a/b* zxid 3: dele,phunt,phunt
ZOOKEEPER-1878,ZooKeeper,2014-02-09T04:18:47.000+0000,Major,Inconsistent behavior in autocreation of dataDir and dataLogDir,During the startup if dataDir is not exists server will auto create this. But when user specifies different dataLogDir location which doesn't exists the server will validate and startup will fail. {co,rakeshr,rakeshr
ZOOKEEPER-1877,ZooKeeper,2014-02-06T23:13:21.000+0000,Critical,Malformed ACL Id can crash server with skipACL=yes,"Because of the way fixupACL is written in PrepRequestProcessor, a request that feeds in an ACL with null members in the Id will cause a server with skipACL=yes to crash.A patch will be provided that r",cchen,cchen
ZOOKEEPER-1876,ZooKeeper,2014-02-06T21:14:49.000+0000,Major,Add support for installing windows services in .cmd scripts,"On windows, daemons can be installed as windows services during installation, so that they can be managed using the standard ""service"" commands and UI. For this, we have to generate an XML file descri",enis,enis
ZOOKEEPER-1875,ZooKeeper,2014-02-03T04:06:08.000+0000,Minor,NullPointerException in ClientCnxn$EventThread.processEvent,We've been seeing NullPointerException while working on HBase:{code}14/01/30 22:15:25 INFO zookeeper.ZooKeeper: Client environment:user.dir=/home/biadmin/hbase-trunk14/01/30 22:15:25 INFO zookeeper.Zo,jinghe,jinghe
ZOOKEEPER-1874,ZooKeeper,2014-02-02T04:58:03.000+0000,Major,Add proper teardown/cleanups in ReconfigTest to shutdown quorumpeer,This jira to provide proper cleanups in ReconfigTest test cases.,rakeshr,rakeshr
ZOOKEEPER-1873,ZooKeeper,2014-01-29T21:06:55.000+0000,Major,Unnecessarily InstanceNotFoundException is coming when unregister failed jmxbeans,"MBeanRegistry#register is keeping the beans which are failed to complete the registration. During unregistration time, these failed beans will results in following exception.{code}    [junit] 2014-01-",rakeshr,rakeshr
ZOOKEEPER-1872,ZooKeeper,2014-01-29T20:19:26.000+0000,Major,QuorumPeer is not shutdown in few cases,Few cases are leaving quorumpeer running after the test case execution. Needs proper teardown for these.,rakeshr,rakeshr
ZOOKEEPER-1871,ZooKeeper,2014-01-29T06:47:03.000+0000,Major,Add an option to zkCli to wait for connection before executing commands,Add an option to zkCli to wait for connection before executing any commands.This is helpful for the execution of inline commands.We are having some scripts to create/delete znodes through commandline.,vinayrpet,vinayrpet
ZOOKEEPER-1870,ZooKeeper,2014-01-28T18:45:43.000+0000,Blocker,flakey test in StandaloneDisabledTest.startSingleServerTest,I'm seeing lots of the following failure. Seems like a flakey test (passes every so often).{noformat}junit.framework.AssertionFailedError: client could not connect to reestablished quorum: giving up a,phunt,phunt
ZOOKEEPER-1869,ZooKeeper,2014-01-27T19:43:38.000+0000,Critical,zk server falling apart from quorum due to connection loss and couldn't connect back,"We have deployed zookeeper version 3.5.0.1515976, with 3 zk servers in the quorum.The problem we are facing is that one zookeeper server in the quorum falls apart, and never becomes part of the cluste",djagtap,djagtap
ZOOKEEPER-1868,ZooKeeper,2014-01-27T15:08:32.000+0000,Major,Server not coming back up in QuorumZxidSyncTest,"We got this stack trace:{noformat}[junit] 2014-01-27 09:14:08,481 [myid:] - INFO  [main:ZKTestCase$1@65] - FAILED testLateLogs    [junit] java.lang.AssertionError: waiting for server up    [junit] 	at",fpj,fpj
ZOOKEEPER-1867,ZooKeeper,2014-01-27T02:15:29.000+0000,Major,Bug in ZkDatabaseCorruptionTest,"If I'm reading the test case testCorruption right, it seems to depend on server 5 being elected, but if it is not the case, then it fails waiting for a server to be up.",fpj,fpj
ZOOKEEPER-1866,ZooKeeper,2014-01-22T11:09:13.000+0000,Major,ClientBase#createClient is failing frequently,"Following failure pattern has been observed many times in windows build. After creating the zookeeper client, the respective connection bean is not available in the jmx beans and is failing the tests.",rakeshr,rakeshr
ZOOKEEPER-1865,ZooKeeper,2014-01-22T00:51:50.000+0000,Major,Fix retry logic in Learner.connectToLeader() ,"We discovered a long leader election time today in one of our prod ensemble.Here is the description of the event. Before the old leader goes down, it is able to announce notification message. So 3 out",thawan,thawan
ZOOKEEPER-1864,ZooKeeper,2014-01-20T06:09:53.000+0000,Major,quorumVerifier is null when creating a QuorumPeerConfig from parsing a Properties object,This bug was found when using ZK 3.5.0 with curator-test 2.3.0.curator-test is building a QuorumPeerConfig from a Properties object and then when we try to run the quorum peer using that configuration,something,something
ZOOKEEPER-1863,ZooKeeper,2014-01-15T18:23:17.000+0000,Blocker,"Race condition in commit processor leading to out of order request completion, xid mismatch on client.","In CommitProcessor.java processor, if we are at the primary request handler on line 167:{noformat}                while (!stopped && !isWaitingForCommit() &&                       !isProcessingCommit(",dutch,dutch
ZOOKEEPER-1862,ZooKeeper,2014-01-13T03:50:57.000+0000,Major,ServerCnxnTest.testServerCnxnExpiry is intermittently failing,"ServerCnxnTest#testServerCnxnExpiry test case is failing in the trunk build with the following exception{code}    [junit] 2014-01-11 10:13:07,696 [myid:] - INFO  [NIOServerCxnFactory.AcceptThread:0.0.",rakeshr,rakeshr
ZOOKEEPER-1861,ZooKeeper,2014-01-11T23:50:07.000+0000,Minor,ConcurrentHashMap isn't used properly in QuorumCnxManager,"queueSendMap is a ConcurrentHashMap.At line 210:{code}            if (!queueSendMap.containsKey(sid)) {                queueSendMap.put(sid, new ArrayBlockingQueue<ByteBuffer>(                        ",yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-1860,ZooKeeper,2014-01-11T20:54:28.000+0000,Major,Async versions of reconfig don't actually throw KeeperException nor InterruptedException,"This was caught by [~fournc], the async versions of reconfig in the Java client don't actually throw KeeperException nor InterruptedException. Since this is unreleased code (i.e.: for 3.5.0) I don't t",rgs,rgs
ZOOKEEPER-1859,ZooKeeper,2014-01-11T18:20:18.000+0000,Minor,pwriter should be closed in NIOServerCnxn#checkFourLetterWord(),{code}        final PrintWriter pwriter = new PrintWriter(                new BufferedWriter(new SendBufferWriter()));...        } else if (len == telnetCloseCmd) {            cleanupWriterSocket(null,yuzhihong@gmail.com,yuzhihong@gmail.com
ZOOKEEPER-1858,ZooKeeper,2014-01-03T18:55:27.000+0000,Major,JMX checks - potential race conditions while stopping and starting server,"I've noticed one potential case, where previously created zkclient session immediately reconnected and publishing those beans while starting back the zkserver and affecting zk#startup jmx checks.Say, ",rakeshr,rakeshr
ZOOKEEPER-1857,ZooKeeper,2014-01-03T06:57:46.000+0000,Major,PrepRequestProcessotTest doesn't shutdown ZooKeeper server,,abranzyck,abranzyck
ZOOKEEPER-1856,ZooKeeper,2014-01-02T23:43:22.000+0000,Major,zookeeper C-client can fail to switch from a dead server in a 3+ server ensemble if the client only has a 2 server list.,"If a client has a 2 server list, and is currently connected to the last server in that list, and that server then goes offline, the addrvec_next() call handle_error() will push the client to the start",dutch,dutch
ZOOKEEPER-1855,ZooKeeper,2014-01-02T23:07:11.000+0000,Minor,calls to zoo_set_server() fail to flush outstanding request queue.,"If one calls zoo_set_servers to update with a new server list that does not contain the currently connected server, the client will disconnect.  Fair enough, but any outstanding requests on the set_re",dutch,dutch
ZOOKEEPER-1854,ZooKeeper,2013-12-30T09:47:51.000+0000,Major,ClientBase ZooKeeper server clean-up,"The ClientBase utility for tests provides methods for creating a ZooKeeper server, however the close up methods don't seem to shutdown that ZooKeeper server.",abranzyck,abranzyck
ZOOKEEPER-1853,ZooKeeper,2013-12-28T22:38:35.000+0000,Minor,zkCli.sh can't issue a CREATE command containing spaces in the data,"Execute the following command in zkCli.sh :create /contacts/1  {""country"":""CA"",""name"":""De La Salle""}The results is that only {""id"":1,""fullname"":""De is stored.The expected result is to have the full JS",scoulibaly,scoulibaly
ZOOKEEPER-1852,ZooKeeper,2013-12-26T10:20:46.000+0000,Major,ServerCnxnFactory instance is not properly cleanedup,"ClientBase#createNewServerInstance() - Say the startup of the server fails, this will not initialize 'serverFactory' and will be null. When the flow comes to teardown/shutdown, it will bypass stopping",rakeshr,rakeshr
ZOOKEEPER-1851,ZooKeeper,2013-12-23T23:23:17.000+0000,Blocker,Follower and Observer Request Processors Do Not Forward create2 Requests,"Recent changes to the Observer and Follower Request Processors switch on the request opcode, but create2 is left out. This leads to a condition where the create2 request is passed to the CommitProcess",cchen,cchen
ZOOKEEPER-1850,ZooKeeper,2013-12-21T17:52:15.000+0000,Trivial,cppunit test testNonexistingHost in TestZookeeperInit is failing on Unbuntu,This is the error:TestZookeeperInit.cc:241: Assertion: assertion failed [Expression: zh==0],abranzyck,abranzyck
ZOOKEEPER-1849,ZooKeeper,2013-12-18T03:12:21.000+0000,Blocker,Need to properly tear down tests in various cases,,abranzyck,abranzyck
ZOOKEEPER-1848,ZooKeeper,2013-12-18T01:17:17.000+0000,Major,[WINDOWS] Java NIO socket channels does not work with Windows ipv6 on JDK6,"ZK uses Java NIO to create ServerSorcket's from ServerSocketChannels. Under windows, the ipv4 and ipv6 is implemented independently, and Java seems that it cannot reuse the same socket channel for bot",enis,enis
ZOOKEEPER-1847,ZooKeeper,2013-12-17T23:05:22.000+0000,Major,Normalize line endings in repository,It is good practice to have all the code in the repository use the same line endings (LF) so that patches can be applied normally. We can add a gitattributes file so that checked out code can still ha,enis,enis
ZOOKEEPER-1846,ZooKeeper,2013-12-17T01:18:00.000+0000,Minor,Cached InetSocketAddresses prevent proper dynamic DNS resolution,"The class QuorumPeer maintains a Map<Long, QuorumServer> quorumPeers.Each QuorumServer is created with an instance of InetSocketAddress electionAddr, and holds it forever.I believe this is why the Zoo",benjamin.jaton,benjamin.jaton
ZOOKEEPER-1845,ZooKeeper,2013-12-17T00:13:50.000+0000,Major,FLETest.testLE fails on windows,"This test waits for the leader election to settle, but it is possible that 3 follower threads join before the leader thread joins. We should wait for the leader thread to join in a loop for some time.",michim,michim
ZOOKEEPER-1844,ZooKeeper,2013-12-16T23:58:33.000+0000,Critical,TruncateTest fails on windows,TruncateTest has been failing consistently on windows:https://builds.apache.org/job/ZooKeeper-trunk-WinVS2008_java/627/testReport/junit/org.apache.zookeeper.test/TruncateTest/testTruncate/,michim,michim
ZOOKEEPER-1843,ZooKeeper,2013-12-16T23:09:57.000+0000,Minor,Oddity in ByteBufferInputStream skip,I was reading ByteBufferInputStream.java; here is the skip method:    public long skip(long n) throws IOException {        long newPos = bb.position() + n;        if (newPos > bb.remaining()) {       ,justinsb,justinsb
ZOOKEEPER-1842,ZooKeeper,2013-12-16T20:35:02.000+0000,Major,Election listening thread not shutdown for leaders or followers,"When I was testing the patch for https://issues.apache.org/jira/browse/ZOOKEEPER-1691, the test included with that patch was failing for me.  The problem happened when the tests shuts down some follow",strib,strib
ZOOKEEPER-1841,ZooKeeper,2013-12-16T14:32:09.000+0000,Major,problem in QuorumTest,"QuorumTest.testNoLogBeforeLeaderEstablishment fails with Assertion: ""NOt following""",abranzyck,abranzyck
ZOOKEEPER-1840,ZooKeeper,2013-12-14T11:53:47.000+0000,Minor,Server tries to connect to itself during dynamic reconfig,Submitted this bug on a suggestion of Alexander Shraer (see https://issues.apache.org/jira/browse/ZOOKEEPER-1691)How to reproduce:== Server 1 zoo.cfg:standaloneEnabled=falsedynamicConfigFile=<path to>,bfreuden,bfreuden
ZOOKEEPER-1839,ZooKeeper,2013-12-13T14:25:26.000+0000,Critical,Deadlock in NettyServerCnxn,Deadlock found during NettyServerCnxn closure. Please see the attached threaddump.,rakeshr,rakeshr
ZOOKEEPER-1838,ZooKeeper,2013-12-13T12:18:58.000+0000,Major,ZooKeeper shutdown hangs indefinitely at NioServerSocketChannelFactory.releaseExternalResources,"Zookeeper shutdown hangs when releasing external resources. This has been observed when executing NioNettySuiteTest.{code}""main"" prio=6 tid=0x01498400 nid=0x2328 waiting on condition [0x0158e000..0x01",rakeshr,rakeshr
ZOOKEEPER-1837,ZooKeeper,2013-12-13T07:40:26.000+0000,Major,Fix JMXEnv checks (potential race conditions),"The following failures in ZooKeeper-3.4-WinVS2008_java and ZooKeeper-trunk-WinVS2008_java require fixing:[junit] junit.framework.AssertionFailedError: expected:<0> but was:<1>    [junit] 	at junit.fra",abranzyck,abranzyck
ZOOKEEPER-1836,ZooKeeper,2013-12-13T00:50:28.000+0000,Trivial,addrvec_next() fails to set next parameter if addrvec_hasnext() returns false,"There is a relatively innocuous but useless pointer assignment inaddrvec_next():195	void addrvec_next(addrvec_t *avec, struct sockaddr_storage *next)....203	    if (!addrvec_hasnext(avec))204	    {205",dutch,dutch
ZOOKEEPER-1835,ZooKeeper,2013-12-12T21:05:27.000+0000,Major,dynamic configuration file renaming fails on Windows,"On Windows, reconfig fails to rename the tmp dynamic config file to the real dynamic config filename.Javadoc of java.io.File.renameTo says the behavior is highly plateform dependent, so I guess this s",bfreuden,bfreuden
ZOOKEEPER-1834,ZooKeeper,2013-12-10T22:12:11.000+0000,Major,Catch IOException in FileTxnLog,"Upon an IOException in FileTxnLog#next(), the log file open remains open, which causes test cases at least in BufferSizeTest to fail. We need to add a catch block.",fpj,fpj
ZOOKEEPER-1833,ZooKeeper,2013-12-07T01:49:15.000+0000,Blocker,fix windows build,"A bunch of 3.4 tests are failing on windows.{noformat}    [junit] 2013-12-06 08:40:59,692 [myid:] - INFO  [main:ZKTestCase$1@65] - FAILED testEarlyLeaderAbandonment    [junit] 2013-12-06 08:41:10,472 ",michim,michim
ZOOKEEPER-1832,ZooKeeper,2013-12-05T18:21:27.000+0000,Minor,Add count of connected clients to submitted ganglia metrics,"The ganglia zookeeper plugin does not report the number of connected clients, though this information is available from the 'stat' command. ",maplebed,maplebed
ZOOKEEPER-1831,ZooKeeper,2013-12-05T09:20:18.000+0000,Major,Document remove watches details to the guide,This JIRA is for documenting the details of removing the watches,rakeshr,rakeshr
ZOOKEEPER-1830,ZooKeeper,2013-12-05T04:57:29.000+0000,Critical,Support command line shell for removing watches,This JIRA to discuss the command line shell for removing watches. Makes it easier to do ad-hoc testing.,rakeshr,rakeshr
ZOOKEEPER-1829,ZooKeeper,2013-12-05T04:57:10.000+0000,Critical,Umbrella jira for removing watches that are no longer of interest,,rakeshr,rakeshr
ZOOKEEPER-1828,ZooKeeper,2013-12-04T00:29:59.000+0000,Major,Audit src/c/src/zookeeper.c for missing error checking & early returns,After discussing the patch for ZOOKEEPER-1632 we came to realize that many methods in the c client don't honor the internal error checking that they do (i.e.: they don't return early on error). This i,rgs,rgs
ZOOKEEPER-1827,ZooKeeper,2013-12-03T21:08:21.000+0000,Major,Reduce the number of mntr calls in zookeeper ganglia plugin,"The zookeeper ganglia plugin script makes number of mntr calls to the zookeeper node for each of the metric, which seems to be an overhead to the zookeeper. I think it could be improvised to make a si",mnikhil,mnikhil
ZOOKEEPER-1826,ZooKeeper,2013-12-03T19:41:16.000+0000,Minor,zookeeper ganglia module fails to read the output of stat when too many clients are connected,"The ganglia zookeeper module uses a single 2048 byte socket.recv to get the response from the 'stat' command.  When there are more than a few clients connected, the list of connected clients fills the",maplebed,maplebed
ZOOKEEPER-1825,ZooKeeper,2013-12-02T13:01:38.000+0000,Major,"In ClientBase, if not set ""build.test.dir"" will throw IOException","{code}    static final File BASETEST = new File(System.getProperty(""build.test.dir"", ""build""));{code}{code}    public static File createTmpDir() throws IOException {        return createTmpDir(BASETES",tobe,tobe
ZOOKEEPER-1824,ZooKeeper,2013-12-02T08:10:40.000+0000,Major,We need a MiniZooKeeperCluster for unit test,We are developing a timestamp server to offer a precise auto increasing timestamp for other processes. ZooKeeper is used to select the master and store the persistent max offered timestamp. Now I'm no,tobe,tobe
ZOOKEEPER-1823,ZooKeeper,2013-11-28T01:44:04.000+0000,Trivial,LogFormatter should support printing transaction data as a string,Some times it's handy to have LogFormatter show you the content of the transactions (i.e.: if you are storing text).,rgs,rgs
ZOOKEEPER-1821,ZooKeeper,2013-11-23T06:43:58.000+0000,Major,very ugly warning when compiling load_gen.c,this is the compiler output:     3.4/src/c/src/load_gen.c:110:1: warning: control may reach end of non-void function [-Wreturn-type]     [exec] }     [exec] ^3.4/src/c/src/load_gen.c:135:1: warning: c,abranzyck,abranzyck
ZOOKEEPER-1820,ZooKeeper,2013-11-22T00:14:52.000+0000,Minor,The artifact org.apache.zookeeper:zookeeper:pom:3.4.5 has no license specified.,We are using maven licensing pluging (org.linuxstuff.maven:licensing-maven-plugin) to check/enforce licensing requirements for our dependencies and noticed that zookeper doesn't include licensing term,mhdwrk,mhdwrk
ZOOKEEPER-1819,ZooKeeper,2013-11-21T23:56:55.000+0000,Minor,DeserializationPerfTest calls method with wrong arguments,"The DeserializationPerfTest callsSerializationPerfTest.createNodes to create serialized nodes to deserialize.However 2 of the arguments, childcount and parentCVersion are switched in the call to the a",dknig1b,dknig1b
ZOOKEEPER-1818,ZooKeeper,2013-11-16T11:53:48.000+0000,Blocker,Fix don't care for trunk,See umbrella jira.,fpj,fpj
ZOOKEEPER-1817,ZooKeeper,2013-11-16T11:53:15.000+0000,Blocker,Fix don't care for b3.4,See umbrella jira.,fpj,fpj
ZOOKEEPER-1816,ZooKeeper,2013-11-15T21:33:15.000+0000,Minor,ClientCnxn.close() should block until threads have died,"In the testing of ACCUMULO-1379 and ACCUMULO-1858 it was seen that the non-blocking behavior of ClientCnxn.close(), and therefore ZooKeeper.close(), can cause a race condition when undeploying an appl",jaredwinick,jaredwinick
ZOOKEEPER-1815,ZooKeeper,2013-11-15T21:14:25.000+0000,Trivial,Tolerate incorrectly set system hostname in tests,A bunch of tests will fail with UnknownHostException errors when the hostname is incorrectly set on the system that you are running tests on.,something,something
ZOOKEEPER-1814,ZooKeeper,2013-11-15T10:37:23.000+0000,Major,Reduction of waiting time during Fast Leader Election,"FastLeader election takes long time because of the exponential backoff. Currently the time is 60 seconds.It would be interesting to give the possibility to configure this parameter, like for example f",danipeon,danipeon
ZOOKEEPER-1813,ZooKeeper,2013-11-15T06:40:25.000+0000,Major,Zookeeper restart fails due to missing node from snapshot,"Due to following exception Zookeeper restart is failing{noformat}java.io.IOException: Failed to process transaction type: 1 error: KeeperErrorCode = NoNode for /test/subdir2/subdir2/subdir	at org.apac",vinayrpet,vinayrpet
ZOOKEEPER-1812,ZooKeeper,2013-11-10T20:28:57.000+0000,Minor,ZooInspector reconnection always fails if first connection fails,"Steps to reproduce:- Connect to localhost:2181 when ZooKeeper server is down. After a few seconds, ZooInspector warns that the connection has failed- start the ZooKeeper server- Reconnect to localhost",benjamin.jaton,benjamin.jaton
ZOOKEEPER-1811,ZooKeeper,2013-11-07T05:37:52.000+0000,Major,"The ZooKeeperSaslClient service name principal is hardcoded to ""zookeeper""","The ClientCnxn class in ZK instantiates the ZooKeeperSaslClient with a hardcoded service name of ""zookeeper"". This causes all apps to fail in accessing ZK in a secure environment where the administrat",qwertymaniac,qwertymaniac
ZOOKEEPER-1810,ZooKeeper,2013-11-06T16:03:14.000+0000,Major,Add version to FLE notifications for trunk,The same as ZOOKEEPER-1808 but for trunk.,fpj,fpj
ZOOKEEPER-1809,ZooKeeper,2013-11-06T05:06:42.000+0000,Minor,ephemeral node not deleted (or recreated?) after session expiry,"We have been running into a situation where we attempt to recreate our ephemeral nodes after a session expiry, only to find that the node already exists.   Admittedly, this is only happening when we a",shauns,shauns
ZOOKEEPER-1808,ZooKeeper,2013-11-05T17:03:50.000+0000,Blocker,Add version to FLE notifications for 3.4 branch,Add version to notification messages so that we can differentiate messages during rolling upgrades. This task is for the 3.4 branch only. ,fpj,fpj
ZOOKEEPER-1807,ZooKeeper,2013-11-01T23:32:47.000+0000,Blocker,Observers spam each other creating connections to the election addr,"Hey [~shralex],I noticed today that my Observers are spamming each other trying to open connections to the election port. I've got tons of these:{noformat}2013-11-01 22:19:45,819 - DEBUG [WorkerSender",rgs,rgs
ZOOKEEPER-1806,ZooKeeper,2013-10-31T21:47:12.000+0000,Major,testCurrentServersAreObserversInNextConfig failing frequently on trunk with non-jdk6,testCurrentServersAreObserversInNextConfig failing frequently on trunk with jdk7I see a number of failures recently on this test. Is it a real issue or flakey? Perhaps due to re-ordering/cleanup with ,phunt,phunt
ZOOKEEPER-1805,ZooKeeper,2013-10-30T03:18:13.000+0000,Blocker,"""Don't care"" value in ZooKeeper election breaks rolling upgrades",This is an issue that has been originally reported in ZOOKEEPER-1732.,fpj,fpj
ZOOKEEPER-1804,ZooKeeper,2013-10-29T08:56:40.000+0000,Major,Stat the realtime tps of zookeepr server,"At this time, we assessed whether zookeeper supports some business scenarios, always use the number of subscribers, or to assess the number of clientsYou konw, some times, many client connection with",nileader,nileader
ZOOKEEPER-1803,ZooKeeper,2013-10-26T11:50:47.000+0000,Major,Add description for pzxid in programmer's guide.,"The Stat_org.apache.zookeeper.data.Stat_ Structures has the filed pzxid, but no document about it in  programmer's guide_http://zookeeper.apache.org/doc/r3.4.3/zookeeperProgrammers.html#sc_zkStatStruc",nileader,nileader
ZOOKEEPER-1802,ZooKeeper,2013-10-25T16:48:32.000+0000,Major,flakey test testResyncByTxnlogThenDiffAfterFollowerCrashes,This test fails intermittently on trunk:https://builds.apache.org/view/S-Z/view/ZooKeeper/job/ZooKeeper-trunk-jdk7/691/testReport/junit/org.apache.zookeeper.test/FollowerResyncConcurrencyTest/testResy,phunt,phunt
ZOOKEEPER-1801,ZooKeeper,2013-10-25T12:16:29.000+0000,Major,TestReconfig failure,"This is the message:{noformat}/home/jenkins/jenkins-slave/workspace/ZooKeeper-trunk/trunk/src/c/tests/TestReconfig.cc:183: Assertion: equality assertion failed [Expected: 1, Actual  : 0]{noformat} htt",fpj,fpj
ZOOKEEPER-1800,ZooKeeper,2013-10-24T17:04:26.000+0000,Major,jenkins failure in testGetProposalFromTxn,https://builds.apache.org/view/S-Z/view/ZooKeeper/job/ZooKeeper-trunk-jdk7/691/testReport/junit/org.apache.zookeeper.test/GetProposalFromTxnTest/testGetProposalFromTxn/test was introduced in ZOOKEEPER,phunt,phunt
ZOOKEEPER-1799,ZooKeeper,2013-10-22T18:20:50.000+0000,Minor,SaslAuthFailDesignatedClientTest.testAuth fails frequently on SUSE,org.apache.zookeeper.test.SaslAuthFailDesignatedClientTest.testAuth often fails on SUSE with the following error stack trace:{code}junit.framework.AssertionFailedError: expected [0x141ccb60d870000] ex,jeffreyz,jeffreyz
ZOOKEEPER-1798,ZooKeeper,2013-10-20T08:52:04.000+0000,Blocker,Fix race condition in testNormalObserverRun,This is the output messges:<noformat>Testcase: testNormalObserverRun took 4.221 sec        FAILEDexpected:<data[2]> but was:<data[1]>junit.framework.AssertionFailedError: expected:<data[2]> but was:<d,fpj,fpj
ZOOKEEPER-1797,ZooKeeper,2013-10-18T18:57:47.000+0000,Blocker,PurgeTxnLog may delete data logs during roll,"org.apache.zookeeper.server.PurgeTxnLog deletes old data logs and snapshots, keeping the newest N snapshots and any data logs that have been written since the snapshot.It does this by listing the avai",dagit,dagit
ZOOKEEPER-1796,ZooKeeper,2013-10-14T22:31:14.000+0000,Trivial,"Move common code from {Follower, Observer}ZooKeeperServer into LearnerZooKeeperServer","Since ZOOKEEPER-1552 we are enabling syncProcessor in Observers, so we should have a proper shutdown() method there. Since FollowerZooKeeperServer already has one, which does the same thing that we ne",rgs,rgs
ZOOKEEPER-1795,ZooKeeper,2013-10-14T19:38:51.000+0000,Blocker,unable to build c client on ubuntu,"Seems there is an issue for Ubuntu (I'm on 13.04), however I'm only seeing it on trunk and not branch 34{noformat}make checkmake  zktest-st zktest-mtmake[1]: Entering directory `/home/phunt/dev/svn/sv",phunt,phunt
ZOOKEEPER-1794,ZooKeeper,2013-10-14T06:15:32.000+0000,Major,Add hash check to transaction history in quorum servers,The goal of this task is to add a hash number to each transaction in the transaction history. This hash number will depend on the entire transaction history. This hash number will be the same in all m,abranzyck,abranzyck
ZOOKEEPER-1793,ZooKeeper,2013-10-11T04:43:59.000+0000,Major,Zab1_0Test.testNormalObserverRun() is flaky,"not sure if this is due to a known issue or not.// check and make sure the change is persistedzkDb2 = new ZKDatabase(new FileTxnSnapLog(logDir, snapDir));lastZxid = zkDb2.loadDataBase();Assert.assertE",shralex,shralex
ZOOKEEPER-1792,ZooKeeper,2013-10-11T01:18:26.000+0000,Minor,Observers don't need to keep an in-memory copy of last commited proposals ,In FinalRequestProcessor.java#processRequest we have:{noformat}     if (request.isQuorum()) {                zks.getZKDatabase().addCommittedProposal(request);     }{noformat}but this is only useful t,rgs,rgs
ZOOKEEPER-1791,ZooKeeper,2013-10-11T00:07:20.000+0000,Major,ZooKeeper package includes unnecessary jars that are part of the package.,ZooKeeper package includes unnecessary jars that are part of the package.Packages like fatjar and {code}maven-ant-tasks-2.1.3.jarmaven-artifact-2.2.1.jarmaven-artifact-manager-2.2.1.jarmaven-error-dia,mahadev,mahadev
ZOOKEEPER-1790,ZooKeeper,2013-10-10T23:59:13.000+0000,Major,Deal with special ObserverId in QuorumCnxManager.receiveConnection,"QuorumCnxManager.receiveConnection assumes that a negative sid means that this is a 3.5.0 server, which has a different communication protocol. This doesn't account for the fact that ObserverId = -1 i",shralex,shralex
ZOOKEEPER-1789,ZooKeeper,2013-10-10T23:10:54.000+0000,Critical,3.4.x observer causes NPE on 3.5.0 (trunk) participants,"(assigning to Alex because this was introduced by ZOOKEEPER-107, but will upload a patch as well.)I have a 5 participants cluster running what will be 3.5.0 (i.e.: trunk as of today) and an observer r",rgs,rgs
ZOOKEEPER-1788,ZooKeeper,2013-10-09T19:43:33.000+0000,Minor,Support clientID field on connection requests ,I suspect it's very common for deployments to have a wide variety of client libraries (different versions/languages) connecting to a given cluster.It would be handy to have a way to identify clients v,rgs,rgs
ZOOKEEPER-1787,ZooKeeper,2013-10-09T18:31:20.000+0000,Minor,Add support for enabling local session in rolling upgrade,"Currently, local session need to be enable by stopping the entire ensemble. If a rolling upgrade is used, all write request from a local session will fail with session move until the local session is ",thawan,thawan
ZOOKEEPER-1786,ZooKeeper,2013-10-09T08:10:36.000+0000,Minor,ZooKeeper data model documentation is incorrect,"When I look at https://zookeeper.apache.org/doc/trunk/zookeeperProgrammers.html#ch_zkDataModel, I see two things that seem wrong in terms of restricted characters:* \uXFFFE - \uXFFFF (where X is a dig",ntolia,ntolia
ZOOKEEPER-1785,ZooKeeper,2013-10-09T00:22:29.000+0000,Minor,Small fix in zkServer.sh to support new configuration format,The problem can be reproduced by running a server with the following type of config file:dataDir=/Users/shralex/zookeeper-test/zookeeper1syncLimit=2initLimit=5tickTime=2000server.1=localhost:2721:2731,shralex,shralex
ZOOKEEPER-1784,ZooKeeper,2013-10-08T19:18:12.000+0000,Major,Logic to process INFORMANDACTIVATE packets in syncWithLeader seems bogus,If you look at Learner#syncWithLeader:{noformat}            while (self.isRunning()) {                readPacket(qp);                switch(qp.getType()) {.......                case Leader.INFORM:   ,rgs,rgs
ZOOKEEPER-1783,ZooKeeper,2013-10-07T18:01:56.000+0000,Major,Distinguish initial configuration from first established configuration,We need a way to distinguish an initial config of a server and an initial config of a running ensemble (before any reconfigs happen). Currently both have version 0. The version of a config increases w,shralex,shralex
ZOOKEEPER-1782,ZooKeeper,2013-10-04T18:24:07.000+0000,Major,zookeeper.superUser is not as super as superDigest,"The zookeeper.superUser system property does not fully grant super user privileges, like zookeeper.DigestAuthenticationProvider.superDigest does.zookeeper.superUser only has as many privileges as the ",revans2,revans2
ZOOKEEPER-1781,ZooKeeper,2013-10-04T01:19:27.000+0000,Minor,ZooKeeper Server fails if snapCount is set to 1 ,"If snapCount is set to 1, ZooKeeper Server can start but it fails with the below error:2013-10-02 18:09:07,600 [myid:1] - ERROR [SyncThread:1:SyncRequestProcessor@151] - Severe unrecoverable error, ex",bwtakacy,bwtakacy
ZOOKEEPER-1780,ZooKeeper,2013-10-02T18:56:10.000+0000,Minor,add a FAQ for why myid file is required,"This comes up every so often, would be good for us to document on the FAQ.https://cwiki.apache.org/confluence/display/ZOOKEEPER/FAQhere's one such discussion: http://markmail.org/message/cvzz3tq3gievi",phunt,phunt
ZOOKEEPER-1779,ZooKeeper,2013-10-02T18:42:57.000+0000,Critical,ReconfigTest littering the source root with test files,After running the ReconfigTest I saw a number of the following files in the source root (not in a subdir of the build directory as would be expected)zoo_replicated1.dynamic(saw files zoo_replicated{1-,phunt,phunt
ZOOKEEPER-1778,ZooKeeper,2013-10-02T17:36:16.000+0000,Minor,Use static final Logger objects,Logger is not declared as 'private static final' in few classes,rakeshr,rakeshr
ZOOKEEPER-1777,ZooKeeper,2013-10-02T10:09:42.000+0000,Critical,Missing ephemeral nodes in one of the members of the ensemble,"In a 3-servers ensemble, one of the followers doesn't see part of the ephemeral nodes that are present in the leader and the other follower. The 8 missing nodes in ""the follower that is not ok"" were c",abranzyck,abranzyck
ZOOKEEPER-1776,ZooKeeper,2013-10-02T10:07:01.000+0000,Major,Ephemeral nodes not present in one of the members of the ensemble,"In a 3-servers ensemble, one of the followers doesn't see part of the ephemeral nodes that are present in the leader and the other follower. The 8 missing nodes in ""the follower that is not ok"" were c",abranzyck,abranzyck
ZOOKEEPER-1775,ZooKeeper,2013-10-02T10:05:17.000+0000,Major,Ephemeral nodes not present in one of the members of the ensemble,"In a 3-servers ensemble, one of the followers doesn't see part of the ephemeral nodes that are present in the leader and the other follower. The 8 missing nodes in ""the follower that is not ok"" were c",abranzyck,abranzyck
ZOOKEEPER-1774,ZooKeeper,2013-10-01T23:14:39.000+0000,Blocker,"QuorumPeerMainTest fails consistently with ""complains about host"" assertion failure","QuorumPeerMainTest fails consistently with ""complains about host"" assertion failure.{noformat}2013-10-01 16:09:17,962 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@54] - TEST METHOD FAIL",phunt,phunt
ZOOKEEPER-1773,ZooKeeper,2013-10-01T21:20:56.000+0000,Major,incorrect reference to jline version/lib in docs,The docs refer to an old version of jline{noformat}src/docs/src/documentation/content/xdocs/zookeeperAdmin.xml227:              <para><computeroutput>$ java -cp zookeeper.jar:lib/slf4j-api-1.6.1.jar:l,phunt,phunt
ZOOKEEPER-1772,ZooKeeper,2013-10-01T13:43:13.000+0000,Major,config.guess downgraded from timestamp='2012-02-10' in 3.3.x to timestamp='2005-07-08' in 3.4.x,"Was this intentional?  If so, why?",ckhall,ckhall
ZOOKEEPER-1771,ZooKeeper,2013-10-01T07:04:07.000+0000,Minor,ZooInspector authentication,"ZooInspector doesn't support authentication, so it always connects as anonymous to the ensemble.It would be nice to be able to configure the authentication scheme+data in order to browse the nodes tha",benjamin.jaton,benjamin.jaton
ZOOKEEPER-1770,ZooKeeper,2013-09-30T08:00:45.000+0000,Minor,NullPointerException in SnapshotFormatter,"SnapshotFormatter fails with a NullPointerException when parsing one snapshot (with ""null"" data in one Znode):Exception in thread ""main"" java.lang.NullPointerException        at org.apache.zookeeper.s",abranzyck,abranzyck
ZOOKEEPER-1769,ZooKeeper,2013-09-29T17:12:17.000+0000,Minor,ZooInspector can't display node data/metadata/ACLs,There seem to be a few bugs in the trunk that prevent ZooInspector to load the node viewers ( the 3 tabs in the main windows when you select a ZK node in the tree don't show up any more ).Apparently i,benjamin.jaton,benjamin.jaton
ZOOKEEPER-1768,ZooKeeper,2013-09-27T09:19:10.000+0000,Major,Cluster fails election loop until the device is full,"Hi, I have a five nodes cluster versioned 3.4.5 and now i find one node is offline.Firstly i restart the node but i find that ""Error contacting service. It is probably not running."" and i find that th",fvn4edal,fvn4edal
ZOOKEEPER-1767,ZooKeeper,2013-09-27T01:28:05.000+0000,Minor,DEBUG log statements use SLF4j {} format to improve performance,"As a coordination service, ZooKeeper is meant to be high performant. DEBUG logs are not normally viewed (see Doug Cutting's comment in HADOOP-953). I propose to add a conditional check to each DEBUG l",jackie.chang,jackie.chang
ZOOKEEPER-1766,ZooKeeper,2013-09-26T04:25:11.000+0000,Minor,Consistent log severity level guards and statements,"A log statement should be guarded by its matching severity level. A log statement like         if (LOG.isTraceEnabled()) {            LOG.info(""Session closing: 0x"" + Long.toHexString(sessionId));does",jackie.chang,jackie.chang
ZOOKEEPER-1765,ZooKeeper,2013-09-25T22:21:01.000+0000,Trivial,"Update code conventions link on ""How to contribute"" page",,fpj,fpj
ZOOKEEPER-1764,ZooKeeper,2013-09-25T09:51:41.000+0000,Major,ZooKeeper attempts at SASL eventhough it shouldn't,"We are using a proprietary SASL solution, but we don't want to use it with ZooKeeper. Unfortunately it seems, that there is no way to disable SASL for ZooKeeper as the code only checks for presence of",merunka,merunka
ZOOKEEPER-1763,ZooKeeper,2013-09-23T12:14:48.000+0000,Minor,Upgrade the netty version,"2 years ago (in https://github.com/netty/netty/issues/103), Netty changed their group-id from org.jboss.netty to io.netty. ZooKeeper is still on the 3.2.5, so applications using 3.3 cannot use the mav",nkeywal,nkeywal
ZOOKEEPER-1762,ZooKeeper,2013-09-23T00:01:17.000+0000,Major,Implement 'check' version cli command,,rakeshr,rakeshr
ZOOKEEPER-1761,ZooKeeper,2013-09-22T23:05:48.000+0000,Major,Expose 'check' version api in ZooKeeper client,Implement ZooKeeper#check api,rakeshr,rakeshr
ZOOKEEPER-1760,ZooKeeper,2013-09-22T23:02:04.000+0000,Major,Provide an interface for check version of a node,"The idea of this JIRA is to discuss the check version interface which is used to see the existence of a node for the specified version. Presently only multi transaction api has this interface, this um",rakeshr,rakeshr
ZOOKEEPER-1759,ZooKeeper,2013-09-18T06:28:32.000+0000,Major,"Adding ability to allow READ operations for authenticated users,  versus keeping ACLs wide open for READ","Today when using SASLAuthenticationProvider to authenticate Zookeeper Clients access to the data based on ACLS set on znodes there is no other choice but to set READ ACLs to be ""world"", ""anyone"" with ",yufeldman,yufeldman
ZOOKEEPER-1758,ZooKeeper,2013-09-14T00:43:09.000+0000,Minor,Add documentation for zookeeper.observer.syncEnabled flag,,thawan,thawan
ZOOKEEPER-1757,ZooKeeper,2013-09-12T23:57:15.000+0000,Minor,Adler32 may not be sufficient to protect against data corruption,I was investigating data inconsistency bug in our internal branch. One possible area is snapshot/txnlog corruption. So I wrote a more robust corruption test and found that it is easy to break our chec,thawan,thawan
ZOOKEEPER-1756,ZooKeeper,2013-09-08T04:45:23.000+0000,Major,zookeeper_interest() in C client can return a timeval of 0,"If the client is connected to a zookeeper server that has hung while there is an outstanding request, zookeeper_interest() can return a timeval of 0 because send_to will be negative.",lindvall,lindvall